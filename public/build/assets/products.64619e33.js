import{x as g,a7 as _,a8 as P,ah as i}from"./app-setting.46400ad2.js";function L(){const m=g([]),f=g([]),y=g({name:"",parent_id:"",description:"",is_published:""}),p=_(),c=g({}),l=g(!1),r=P("$swal"),h=async(e=1,s="",n="",u="",a="",d="created_at",t="desc")=>{i.get("/api/products?page="+e+"&search_id="+s+"&search_title="+n+"&search_parent_id="+u+"&search_global="+a+"&order_column="+d+"&order_direction="+t).then(o=>{m.value=o.data})};return{productList:f,products:m,product:y,getProducts:h,getProductList:async()=>{i.get("/api/product-list").then(e=>{f.value=e.data.data})},getProduct:async e=>{i.get("/api/products/"+e).then(s=>{y.value=s.data.data})},storeProduct:async(e,s)=>{if(console.log(e),l.value)return;console.log(e),l.value=!0,c.value={};let n=new FormData;const u=e.categories.map(t=>t.id);n.append("categories",u);for(var a=0;a<s.length;a++){let t=s[a];n.append("product_gallery["+a+"]",t)}for(let t in e)e.hasOwnProperty(t)&&e.hasOwnProperty(t)&&t!=="categories"&&n.append(t,e[t]);const d={headers:{"content-type":"multipart/form-data"}};i.post("/api/products",n,d).then(t=>{p.push({name:"products.create"}),e.name=null,e.description=null,e.parent_id=null,e.is_published=null,e.model_number=null,e.sku=null,e.quantity=null,e.cost_price=null,e.retail_price=null,e.weight=null,e.length=null,e.width=null,e.height=null,e.short_description=null,e.technical_specification=null,e.terms_of_operation=null,e.main_image=null,e.product_gallery=null,e.document=null,r({icon:"success",title:"Product saved successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(c.value=t.response.data.errors)}).finally(()=>l.value=!1)},updateProduct:async(e,s)=>{if(l.value)return;l.value=!0,c.value={};let n=new FormData;const u=e.categories.map(t=>t.id);if(console.log(n),n.append("categories",u),s.length>0)for(var a=0;a<s.length;a++){let t=s[a];n.append("product_gallery["+a+"]",t)}for(let t in e)if(e.hasOwnProperty(t)&&t!=="categories"){let o=e[t];o===null&&(t==="weight"||t==="length"||t==="height"||t==="width"||t==="quantity"||t==="cost_price"||t==="retail_price")&&(o=0),n.append(t,o)}const d={headers:{"Content-Type":"multipart/form-data"}};n.append("_method","put"),console.log(n),await i.post("/api/products/"+e.id,n,d).then(t=>{p.push({name:"products.index"}),r({icon:"success",title:"Product updated successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(c.value=t.response.data.errors)}).finally(()=>l.value=!1)},deleteProduct:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&i.delete("/api/products/"+e).then(n=>{h(),p.push({name:"products.index"}),r({icon:"success",title:"Product deleted successfully"})}).catch(n=>{r({icon:"error",title:"Something went wrong"})})})},deleteProductImage:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&i.delete("/api/product-images/"+e).then(n=>{h(),p.go(0),r({icon:"success",title:"Image deleted successfully"})}).catch(n=>{r({icon:"error",title:"Something went wrong"})})})},validationErrors:c,isLoading:l}}export{L as u};
