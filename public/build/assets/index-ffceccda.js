import{a as O,v as e,d as w}from"./index-b929d4f8.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as q}from"./vue-draggable-next.esm-bundler-884d17d7.js";/* empty css                        */import"./use-meta-8d74f409.js";import{a as V}from"./vee-validate-15a23953.js";import{u as A}from"./categories-adadbb3b.js";import{u as F}from"./solutions-91a60fae.js";import"./_commonjsHelpers-23102255.js";import"./index-1d0c1f64.js";const H={class:"layout-px-spacing"},$={class:"row layout-top-spacing"},G={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},R={class:"panel br-6 p-0"},J={class:"panel-body"},K={class:"row"},Q={class:"form-group col-md-1"},W={class:"form-group col-md-3"},X={class:"form-group col-md-3",style:{display:"none"}},Y={class:"form-group offset-md-3 col-md-5"},Z={class:"table-responsive"},ee={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},te={role:"rowgroup"},oe={role:"row"},ae={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},le={role:"rowgroup"},re={key:0,"aria-colindex":"0",class:"handle"},ne={"aria-colindex":"1",role:"cell"},se=["src"],ie={"aria-colindex":"1",role:"cell"},de=["innerHTML"],ce={"aria-colindex":"3",role:"cell"},ue={"aria-colindex":"4",role:"cell"},me={key:0,class:"badge badge-success inv-status"},pe={key:1,class:"badge badge-danger inv-status"},ge={"aria-colindex":"5",role:"cell"},Ve={"aria-colindex":"6",role:"cell",class:"text-center"},ve={class:"btn-group dropdown custom-dropdown"},Ne={class:"dropdown-menu","aria-labelledby":"btnGroupVerticalDrop1"},Ee=["onClick"],fe={"aria-label":"Page navigation",style:{"margin-top":"20px"}},he={class:"pagination justify-content-center"},ze={__name:"index",setup(be){const{solutions:xe,getSolutions:we,deleteSolution:k}=F(),{getCategoryList:ke,categoryList:y,getMainCategoryList:_,categoryMainList:C,getSelectedCategoryList:P}=A(),i=O();e.ref(i);const r=e.ref(i.params.page?parseInt(i.params.page):1),h=e.ref(0),B=e.ref(0),v=e.ref(i.params.id?parseInt(i.params.id):1),N=e.ref([]),u=e.ref([]),{value:E}=V("perPage",null,{initialValue:"20"}),{value:b}=V("filter_category_id",null,{initialValue:""}),{value:m}=V("main_category",null,{initialValue:""}),{value:S}=V("search",null,{initialValue:""}),l=e.reactive({perPage:E,filter_category_id:b,main_category:m,search:S}),f=async()=>{try{l.main_category!=""&&l.search==""&&(l.perPage=1e4);const a=await w.get("/api/get-solutions",{params:{page:r.value,per_page:l.perPage,category_id:v.value,mainCategory:l.main_category.id,search:l.search}});h.value=a.data.categories.total,B.value=a.data.categories.data.length,N.value=a.data.categories.data}catch(a){console.error(a)}},c=e.computed(()=>Math.ceil(h.value/E.value)),d=e.ref([]),L=()=>{r.value>1&&r.value--},x=()=>{r.value<c.value&&r.value++},M=a=>{r.value=a},p=()=>{d.value=N.value.slice(0,0+E.value)},D=a=>Number.isInteger(a),T=e.computed(()=>{const a=[];r.value>1&&a.push("Prev");let n=Math.max(1,r.value-Math.floor(5/2)),s=Math.min(n+5-1,c.value);s-n<5-1&&(n=Math.max(1,s-5+1));for(let o=n;o<=s;o++)a.push(o);return r.value<c.value&&a.push("Next"),a}),g=(a,t)=>`/admin/solutions/page/${t}`;e.onMounted(()=>{f(),_()}),e.watch(r,f),e.watch(m,a=>{if(m){const t=l.main_category.id;l.filter_category_id=null,P(t)}}),e.watch(l,p),e.watch(m,p),e.watch(b,p),e.watch(N,p),e.watchEffect(()=>{const a=i.params;i.query,a.id!==""&&v.value!==a.id&&(r.value=1,v.value=a.id?parseInt(a.id):1,a.page!==""&&r.value!==a.page&&(r.value=a.page?parseInt(a.page):1),f())});const I=async a=>{try{const t=await w.post("/api/solutions-update-order",{data:a})}catch(t){console.error("Error saving data:",t)}},j=()=>{d.value.forEach(a=>{a.order=null})},z=a=>{const t=d.value.map(n=>n.id);I(t),d.value.forEach(n=>{const s=t.indexOf(n.id);n.order=s+1})};return(a,t)=>{const n=e.resolveComponent("multiselect"),s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",H,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[5]||(t[5]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Solutions")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"View Solutions")])])])])])],-1))])),e.createElementVNode("div",$,[e.createElementVNode("div",G,[e.createElementVNode("div",R,[t[27]||(t[27]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null,"View Solutions")])])])],-1)),e.createElementVNode("div",J,[e.createElementVNode("div",K,[e.createElementVNode("div",Q,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Per Page",-1)),e.withDirectives(e.createElementVNode("select",{id:"perpage","onUpdate:modelValue":t[0]||(t[0]=o=>l.perPage=o),class:"form-control form-select select"},t[6]||(t[6]=[e.createStaticVNode('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[e.vModelSelect,l.perPage]])]),e.createElementVNode("div",W,[t[8]||(t[8]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Segment",-1)),e.createVNode(n,{modelValue:l.main_category,"onUpdate:modelValue":t[1]||(t[1]=o=>l.main_category=o),options:e.unref(C),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",X,[t[9]||(t[9]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Main Category",-1)),e.createVNode(n,{modelValue:l.filter_category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>l.filter_category_id=o),options:e.unref(y),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",Y,[t[10]||(t[10]=e.createElementVNode("label",{for:"post-name"},"Search",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[3]||(t[3]=o=>l.search=o),type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[e.vModelText,l.search]])])]),e.createElementVNode("div",Z,[e.createElementVNode("table",ee,[e.createElementVNode("thead",te,[e.createElementVNode("tr",oe,[l.main_category!==""?(e.openBlock(),e.createElementBlock("th",ae,t[11]||(t[11]=[e.createElementVNode("div",null,null,-1)]))):e.createCommentVNode("",!0),t[12]||(t[12]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e.createElementVNode("div",null,"Image")],-1)),t[13]||(t[13]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e.createElementVNode("div",null,"Name")],-1)),t[14]||(t[14]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e.createElementVNode("div",null,"Description")],-1)),t[15]||(t[15]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e.createElementVNode("div",null,"Parent Category")],-1)),t[16]||(t[16]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e.createElementVNode("div",null,"Status")],-1)),t[17]||(t[17]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e.createElementVNode("div",null,"Created At")],-1)),t[18]||(t[18]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e.createElementVNode("div",null,"action")],-1))])]),e.createElementVNode("tbody",le,[e.createVNode(e.unref(q),{id:"left-lovehandles",modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=o=>d.value=o),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:j,onEnd:z},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,o=>(e.openBlock(),e.createElementBlock("tr",{key:o.id,role:"row",class:""},[l.main_category!==""?(e.openBlock(),e.createElementBlock("td",re,t[19]||(t[19]=[e.createElementVNode("div",null,[e.createElementVNode("span",null,[e.createElementVNode("i",{class:"far fa-clone"})])],-1)]))):e.createCommentVNode("",!0),e.createElementVNode("td",ne,[e.createElementVNode("img",{style:{width:"80px"},src:"/storage/"+o.main_image_path,class:"rounded profile-img",alt:"avatar"},null,8,se)]),e.createElementVNode("td",ie,e.toDisplayString(o.name),1),e.createElementVNode("td",{"aria-colindex":"2",role:"cell",innerHTML:o.description},null,8,de),e.createElementVNode("td",ce,e.toDisplayString(o.solution_category.name),1),e.createElementVNode("td",ue,[o.is_published===1?(e.openBlock(),e.createElementBlock("span",me,"Published")):e.createCommentVNode("",!0),o.is_published!==1?(e.openBlock(),e.createElementBlock("span",pe,"Not Published")):e.createCommentVNode("",!0)]),e.createElementVNode("td",ge,e.toDisplayString(o.created_at),1),e.createElementVNode("td",Ve,[e.createElementVNode("div",ve,[t[23]||(t[23]=e.createElementVNode("button",{id:"btnGroupVerticalDrop1",type:"button",class:"btn btn-dark dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e.createTextVNode(" Action "),e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[e.createElementVNode("polyline",{points:"6 9 12 15 18 9"})])],-1)),e.createElementVNode("div",Ne,[e.createVNode(s,{to:{name:"solutions.edit",params:{id:o.id}},class:"dropdown-item"},{default:e.withCtx(()=>t[20]||(t[20]=[e.createTextVNode(" Edit            "),e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e.createElementVNode("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e.createVNode(s,{to:{name:"solutions.category.sequence",params:{id:o.id}},class:"dropdown-item"},{default:e.withCtx(()=>t[21]||(t[21]=[e.createTextVNode(" Update Category Sequence            "),e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e.createElementVNode("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e.createElementVNode("a",{href:"javascript:;",class:"dropdown-item",onClick:e.withModifiers(U=>e.unref(k)(o.id),["prevent"])},t[22]||(t[22]=[e.createTextVNode("Delete       "),e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e.createElementVNode("polyline",{points:"3 6 5 6 21 6"}),e.createElementVNode("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ee)])])])]))),128))]),_:1},8,["modelValue"])])])]),e.createElementVNode("nav",fe,[e.createElementVNode("ul",he,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===1}])},[e.createVNode(s,{class:"page-link page-link-prev",to:g(u.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:L},{default:e.withCtx(()=>t[24]||(t[24]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.value,o=>(e.openBlock(),e.createElementBlock("li",{key:o,class:e.normalizeClass(["page-item",{active:o===r.value}])},[D(o)?(e.openBlock(),e.createBlock(s,{key:0,class:"page-link",to:g(u.value.id,o),onClick:U=>M(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===c.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:g(u.value.id,c.value),"aria-label":"Next",onClick:x},{default:e.withCtx(()=>t[25]||(t[25]=[e.createTextVNode(" Last "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===c.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:g(u.value.id,r.value+1),"aria-label":"Next",onClick:x},{default:e.withCtx(()=>t[26]||(t[26]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{ze as default};
