import{c2 as N,r as i,a as q,c as B,o as U,w as d,af as O,bO as F,bG as g,bH as _,bW as T,bI as e,aV as W,W as j,cc as G,c4 as H,e as h,am as V,bT as R,ac as z,bP as A,bM as J}from"./index.8fdd762b.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as K}from"./vue-draggable-next.esm-bundler.0c4a328e.js";/* empty css                        */import"./use-meta.aac5f655.js";import{a as m}from"./vee-validate.e53166b9.js";import{u as Q}from"./categories.66755018.js";import"./_commonjsHelpers.f037b798.js";import"./Modal.0f3c8a07.js";const X={class:"layout-px-spacing"},Y={class:"row layout-top-spacing"},Z={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},$={class:"panel br-6 p-0"},ee={class:"panel-body"},ae={class:"row"},te={class:"form-group col-md-1"},oe={class:"form-group col-md-3",style:{display:"none"}},le={class:"form-group col-md-3",style:{display:"none"}},se={class:"table-responsive"},re={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},ie={role:"rowgroup"},ne={"aria-colindex":"1",role:"cell"},Pe={__name:"category-sequence",setup(ce){const{getCategoryList:de,categoryList:w,getMainCategoryList:ue,categoryMainList:C,getSelectedCategoryList:S}=Q(),s=N();i(s);const n=i(s.params.page?parseInt(s.params.page):1),I=i(s.params.id?parseInt(s.params.id):0);i(0),i(0);const v=i(s.params.id?parseInt(s.params.id):1),b=i([]),M=i([]),{value:x}=m("perPage",null,{initialValue:"20"}),{value:P}=m("filter_category_id",null,{initialValue:""}),{value:u}=m("main_category",null,{initialValue:""}),{value:D}=m("search",null,{initialValue:""}),l=q({perPage:x,filter_category_id:P,main_category:u,search:D}),y=async()=>{try{l.main_category==""&&(l.perPage=1e4);const t=await axios.get("/api/get-solutions-categories",{params:{page:n.value,per_page:l.perPage,category_id:v.value,mainCategory:l.main_category.id,solution_id:I.value,search:l.search}});b.value=t.data.categories,M.value=t.data.the_solution}catch(t){console.error(t)}},c=i([]),p=()=>{c.value=b.value.slice(0,0+x.value)};B(()=>{const t=[];n.value>1&&t.push("Prev");let r=Math.max(1,n.value-Math.floor(5/2)),o=Math.min(r+5-1,totalPages.value);o-r<5-1&&(r=Math.max(1,o-5+1));for(let f=r;f<=o;f++)t.push(f);return n.value<totalPages.value&&t.push("Next"),t}),U(()=>{y()}),d(n,y),d(u,t=>{if(u){const a=l.main_category.id;l.filter_category_id=null,S(a)}}),d(l,p),d(u,p),d(P,p),d(b,p),O(()=>{const t=s.params;s.query,t.id!==""&&v!==t.id&&(n.value=1,v.value=t.id?parseInt(t.id):1,t.page!==""&&n!==t.page&&(n.value=t.page?parseInt(t.page):1),y())});const k=async t=>{try{const a=await axios.post("/api/solutions-categories-update-order",{data:t})}catch(a){console.error("Error saving data:",a)}},L=()=>{c.value.forEach(t=>{t.order=null})},E=t=>{const a=c.value.map(r=>r.id);k(a)};return(t,a)=>{const r=F("multiselect");return g(),_("div",X,[(g(),T(W,{to:"#breadcrumb"},[a[4]||(a[4]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e("div",Y,[e("div",Z,[e("div",$,[a[12]||(a[12]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1)),e("div",ee,[e("div",ae,[e("div",te,[a[6]||(a[6]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),j(e("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>l.perPage=o),id:"perpage",class:"form-control form-select select"},a[5]||(a[5]=[H('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6)]),512),[[G,l.perPage]])]),e("div",oe,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),h(r,{modelValue:l.main_category,"onUpdate:modelValue":a[1]||(a[1]=o=>l.main_category=o),options:V(C),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",le,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),h(r,{modelValue:l.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=o=>l.filter_category_id=o),options:V(w),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),a[9]||(a[9]=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e("div",se,[e("table",re,[a[11]||(a[11]=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1)),e("tbody",ie,[h(V(K),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o),animation:200,onStart:L,onEnd:E},{default:R(()=>[(g(!0),_(z,null,A(c.value,o=>(g(),_("tr",{key:l.id,role:"row",class:""},[a[10]||(a[10]=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1)),e("td",ne,J(o.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])])}}};export{Pe as default};
