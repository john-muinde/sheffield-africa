import{_ as j,a0 as A,a3 as G,x as l,Q as N,y as Q,z as M,a4 as Z,f as J,a5 as K,o as n,c,a,i as _,l as d,m as p,F as V,g as L,n as w,t as v,p as O,a2 as U,e as W,Z as X,$ as Y}from"./app-setting.366f23a7.js";import"./_commonjsHelpers.f037b798.js";const i=h=>(X("data-v-6144b4bb"),h=h(),Y(),h),ee={class:"main"},ae={class:"page-content"},te={class:"container"},se={class:"row"},oe={class:"col-lg-10 offset-lg-1"},le=i(()=>a("h2",{class:"about-us-title"},"Blogs",-1)),ne=i(()=>a("i",{class:"icon-long-arrow-left"},null,-1)),ie=i(()=>a("span",null,"Back to Media Center",-1)),re=i(()=>a("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),ce={key:0,class:"text-center w-100 my-4 text-green-600 font-semibold"},de=i(()=>a("i",{class:"fas fa-spinner fa-spin"},null,-1)),ge={key:1,class:"row blogs-main-page-section"},ue={class:"entry entry-grid"},_e={class:"entry-media entry-gallery"},pe=["src"],me={class:"entry-body"},he={class:"entry-title"},ve={class:"entry-content"},fe={class:"mb-2"},be=i(()=>a("i",{class:"icon-long-arrow-right"},null,-1)),ye={class:"row"},xe={class:"col-md-12"},Pe={"aria-label":"Page navigation"},ke={class:"pagination justify-content-center"},we=i(()=>a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1)),Be={class:"page-item-total"},Ce=i(()=>a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)),Ie={__name:"Blogs",setup(h){A({title:"Sheffield Green Solutions | Blog Posts",meta:[{name:"description",content:"Blog"},{name:"keywords",content:"Blog"}]});const g=G(),o=l(g.params.page?parseInt(g.params.page):1),B=l(9),C=l(0),f=l([]),b=l(g.params.id?parseInt(g.params.id):1),S=l([]),y=l(!1),x=async()=>{y.value=!0;try{const e=await axios.get("/api/get-blogs",{params:{page:o.value,per_page:B.value,category_id:b.value}});f.value=e.data.data,C.value=e.data.total}catch(e){console.error(e)}finally{y.value=!1}},T=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},P=(e,u)=>{let s=u.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/blogs/${e}/${s}`},k=e=>`/media/blogs/page/${e}`,m=N(()=>Math.ceil(C.value/B.value)),I=l([]),$=()=>{o.value>1&&o.value--},D=()=>{o.value<m.value&&o.value++},z=e=>{o.value=e},E=()=>{I.value=f.value},F=e=>Number.isInteger(e),q=N(()=>{const e=[];o.value>1&&e.push("Prev");let s=Math.max(1,o.value-Math.floor(5/2)),r=Math.min(s+5-1,m.value);r-s<5-1&&(s=Math.max(1,r-5+1));for(let t=s;t<=r;t++)e.push(t);return o.value<m.value&&e.push("Next"),e}),H=e=>{const u=document.createElement("div");u.innerHTML=e;const s=u.querySelectorAll("p");for(const r of s){const t=r.textContent.trim();if(t.length>50)return t.length>140?t.slice(0,144)+"...":t}return""},R=e=>e.length>5?e.length>35?e.slice(0,35)+"...":e:"";return Q(()=>{x(),T()}),M(o,x),M(f,E),Z(()=>{const e=g.params;g.query,e.id!==""&&b!==e.id&&(o.value=1,b.value=e.id?parseInt(e.id):1,e.page!==""&&o!==e.page&&(o.value=e.page?parseInt(e.page):1),x())}),(e,u)=>{const s=J("router-link"),r=K("lazy");return n(),c("div",null,[a("main",ee,[a("div",ae,[a("div",te,[a("div",se,[a("div",oe,[le,_(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:d(()=>[ne,ie]),_:1}),re,y.value?(n(),c("div",ce,[de,p(" Loading blog posts... ")])):(n(),c("div",ge,[(n(!0),c(V,null,L(I.value,t=>(n(),c("div",{class:"entry-item col-sm-6 col-lg-4",key:t.id},[a("article",ue,[a("figure",_e,[_(s,{to:P(t.id,t.name)},{default:d(()=>[O(a("img",{src:"/storage/"+t.main_image_path,alt:"image desc"},null,8,pe),[[r,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"])]),a("div",me,[a("h2",he,[_(s,{class:"text-primary",to:P(t.id,t.name)},{default:d(()=>[p(v(R(t.name)),1)]),_:2},1032,["to"])]),a("div",ve,[a("div",fe,v(H(t.excerpt)),1),_(s,{class:"btn btn-primary",to:P(t.id,t.name)},{default:d(()=>[p(" Read More "),be]),_:2},1032,["to"])])])])]))),128))])),a("div",ye,[a("div",xe,[a("nav",Pe,[a("ul",ke,[a("li",{class:w(["page-item",{disabled:o.value===1}])},[_(s,{class:"page-link page-link-prev",to:k(o.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:$},{default:d(()=>[we,p(" Prev ")]),_:1},8,["to"])],2),(n(!0),c(V,null,L(q.value,t=>(n(),c("li",{class:w(["page-item",{active:t===o.value}]),key:t},[F(t)?(n(),U(s,{key:0,class:"page-link",to:k(t),onClick:Ne=>z(t)},{default:d(()=>[p(v(t),1)]),_:2},1032,["to","onClick"])):W("",!0)],2))),128)),a("li",Be," of "+v(m.value),1),a("li",{class:w(["page-item",{disabled:o.value===m.value}])},[_(s,{class:"page-link page-link-next",to:k(o.value+1),"aria-label":"Next",onClick:D},{default:d(()=>[p(" Next "),Ce]),_:1},8,["to"])],2)])])])])])])])])])])}}},Le=j(Ie,[["__scopeId","data-v-6144b4bb"]]);export{Le as default};
