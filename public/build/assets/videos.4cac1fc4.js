import{s as u,a8 as v,a9 as _,ag as i}from"./app-setting.32868441.js";function C(){const p=u([]),f=u([]),h=u({name:"",parent_id:"",description:"",is_published:""}),d=v(),r=u({}),a=u(!1),l=_("$swal"),m=async(e=1,n="",s="",c="",t="",o="created_at",g="desc")=>{i.get("/api/videos?page="+e+"&search_id="+n+"&search_title="+s+"&search_parent_id="+c+"&search_global="+t+"&order_column="+o+"&order_direction="+g).then(y=>{p.value=y.data})};return{videoList:f,videos:p,video:h,getVideos:m,getVideoList:async()=>{i.get("/api/video-list").then(e=>{f.value=e.data.data})},getVideo:async e=>{i.get("/api/videos/"+e).then(n=>{h.value=n.data.data})},storeVideo:async(e,n)=>{if(a.value)return;a.value=!0,r.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&e.hasOwnProperty(t)&&s.append(t,e[t]);const c={headers:{"content-type":"multipart/form-data"}};i.post("/api/videos",s,c).then(t=>{d.push({name:"videos.create"}),e.name=null,e.content=null,e.type=null,e.is_published=null,e.is_published=null,e.shown_in_about_us=null,l({icon:"success",title:"Video saved successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(r.value=t.response.data.errors)}).finally(()=>a.value=!1)},updateVideo:async(e,n)=>{if(a.value)return;a.value=!0,r.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&e.hasOwnProperty(t)&&s.append(t,e[t]);const c={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put"),console.log(s),await i.post("/api/videos/"+e.id,s,c).then(t=>{d.push({name:"videos.index"}),l({icon:"success",title:"Video updated successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(r.value=t.response.data.errors)}).finally(()=>a.value=!1)},deleteVideo:async e=>{l({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(n=>{n.isConfirmed&&i.delete("/api/videos/"+e).then(s=>{m(),d.push({name:"videos.index"}),l({icon:"success",title:"Video deleted successfully"})}).catch(s=>{l({icon:"error",title:"Something went wrong"})})})},validationErrors:r,isLoading:a}}export{C as u};
