import{a as P,v as e}from"./index-cf71ea16.js";import{C as v}from"./ContentState-53e4c52a.js";import"./use-meta-abe0c1f5.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-23102255.js";import"./transition-bac3b39c.js";const C={class:"main"},I={class:"page-content"},T={class:"container"},M={class:"row"},S={class:"col-lg-10 offset-lg-1 in-the-news-section"},L={key:3,class:"row justify-content-left"},j={class:"p-6 border rounded"},z={class:"position-relative mb-2",style:{height:"216px"}},D=["href"],A=["src","alt"],F=["href"],R={class:"col-lg-12 blogs mt-3"},$={"aria-label":"Page navigation"},q={class:"pagination justify-content-center"},O={class:"page-item-total"},W={__name:"Media_In_The_News",setup(G){const s=P(),a=e.ref(s.params.page?parseInt(s.params.page):1),_=e.ref(12),h=e.ref(0),u=e.ref([]),m=e.ref(s.params.id?parseInt(s.params.id):1),f=e.ref([]),r=e.ref(!1),N=e.ref(null),p=async()=>{r.value=!0;try{const t=await axios.get("/api/get-in-the-news",{params:{page:a.value,per_page:_.value,category_id:m.value}});u.value=t.data.data,h.value=t.data.total,r.value=!1}catch(t){r.value=!1,t.value=t,console.error(t)}},k=async()=>{try{const t=await axios.get("/api/get-blog-sidebar",{});f.value=t.data.other_blogs}catch(t){console.error(t)}},g=t=>`/media/in-the-news/page/${t}`,c=e.computed(()=>Math.ceil(h.value/_.value)),i=e.ref([]),V=()=>{a.value>1&&a.value--},b=()=>{a.value<c.value&&a.value++},y=t=>{a.value=t},E=()=>{i.value=u.value},x=t=>Number.isInteger(t),w=e.computed(()=>{const t=[];a.value>1&&t.push("Prev");let n=Math.max(1,a.value-Math.floor(5/2)),o=Math.min(n+5-1,c.value);o-n<5-1&&(n=Math.max(1,o-5+1));for(let d=n;d<=o;d++)t.push(d);return a.value<c.value&&t.push("Next"),t});return e.onMounted(()=>{p(),k()}),e.watch(a,p),e.watch(u,E),e.watchEffect(()=>{const t=s.params;s.query,t.id!==""&&m.value!==t.id&&(a.value=1,m.value=t.id?parseInt(t.id):1,t.page!==""&&a.value!==t.page&&(a.value=t.page?parseInt(t.page):1),p())}),(t,l)=>{const n=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("main",C,[e.createElementVNode("div",I,[e.createElementVNode("div",T,[e.createElementVNode("div",M,[e.createElementVNode("div",S,[l[4]||(l[4]=e.createElementVNode("h2",{class:"about-us-title"}," In the News ",-1)),e.createVNode(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:e.withCtx(()=>l[0]||(l[0]=[e.createElementVNode("i",{class:"icon-long-arrow-left"},null,-1),e.createElementVNode("span",null,"Back to Media Center",-1)])),_:1}),l[5]||(l[5]=e.createElementVNode("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),r.value?(e.openBlock(),e.createBlock(v,{key:0,type:"loading","content-type":"Articles In The News"})):e.createCommentVNode("",!0),!i.value.length&&!r.value?(e.openBlock(),e.createBlock(v,{key:1,type:"empty","content-type":"Our articles In The News"})):e.createCommentVNode("",!0),N.value?(e.openBlock(),e.createBlock(v,{key:2,type:"error","content-type":"Articles In The News"})):e.createCommentVNode("",!0),i.value.length?(e.openBlock(),e.createElementBlock("div",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"col-12 col-md-6 col-lg-4 mb-2 blog-item"},[e.createElementVNode("div",j,[e.createElementVNode("div",z,[e.createElementVNode("a",{target:"_blank",class:"float-center",href:o.url},[e.createElementVNode("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:"/storage/"+o.main_image_path,alt:o.name},null,8,A)],8,D)]),e.createElementVNode("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:o.url},l[1]||(l[1]=[e.createTextVNode(" Read More "),e.createElementVNode("i",{class:"icon-long-arrow-right"},null,-1)]),8,F)])]))),128)),e.createElementVNode("div",R,[e.createElementVNode("nav",$,[e.createElementVNode("ul",q,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:a.value===1}])},[e.createVNode(n,{class:"page-link page-link-prev",to:g(a.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:V},{default:e.withCtx(()=>l[2]||(l[2]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,o=>(e.openBlock(),e.createElementBlock("li",{key:o,class:e.normalizeClass(["page-item",{active:o===a.value}])},[x(o)?(e.openBlock(),e.createBlock(n,{key:0,class:"page-link",to:g(o),onClick:d=>y(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",O," of "+e.toDisplayString(c.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:a.value===c.value}])},[e.createVNode(n,{class:"page-link page-link-next",to:g(a.value+1),"aria-label":"Next",onClick:b},{default:e.withCtx(()=>l[3]||(l[3]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):e.createCommentVNode("",!0)])])])])])])}}},Y=B(W,[["__scopeId","data-v-15ee8db1"]]);export{Y as default};
