import{a as L,v as e}from"./index-6713a4f9.js";import{b as M}from"./use-meta-850c24c4.js";import A from"./ProductCard-11751cfd.js";import"./_commonjsHelpers-23102255.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"main"},$={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},O={class:"container d-flex align-items-center"},I={class:"breadcrumb"},z={class:"breadcrumb-item"},q={class:"breadcrumb-item"},Z={class:"breadcrumb-item active","aria-current":"page"},j={class:"page-content"},H={class:"container"},R={class:"row"},U={class:"col-lg-10"},G={class:"toolbox"},J={class:"toolbox-left"},K={class:"toolbox-info"},Q={class:"toolbox-right"},W={class:"toolbox-sort"},X={class:"select-custom"},Y={class:"products mb-3 products-section"},ee={class:"row"},te={"aria-label":"Page navigation"},oe={class:"pagination justify-content-center"},ae={class:"page-item-total"},le={class:"col-lg-2 order-lg-first"},se={class:"sidebar sidebar-shop sidebar-shop-category"},ne={key:0,class:"widget widget-collapsible"},re={id:"widget-1",class:"show"},ce={class:"widget-body"},ie={class:"filter-items filter-items-count"},de={class:"custom-control custom-checkbox"},ue=["id","value","onChange"],me=["for"],pe={class:"item-count"},ve={class:"widget widget-collapsible"},ge={id:"widget-4",class:"show"},_e={class:"widget-body"},he={class:"filter-items"},Ne={class:"custom-control custom-checkbox"},Ve=["id","value","onChange"],fe=["for"],we={__name:"ProductCategoryPromotional",setup(be){const d=L(),s=e.ref(d.params.page?parseInt(d.params.page):1),V=e.ref(12),v=e.ref(0),g=e.ref([]),f=e.ref(0),r=e.ref(d.params.id?parseInt(d.params.id):1),_=e.ref([]),b=e.ref([]),n=e.ref([]),c=e.ref([]),i=e.ref([]),p=e.ref(""),h=async()=>{try{const a={[r.value]:c.value[r.value]||[]};c.value=a;const t={[r.value]:i.value[r.value]||[]};i.value=t;const l=await axios.get("/api/get-products",{params:{page:s.value,per_page:V.value,category_id:r.value,checkedCategories:c.value,checkedBrands:i.value,selectedSortOption:p.value}});g.value=l.data.products.data,v.value=l.data.products.total,f.value=l.data.products.per_page,_.value=l.data.categories,b.value=l.data.brands,n.value=l.data.the_category}catch(a){console.error(a)}};function x(a){let t=n.value.id;t in c.value||(c.value[t]=[]);const l=c.value[t];l.includes(a)?l.splice(l.indexOf(a),1):l.push(a)}function y(a){let t=n.value.id;t in i.value||(i.value[t]=[]);const l=i.value[t];l.includes(a)?l.splice(l.indexOf(a),1):l.push(a)}function C(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),c.value=[],i.value=[],p.value=null}const m=e.computed(()=>Math.ceil(v.value/V.value)),E=e.ref([]),w=()=>{s.value>1&&s.value--},P=()=>{s.value<m.value&&s.value++},B=a=>{s.value=a},N=(a,t,l)=>{if(t===void 0)return"/promotional-solutions";{let o=t.replace(/ /g,"-").replace(/\//g,"-");return o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase(),`/promotional-solutions/${a}/${o}/page/${l}`}},S=()=>{E.value=g.value},D=a=>Number.isInteger(a),T=e.computed(()=>{const a=[];s.value>1&&a.push("Prev");let l=Math.max(1,s.value-Math.floor(5/2)),o=Math.min(l+5-1,m.value);o-l<5-1&&(l=Math.max(1,o-5+1));for(let u=l;u<=o;u++)a.push(u);return s.value<m.value&&a.push("Next"),a});e.onMounted(()=>{h()}),e.watch(s,h),e.watch(g,S),e.watchEffect(()=>{const a=d.params;d.query,a.id!==""&&r.value!==a.id&&(s.value=1,r.value=a.id?parseInt(a.id):1,a.page!==""&&s.value!==a.page&&(s.value=a.page?parseInt(a.page):1),h())});const k=e.ref("");return e.watch(()=>n.value.name,(a,t)=>{a!==t&&(k.value=a)}),M({title:k.value+"All you can get Promotions"}),(a,t)=>{const l=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("main",F,[e.createElementVNode("nav",$,[e.createElementVNode("div",O,[e.createElementVNode("ol",I,[e.createElementVNode("li",z,[e.createVNode(l,{to:"/"},{default:e.withCtx(()=>t[1]||(t[1]=[e.createTextVNode(" HOME ")])),_:1})]),e.createElementVNode("li",q,[e.createVNode(l,{to:"/promotional-solutions"},{default:e.withCtx(()=>t[2]||(t[2]=[e.createTextVNode(" All Promotions ")])),_:1})]),e.createElementVNode("li",Z,e.toDisplayString(n.value.name),1)])])]),e.createElementVNode("div",j,[e.createElementVNode("div",H,[e.createElementVNode("div",R,[e.createElementVNode("div",U,[e.createElementVNode("div",G,[e.createElementVNode("div",J,[e.createElementVNode("div",K,[t[3]||(t[3]=e.createTextVNode(" Showing ")),e.createElementVNode("span",null,e.toDisplayString(f.value)+" of "+e.toDisplayString(v.value),1),t[4]||(t[4]=e.createTextVNode(" Products "))])]),e.createElementVNode("div",Q,[e.createElementVNode("div",W,[t[6]||(t[6]=e.createElementVNode("label",{for:"sortby"},"Sort by:",-1)),e.createElementVNode("div",X,[e.withDirectives(e.createElementVNode("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),name:"sortby",class:"form-control"},t[5]||(t[5]=[e.createStaticVNode('<option value=""> Default </option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[e.vModelSelect,p.value]])])])])]),e.createElementVNode("div",Y,[e.createElementVNode("div",ee,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e.createVNode(A,{product:o},null,8,["product"])]))),128))])]),e.createElementVNode("nav",te,[e.createElementVNode("ul",oe,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===1}])},[e.createVNode(l,{class:"page-link page-link-prev",to:N(n.value.id,n.value.name,s.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:w},{default:e.withCtx(()=>t[7]||(t[7]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.value,o=>(e.openBlock(),e.createElementBlock("li",{key:o,class:e.normalizeClass(["page-item",{active:o===s.value}])},[D(o)?(e.openBlock(),e.createBlock(l,{key:0,class:"page-link",to:N(n.value.id,n.value.name,o),onClick:u=>B(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",ae," of "+e.toDisplayString(m.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===m.value}])},[e.createVNode(l,{class:"page-link page-link-next",to:N(n.value.id,n.value.name,s.value+1),"aria-label":"Next",onClick:P},{default:e.withCtx(()=>t[8]||(t[8]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e.createElementVNode("aside",le,[e.createElementVNode("div",se,[e.createElementVNode("div",{class:"widget widget-clean"},[t[9]||(t[9]=e.createElementVNode("label",null,"Filters:",-1)),e.createElementVNode("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:C}," Clean All ")]),_.value.length?(e.openBlock(),e.createElementBlock("div",ne,[t[10]||(t[10]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e.createElementVNode("div",re,[e.createElementVNode("div",ce,[e.createElementVNode("div",ie,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"filter-item"},[e.createElementVNode("div",de,[e.createElementVNode("input",{id:"cat-"+o.id,type:"checkbox",class:"custom-control-input",value:o.id,onChange:u=>x(o.id)},null,40,ue),e.createElementVNode("label",{class:"custom-control-label",for:"cat-"+o.id},e.toDisplayString(o.name),9,me)]),e.createElementVNode("span",pe,e.toDisplayString(o.category_products_count),1)]))),128))])])])])):e.createCommentVNode("",!0),e.createElementVNode("div",ve,[t[11]||(t[11]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e.createElementVNode("div",ge,[e.createElementVNode("div",_e,[e.createElementVNode("div",he,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"filter-item"},[e.createElementVNode("div",Ne,[e.createElementVNode("input",{id:"brand-"+o.product_brand.id,type:"checkbox",class:"custom-control-input",value:o.product_brand.id,onChange:u=>y(o.product_brand.id)},null,40,Ve),e.createElementVNode("label",{class:"custom-control-label",for:"brand-"+o.product_brand.id},e.toDisplayString(o.product_brand.name),9,fe)])]))),128))])])])])])])])])])])}}};export{we as default};
