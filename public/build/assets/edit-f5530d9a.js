import{a as N,r as T,bT as j,o as G,aa as w,bB as o,bC as n,bS as Z,bD as e,aQ as A,$ as Q,Q as _,bW as W,bI as d,ah as l,a7 as v,bL as g,e as b,ab as x,ca as X,Z as $,bH as z}from"./index-a6927a74.js";import"./use-meta-c91e9d6d.js";import{u as H}from"./csrs-40e95fc3.js";import{d as E,u as J,a as u}from"./vee-validate-03980b9f.js";import{r as K,m as O}from"./rules-2d323bf3.js";/* empty css                                     */import{F as f}from"./file-upload-with-preview.esm-03fb8eae.js";import{q as y}from"./vue3-quill-eeaf4c9c.js";import"./_commonjsHelpers-de833af9.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"container"},ee={class:"container"},se={class:"row"},ie={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},ae={class:"statbox panel box box-shadow"},le={class:"panel-body"},te={class:"row"},oe={class:"form-group col-md-12"},ne={class:"text-danger mt-1"},re={class:"text-danger mt-1"},ue={class:"form-group"},de={class:"form-group"},me={class:"form-group"},ce={class:"custom-file-container","data-upload-id":"myFirstImage"},pe={class:"custom-file-container__custom-file",for:"main_image"},_e={class:"custom-file-container","data-upload-id":"myCsrGallery"},ve={class:"custom-file-container__custom-file",for:"csr_gallery"},ge={id:"csr_gallery",ref:"csr_gallery",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",multiple:""},be={class:"custom-file-container__image-preview"},fe=["onClick"],ye={class:"form-group col-md-4"},he={class:"text-danger mt-1"},Ie={class:"text-danger mt-1"},Ce=["disabled"],Se={class:""},we={key:0},xe={key:1},Ge={__name:"edit",setup(Ee){E("required",K),E("min",O);const k={name:"required|min:3",csr_introduction:"required",company_involvement:"required",collaborations_and_partnership:"required|min:3",is_published:"required"},{validate:F,errors:h,resetForm:ke}=J({validationSchema:k}),{csr:t,getCsr:R,updateCsr:I,validationErrors:C,isLoading:m,getCsrList:Fe,csrList:Re,deleteCsrImage:V}=H(),{value:q}=u("name",null,{initialValue:""}),{value:U}=u("csr_introduction",null,{initialValue:""}),{value:P}=u("company_involvement",null,{initialValue:""}),{value:L}=u("collaborations_and_partnership",null,{initialValue:""}),{value:M}=u("is_published",null,{initialValue:""}),i=N({name:q,csr_introduction:U,company_involvement:P,collaborations_and_partnership:L,is_published:M,main_image:"",csr_gallery:""}),c=T({modules:{}}),B=j();function D(){F().then(p=>{if(p.valid){const r=document.getElementById("csr_gallery").files;r.length>0?I(i,r):I(i,[])}})}return G(()=>{R(B.params.id),w(()=>{if(t.value&&t.value.main_image_path){const r={images:{baseImage:"/storage/"+t.value.main_image_path,backgroundImage:""}};new f("myFirstImage",r)}else new f("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new f("myCsrGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),w(()=>{i.id=t.value.id,i.name=t.value.name,i.csr_introduction=t.value.csr_introduction,i.company_involvement=t.value.company_involvement,i.collaborations_and_partnership=t.value.collaborations_and_partnership,i.is_published=t.value.is_published,i.csr_images=t.value.csr_images}),(p,s)=>{var r,S;return o(),n("div",Y,[(o(),Z(A,{to:"#breadcrumb"},[s[6]||(s[6]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"CSRs")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Edit CSR")])])])])])],-1))])),e("div",ee,[e("div",se,[e("div",ie,[e("div",ae,[s[21]||(s[21]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"Edit CSR")])])])],-1)),e("div",le,[e("form",{onSubmit:Q(D,["prevent"])},[e("div",te,[e("div",oe,[s[7]||(s[7]=e("label",{for:"post-name"},"CSR Name",-1)),_(e("input",{id:"post-name","onUpdate:modelValue":s[0]||(s[0]=a=>i.name=a),type:"text",class:"form-control",placeholder:"Enter CSR Name ..."},null,512),[[W,i.name]]),e("div",ne,d(l(h).name),1),e("div",re,[(o(!0),n(v,null,g((r=l(C))==null?void 0:r.name,a=>(o(),n("div",null,d(a),1))),256))])]),e("div",ue,[s[8]||(s[8]=e("label",{for:"csr_introduction"},"CSR Introduction",-1)),b(l(y),{id:"csr_introduction",value:i.csr_introduction,"onUpdate:value":s[1]||(s[1]=a=>i.csr_introduction=a),options:c.value,placeholder:"Enter Short Description ..."},null,8,["value","options"])]),e("div",de,[s[9]||(s[9]=e("label",{for:"post_description"},"Company company_involvement",-1)),b(l(y),{value:i.company_involvement,"onUpdate:value":s[2]||(s[2]=a=>i.company_involvement=a),options:c.value,placeholder:"Enter Description ..."},null,8,["value","options"])]),e("div",me,[s[10]||(s[10]=e("label",{for:"post_description"},"Collaborations and collaborations_and_partnerships",-1)),b(l(y),{value:i.collaborations_and_partnership,"onUpdate:value":s[3]||(s[3]=a=>i.collaborations_and_partnership=a),options:c.value,placeholder:"Enter Technical Specification ..."},null,8,["value","options"])]),e("div",ce,[s[13]||(s[13]=e("label",null,[x("Upload Main CSR Image "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e("label",pe,[e("input",{id:"main_image",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:s[4]||(s[4]=a=>i.main_image=a.target.files[0])},null,32),s[11]||(s[11]=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),s[12]||(s[12]=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),s[14]||(s[14]=e("div",{class:"custom-file-container__image-preview"},null,-1))]),e("div",_e,[s[18]||(s[18]=e("label",null,[x("CSR Gallery (multiple images allowed) "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e("label",ve,[e("input",ge,null,512),s[15]||(s[15]=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),s[16]||(s[16]=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),e("div",be,[(o(!0),n(v,null,g(i.csr_images,a=>(o(),n("div",{key:a.id,class:"custom-file-container__image-multi-preview",style:z("background-image: url(/storage/"+a.name+")")},[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:Ve=>l(V)(a.id)},s[17]||(s[17]=[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"Ã—",-1)]),8,fe)],4))),128))])]),e("div",ye,[s[20]||(s[20]=e("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1)),e("div",null,[_(e("select",{id:"is_published","onUpdate:modelValue":s[5]||(s[5]=a=>i.is_published=a),class:"form-select"},s[19]||(s[19]=[e("option",{value:""}," Select Publishing Status ... ",-1),e("option",{selected:"",value:"1"}," Published ",-1),e("option",{value:"0"}," Not Published ",-1)]),512),[[X,i.is_published]])]),e("div",he,d(l(h).is_published),1),e("div",Ie,[(o(!0),n(v,null,g((S=l(C))==null?void 0:S.is_published,a=>(o(),n("div",null,d(a),1))),256))])])]),e("button",{disabled:l(m),class:"btn btn-primary mt-3"},[_(e("div",Se,null,512),[[$,l(m)]]),l(m)?(o(),n("span",we,"Processing...")):(o(),n("span",xe,"Update"))],8,Ce)],32)])])])])])])}}};export{Ge as default};
