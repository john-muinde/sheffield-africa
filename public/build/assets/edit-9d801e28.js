import{v as e,a as te}from"./index-516f1143.js";import"./use-meta-de5a1737.js";import{u as le}from"./products-28830ea2.js";import{u as oe}from"./categories-5c6da6cd.js";import{u as ne}from"./brands-fd93aa84.js";import{d as D,u as re,a as r}from"./vee-validate-5edd3903.js";import{r as ie,m as ae}from"./rules-2d323bf3.js";/* empty css                                     */import{F as c}from"./file-upload-with-preview.esm-03fb8eae.js";import{q as m}from"./vue3-quill-514218b1.js";import"./_commonjsHelpers-23102255.js";import"./index-2a9e1aab.js";import"./_plugin-vue_export-helper-c27b6911.js";const se={class:"container"},de={class:"container"},ce={class:"row"},me={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},ue={class:"statbox panel box box-shadow"},pe={class:"panel-body"},ge={class:"row"},ve={class:"form-group col-md-8"},Ee={class:"text-danger mt-1"},fe={class:"text-danger mt-1"},_e={class:"form-group col-md-4"},Ve={class:"text-danger mt-1"},Ne={class:"text-danger mt-1"},be={class:"form-group col-md-4"},he={class:"text-danger mt-1"},ke={class:"text-danger mt-1"},ye={class:"form-group col-md-4"},Be={class:"text-danger mt-1"},xe={class:"text-danger mt-1"},we={class:"form-group col-md-4"},De={class:"text-danger mt-1"},Se={class:"text-danger mt-1"},Pe={class:"form-group col-md-4"},Ie={class:"text-danger mt-1"},Fe={class:"text-danger mt-1"},Ue={class:"form-group col-md-4"},Le={class:"text-danger mt-1"},Me={class:"text-danger mt-1"},Te={class:"form-group col-md-4"},qe={class:"text-danger mt-1"},Ce={class:"text-danger mt-1"},je={class:"form-group"},Ke={class:"text-danger mt-1"},We={class:"text-danger mt-1"},Ge={class:"form-group col-md-4"},Re={class:"text-danger mt-1"},Ae={class:"text-danger mt-1"},Xe={class:"form-group col-md-4"},Ze={class:"text-danger mt-1"},He={class:"text-danger mt-1"},Oe={class:"form-group col-md-4"},Qe={class:"text-danger mt-1"},ze={class:"text-danger mt-1"},$e={class:"form-group"},Je={class:"form-group"},Ye={class:"form-group"},et={class:"form-group"},tt={class:"custom-file-container","data-upload-id":"myFirstImage"},lt={class:"custom-file-container__custom-file",for:"main_image"},ot={class:"custom-file-container","data-upload-id":"myProductGallery"},nt={class:"custom-file-container__custom-file",for:"product_gallery"},rt={id:"product_gallery",ref:"product_gallery",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",multiple:""},it={class:"custom-file-container__image-preview"},at=["onClick"],st={class:"custom-file-container","data-upload-id":"myDocument"},dt={class:"custom-file-container__custom-file",for:"document"},ct={class:"form-group col-md-4"},mt={class:"text-danger mt-1"},ut={class:"text-danger mt-1"},pt=["disabled"],gt={class:""},vt={key:0},Et={key:1},Mt={__name:"edit",setup(ft){D("required",ie),D("min",ae);const S={name:"required|min:3",brand:"required",short_description:"required",description:"required|min:3",is_published:"required"},{validate:P,errors:i,resetForm:_t}=re({validationSchema:S}),{product:n,getProduct:I,updateProduct:g,validationErrors:a,isLoading:u,getProductList:Vt,productList:Nt,deleteProductImage:F}=le(),{getCategoryList:U,categoryList:L}=oe(),{getBrandList:M,brandList:T}=ne(),{value:q}=r("name",null,{initialValue:""}),{value:C}=r("brand",null,{initialValue:n.value.product_brand}),{value:j}=r("model_number",null,{initialValue:""}),{value:K}=r("sku",null,{initialValue:""}),{value:W}=r("quantity",null,{initialValue:""}),{value:G}=r("cost_price",null,{initialValue:""}),{value:R}=r("retail_price",null,{initialValue:""}),{value:A}=r("weight",null,{initialValue:""}),{value:X}=r("length",null,{initialValue:""}),{value:Z}=r("width",null,{initialValue:""}),{value:H}=r("height",null,{initialValue:""}),{value:O}=r("short_description",null,{initialValue:""}),{value:Q}=r("description",null,{initialValue:""}),{value:z}=r("technical_specification",null,{initialValue:""}),{value:$}=r("terms_of_operation",null,{initialValue:""}),{value:J}=r("is_published",null,{initialValue:""}),o=e.reactive({name:q,brand:C,model_number:j,sku:K,quantity:W,cost_price:G,retail_price:R,weight:A,categories:"",length:X,width:Z,height:H,short_description:O,description:Q,technical_specification:z,terms_of_operation:$,is_published:J,main_image:"",product_gallery:"",document:""}),d=e.ref({modules:{}}),Y=te();function ee(){P().then(p=>{if(p.valid){o.brand&&o.brand.id?o.brand=o.brand.id:o.brand=null;const s=document.getElementById("product_gallery").files;s.length>0?g(o,s):g(o,[])}})}return e.onMounted(()=>{U(),M(),I(Y.params.id),e.watchEffect(()=>{if(n.value&&n.value.main_image_path){const s={images:{baseImage:"/storage/"+n.value.main_image_path,backgroundImage:""}};new c("myFirstImage",s)}else new c("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new c("myDocument",{images:{baseImage:"/assets/images/file-preview-pdf.png",backgroundImage:""}}),new c("myProductGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),e.watchEffect(()=>{o.id=n.value.id,o.name=n.value.name,o.brand=n.value.product_brand,o.model_number=n.value.model_number,o.sku=n.value.sku,o.quantity=n.value.quantity,o.cost_price=n.value.cost_price,o.retail_price=n.value.retail_price,o.weight=n.value.weight,o.categories=n.value.categories_json,o.length=n.value.length,o.width=n.value.width,o.height=n.value.height,o.short_description=n.value.short_description,o.description=n.value.description,o.technical_specification=n.value.technical_specification,o.terms_of_operation=n.value.terms_of_operation,o.is_published=n.value.is_published,o.product_images=n.value.product_images}),(p,t)=>{var v,E,f,_,V,N,b,h,k,y,B,x,w;const s=e.resolveComponent("multiselect");return e.openBlock(),e.createElementBlock("div",se,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[19]||(t[19]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Products")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"Edit Product")])])])])])],-1))])),e.createElementVNode("div",de,[e.createElementVNode("div",ce,[e.createElementVNode("div",me,[e.createElementVNode("div",ue,[t[53]||(t[53]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null,"Edit Product")])])])],-1)),e.createElementVNode("div",pe,[e.createElementVNode("form",{onSubmit:e.withModifiers(ee,["prevent"])},[e.createElementVNode("div",ge,[e.createElementVNode("div",ve,[t[20]||(t[20]=e.createElementVNode("label",{for:"post-name"},"Product Name",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[0]||(t[0]=l=>o.name=l),type:"text",class:"form-control",placeholder:"Enter Product Name ..."},null,512),[[e.vModelText,o.name]]),e.createElementVNode("div",Ee,e.toDisplayString(e.unref(i).name),1),e.createElementVNode("div",fe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((v=e.unref(a))==null?void 0:v.name,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",_e,[t[21]||(t[21]=e.createElementVNode("label",{for:"post-name"},"Make",-1)),e.createVNode(s,{modelValue:o.brand,"onUpdate:modelValue":t[1]||(t[1]=l=>o.brand=l),options:e.unref(T),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Brand ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"]),e.createElementVNode("div",Ve,e.toDisplayString(e.unref(i).brand),1),e.createElementVNode("div",Ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((E=e.unref(a))==null?void 0:E.brand,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",be,[t[22]||(t[22]=e.createElementVNode("label",{for:"post-name"},"Model Number",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-brand","onUpdate:modelValue":t[2]||(t[2]=l=>o.model_number=l),type:"text",class:"form-control",placeholder:"Enter Model Number ..."},null,512),[[e.vModelText,o.model_number]]),e.createElementVNode("div",he,e.toDisplayString(e.unref(i).model_number),1),e.createElementVNode("div",ke,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((f=e.unref(a))==null?void 0:f.model_number,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",ye,[t[23]||(t[23]=e.createElementVNode("label",{for:"post-name"},"SKU",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-sku","onUpdate:modelValue":t[3]||(t[3]=l=>o.sku=l),type:"text",class:"form-control",placeholder:"Enter SKU ..."},null,512),[[e.vModelText,o.sku]]),e.createElementVNode("div",Be,e.toDisplayString(e.unref(i).sku),1),e.createElementVNode("div",xe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((_=e.unref(a))==null?void 0:_.sku,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",we,[t[24]||(t[24]=e.createElementVNode("label",{for:"post-name"},"Quantity",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-quantity","onUpdate:modelValue":t[4]||(t[4]=l=>o.quantity=l),type:"text",class:"form-control",placeholder:"Enter Quantity ..."},null,512),[[e.vModelText,o.quantity]]),e.createElementVNode("div",De,e.toDisplayString(e.unref(i).quantity),1),e.createElementVNode("div",Se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((V=e.unref(a))==null?void 0:V.quantity,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",Pe,[t[25]||(t[25]=e.createElementVNode("label",{for:"post-name"},"Cost Price (USD KES ?)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-cost_price","onUpdate:modelValue":t[5]||(t[5]=l=>o.cost_price=l),type:"text",class:"form-control",placeholder:"Enter Cost Price ..."},null,512),[[e.vModelText,o.cost_price]]),e.createElementVNode("div",Ie,e.toDisplayString(e.unref(i).cost_price),1),e.createElementVNode("div",Fe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((N=e.unref(a))==null?void 0:N.cost_price,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",Ue,[t[26]||(t[26]=e.createElementVNode("label",{for:"post-name"},"Retail Price (USD KES ?)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-retail_price","onUpdate:modelValue":t[6]||(t[6]=l=>o.retail_price=l),type:"text",class:"form-control",placeholder:"Enter Retail Price ..."},null,512),[[e.vModelText,o.retail_price]]),e.createElementVNode("div",Le,e.toDisplayString(e.unref(i).retail_price),1),e.createElementVNode("div",Me,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((b=e.unref(a))==null?void 0:b.retail_price,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",Te,[t[27]||(t[27]=e.createElementVNode("label",{for:"post-name"},"Weight (KGs)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-weight","onUpdate:modelValue":t[7]||(t[7]=l=>o.weight=l),type:"text",class:"form-control",placeholder:"Enter Weight ..."},null,512),[[e.vModelText,o.weight]]),e.createElementVNode("div",qe,e.toDisplayString(e.unref(i).weight),1),e.createElementVNode("div",Ce,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((h=e.unref(a))==null?void 0:h.weight,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",je,[t[28]||(t[28]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Select Product Category",-1)),e.createVNode(s,{modelValue:o.categories,"onUpdate:modelValue":t[8]||(t[8]=l=>o.categories=l),options:e.unref(L),reduce:l=>l.id,multiple:!0,taggable:!0,searchable:!0,"preselect-first":!0,"track-by":"id",label:"parent_name_with_dashes",placeholder:"Choose Product Category ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"]),e.createElementVNode("div",Ke,e.toDisplayString(e.unref(i).categories),1),e.createElementVNode("div",We,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((k=e.unref(a))==null?void 0:k.categories,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),t[51]||(t[51]=e.createElementVNode("h4",null,"Dimensions",-1)),t[52]||(t[52]=e.createElementVNode("hr",{class:"bg-dark"},null,-1)),e.createElementVNode("div",Ge,[t[29]||(t[29]=e.createElementVNode("label",{for:"post-name"},"Length (mm)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-length","onUpdate:modelValue":t[9]||(t[9]=l=>o.length=l),type:"text",class:"form-control",placeholder:"Enter Length (mm) ..."},null,512),[[e.vModelText,o.length]]),e.createElementVNode("div",Re,e.toDisplayString(e.unref(i).length),1),e.createElementVNode("div",Ae,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((y=e.unref(a))==null?void 0:y.length,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",Xe,[t[30]||(t[30]=e.createElementVNode("label",{for:"post-name"},"Height (mm)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-height","onUpdate:modelValue":t[10]||(t[10]=l=>o.height=l),type:"text",class:"form-control",placeholder:"Enter Height (mm) ..."},null,512),[[e.vModelText,o.height]]),e.createElementVNode("div",Ze,e.toDisplayString(e.unref(i).height),1),e.createElementVNode("div",He,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((B=e.unref(a))==null?void 0:B.height,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",Oe,[t[31]||(t[31]=e.createElementVNode("label",{for:"post-name"},"Width (mm)",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-width","onUpdate:modelValue":t[11]||(t[11]=l=>o.width=l),type:"text",class:"form-control",placeholder:"Enter Width (mm) ..."},null,512),[[e.vModelText,o.width]]),e.createElementVNode("div",Qe,e.toDisplayString(e.unref(i).width),1),e.createElementVNode("div",ze,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((x=e.unref(a))==null?void 0:x.width,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])]),e.createElementVNode("div",$e,[t[32]||(t[32]=e.createElementVNode("label",{for:"short_description"},"Short Product Description",-1)),e.createVNode(e.unref(m),{id:"short_description",value:o.short_description,"onUpdate:value":t[12]||(t[12]=l=>o.short_description=l),options:d.value,placeholder:"Enter Short Description ..."},null,8,["value","options"])]),e.createElementVNode("div",Je,[t[33]||(t[33]=e.createElementVNode("label",{for:"post_description"},"Product Description",-1)),e.createVNode(e.unref(m),{value:o.description,"onUpdate:value":t[13]||(t[13]=l=>o.description=l),options:d.value,placeholder:"Enter Description ..."},null,8,["value","options"])]),e.createElementVNode("div",Ye,[t[34]||(t[34]=e.createElementVNode("label",{for:"post_description"},"Technical Specification",-1)),e.createVNode(e.unref(m),{value:o.technical_specification,"onUpdate:value":t[14]||(t[14]=l=>o.technical_specification=l),options:d.value,placeholder:"Enter Technical Specification ..."},null,8,["value","options"])]),e.createElementVNode("div",et,[t[35]||(t[35]=e.createElementVNode("label",{for:"post_description"},"Terms of Operation",-1)),e.createVNode(e.unref(m),{value:o.terms_of_operation,"onUpdate:value":t[15]||(t[15]=l=>o.terms_of_operation=l),options:d.value,placeholder:"Enter Terms of Operation ..."},null,8,["value","options"])]),e.createElementVNode("div",tt,[t[38]||(t[38]=e.createElementVNode("label",null,[e.createTextVNode("Upload Main Product Image "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",lt,[e.createElementVNode("input",{id:"main_image",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:t[16]||(t[16]=l=>o.main_image=l.target.files[0])},null,32),t[36]||(t[36]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[37]||(t[37]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),t[39]||(t[39]=e.createElementVNode("div",{class:"custom-file-container__image-preview"},null,-1))]),e.createElementVNode("div",ot,[t[43]||(t[43]=e.createElementVNode("label",null,[e.createTextVNode("Product Gallery (multiple images allowed) "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",nt,[e.createElementVNode("input",rt,null,512),t[40]||(t[40]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[41]||(t[41]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),e.createElementVNode("div",it,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.product_images,l=>(e.openBlock(),e.createElementBlock("div",{key:l.id,class:"custom-file-container__image-multi-preview",style:e.normalizeStyle("background-image: url(/storage/"+l.name+")")},[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:bt=>e.unref(F)(l.id)},t[42]||(t[42]=[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"×",-1)]),8,at)],4))),128))])]),e.createElementVNode("div",st,[t[46]||(t[46]=e.createElementVNode("label",null,[e.createTextVNode("Technical Specification Document "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),t[47]||(t[47]=e.createElementVNode("div",{class:"align-right"},[e.createElementVNode("a",{href:"",class:"btn btn-info pull-right"},"View Uploaded File"),e.createElementVNode("a",{href:"",class:"btn btn-primary pull-right"},"Delete Uploaded File")],-1)),e.createElementVNode("label",dt,[e.createElementVNode("input",{id:"document",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:".pdf,.doc,.docx",onChange:t[17]||(t[17]=l=>o.document=l.target.files[0])},null,32),t[44]||(t[44]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[45]||(t[45]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),t[48]||(t[48]=e.createElementVNode("div",{class:"custom-file-container__image-preview"},null,-1))]),e.createElementVNode("div",ct,[t[50]||(t[50]=e.createElementVNode("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1)),e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("select",{id:"is_published","onUpdate:modelValue":t[18]||(t[18]=l=>o.is_published=l),class:"form-select"},t[49]||(t[49]=[e.createElementVNode("option",{value:""}," Select Publishing Status ... ",-1),e.createElementVNode("option",{selected:"",value:"1"}," Published ",-1),e.createElementVNode("option",{value:"0"}," Not Published ",-1)]),512),[[e.vModelSelect,o.is_published]])]),e.createElementVNode("div",mt,e.toDisplayString(e.unref(i).is_published),1),e.createElementVNode("div",ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((w=e.unref(a))==null?void 0:w.is_published,l=>(e.openBlock(),e.createElementBlock("div",{key:l},e.toDisplayString(l),1))),128))])])]),e.createElementVNode("button",{disabled:e.unref(u),class:"btn btn-primary mt-3"},[e.withDirectives(e.createElementVNode("div",gt,null,512),[[e.vShow,e.unref(u)]]),e.unref(u)?(e.openBlock(),e.createElementBlock("span",vt,"Processing...")):(e.openBlock(),e.createElementBlock("span",Et,"Update"))],8,pt)],32)])])])])])])}}};export{Mt as default};
