import{r as n,c as E,w as S,bB as u,bC as p,bD as t,ab as R,bI as w,a7 as M,bL as I,bG as L,Q as A,c8 as G,bJ as g,bT as U,c6 as q,o as O,aa as J,bK as K,R as Q,e as P,bP as F,bS as N,bX as X,$ as H}from"./index-616505bb.js";import"./use-meta-2c1be1d3.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{C as T}from"./ContentState-eb0cb5ed.js";import"./_commonjsHelpers-de833af9.js";import"./transition-67ad3aaf.js";const W={key:0,class:"filter-container"},Y={class:"filter-heading"},Z=["value"],ee={class:"filter-content"},te={class:"checkbox-wrapper"},se={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"checkmark"},ae={class:"filter-label"},le={key:0,class:"filter-count"},re={__name:"DynamicFilters",props:{items:{type:Array,required:!0},filterColumn:{type:String,required:!0},filters:{type:Array,required:!1,default:()=>[]},selectedFilters:{type:Array,required:!1,default:()=>[]},showNumbers:{type:Boolean,default:!1},searchTerm:{type:String,default:""},classes:{type:String,default:""}},emits:["update:displayedProducts"],setup($,{emit:y}){const k=y,e=$,d=n(e.selectedFilters),C=n(e.showNumbers),_=n(e.items),v=n(e.searchTerm),m=n([]),h=n([]);e.filters.length>0&&(typeof e.filters[0]=="object"?(m.value=e.filters.map(s=>Object.keys(s)[0]),h.value=e.filters.map(s=>Object.values(s)[0])):(m.value=e.filters,h.value=e.filters)),E(()=>{var s,l,i;if(m.value.length)return m.value;if(!((s=e.items)!=null&&s.length)&&!((l=m.value)!=null&&l.length)&&!e.filterColumn)return[];if(!((i=e.items)!=null&&i.length)||!e.filterColumn)return[];m.value=[...new Set(e.items.map(f=>f[e.filterColumn]).filter(Boolean))].sort(),h.value=m.value});const D=s=>e.items.filter(l=>l[e.filterColumn]===s).length,b=s=>s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),x=()=>{d.value.length===0?_.value=e.items:_.value=e.items.filter(s=>d.value.includes(s[e.filterColumn])),v.value&&(_.value=_.value.filter(s=>{var l,i,f;return((l=s.name)==null?void 0:l.toLowerCase().includes(v.value.toLowerCase()))||((i=s.description)==null?void 0:i.toLowerCase().includes(v.value.toLowerCase()))||((f=s.tags)==null?void 0:f.toLowerCase().includes(v.value.toLowerCase()))||s[e.filterColumn].toLowerCase().includes(v.value.toLowerCase())})),k("update:displayedProducts",{filteredData:_.value,selectedFilters:d.value})};return S(()=>e.searchTerm,s=>{v.value=s,x()}),S(()=>e.items,s=>{if(_.value=s,d.value.length>0){const l=s.filter(i=>d.value.includes(i[e.filterColumn]));k("update:displayedProducts",{filteredData:l,selectedFilters:d.value})}else k("update:displayedProducts",{filteredData:s,selectedFilters:[]})},{deep:!0}),(s,l)=>m.value.length?(u(),p("div",W,[t("h4",Y,[l[1]||(l[1]=t("span",{class:"filter-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})])],-1)),R(" "+w(b($.filterColumn)),1)]),t("div",{class:L(["filter-options-container",e.classes])},[(u(!0),p(M,null,I(m.value,(i,f)=>(u(),p("label",{key:i,class:L(["filter-card",{"filter-card-selected":d.value.includes(i)}])},[A(t("input",{"onUpdate:modelValue":l[0]||(l[0]=B=>d.value=B),type:"checkbox",value:i,class:"filter-checkbox",onChange:x},null,40,Z),[[G,d.value]]),t("div",ee,[t("div",te,[t("div",{class:L(["custom-checkbox",{checked:d.value.includes(i)}])},[d.value.includes(i)?(u(),p("svg",se,l[2]||(l[2]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):g("",!0)],2),t("span",ae,w(h.value[f]),1)]),C.value?(u(),p("span",le,w(D(i)),1)):g("",!0)])],2))),128))],2)])):g("",!0)}},oe=j(re,[["__scopeId","data-v-ce636ef1"]]);const ne={class:"main"},ie={class:"page-content"},ce={class:"container"},ue={class:"row"},de={class:"col-lg-10 offset-lg-1 gallery-main-page-section"},pe={key:3,class:"row mt-2"},ve={class:"entry entry-mask"},me={class:"entry-media entry-gallery"},_e=["src"],fe={class:"entry-body"},ge={class:"entry-title"},ye={class:"entry-cats mt-1"},he={style:{"background-color":"#c02434",padding:"5px"}},be={class:"col-lg-12 mt-3"},Ce={"aria-label":"Page navigation"},we={class:"pagination justify-content-center"},ke=["onClick"],xe={__name:"Media_Gallery",setup($){const y=U(),k=q(),e=n(y.params.page?parseInt(y.params.page):1);n(12);const d=n(0),C=n([]),_=n(y.params.id?parseInt(y.params.id):1),v=n([]),m=n([]),h=n({}),D=n(["CSR","EVENT","PROJECT"]),b=n(!1),x=n(null),s=async(o=null)=>{b.value=!0,typeof o=="string"&&o.includes("http")&&(o=o.split("/api/").pop());try{const a=(await X.get(o||"/api/get-media-center-galleries",{params:{page:e.value,category_id:_.value,gallery_type:m.value}})).data;C.value=a.data,d.value=a.total,h.value={next_page_url:a.next_page_url,prev_page_url:a.prev_page_url,links:a.links},b.value=!1,f(C.value)}catch(r){r.value=r,console.error(r)}finally{b.value=!1}},l=(o,r)=>{let a=r.replace(/ /g,"-").replace(/\//g,"-");return a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase(),`/media/gallery/${o}/${a}`},i=o=>{if(o){const a=new URLSearchParams(o.split("?")[1]).get("page");a&&(e.value=parseInt(a),k.push(`/media/gallery/page/${e.value}`))}},f=o=>{v.value=o},B=({filteredData:o,selectedFilters:r})=>{f(o),r.value=r};return O(()=>{s()}),S(C,f),J(()=>{const o=y.params,r=o.id?parseInt(o.id):1,a=o.page?parseInt(o.page):1;(_.value!==r||e.value!==a)&&(_.value=r,e.value=a,s())}),(o,r)=>{var V;const a=K("router-link"),z=Q("lazy");return u(),p("div",null,[t("main",ne,[t("div",ie,[t("div",ce,[t("div",ue,[t("div",de,[r[2]||(r[2]=t("h2",{class:"about-us-title"}," Gallery ",-1)),P(a,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:F(()=>r[0]||(r[0]=[t("i",{class:"icon-long-arrow-left"},null,-1),t("span",null,"Back to Media Center",-1)])),_:1}),r[3]||(r[3]=t("p",{class:"lead about-us-lead text-primary mb-3"}," Journey Through the Lens: Our Story in Pictures ",-1)),P(oe,{items:C.value,"filter-column":"gallery_type",filters:D.value,"onUpdate:displayedProducts":B},null,8,["items","filters"]),b.value?(u(),N(T,{key:0,type:"loading","content-type":"gallery"})):g("",!0),!v.value.length&&!b.value?(u(),N(T,{key:1,type:"empty","content-type":"gallery"})):g("",!0),x.value?(u(),N(T,{key:2,type:"error","content-type":"gallery"})):g("",!0),v.value.length?(u(),p("div",pe,[(u(!0),p(M,null,I(v.value,c=>(u(),p("div",{key:c.id,class:"entry-item col-sm-6 col-lg-4"},[t("article",ve,[t("figure",me,[P(a,{to:l(c.id,c.name)},{default:F(()=>[A(t("img",{src:"/storage/"+c.main_image_path,alt:"image desc"},null,8,_e),[[z,"/storage/"+c.main_image_path,"src"]])]),_:2},1032,["to"])]),t("div",fe,[r[1]||(r[1]=t("div",{class:"entry-meta"},[t("span",{class:"meta-separator"},"|")],-1)),t("h2",ge,[P(a,{to:l(c.id,c.name)},{default:F(()=>[R(w(c.name),1)]),_:2},1032,["to"])]),t("div",ye,[t("b",he,w(c.gallery_type),1)])])])]))),128)),t("div",be,[t("nav",Ce,[t("ul",we,[(u(!0),p(M,null,I((V=h.value)==null?void 0:V.links,(c,Pe)=>(u(),p("li",{key:c.label,class:L(["page-item",{active:c.active}])},[c.url&&Number.isInteger(Number(c.label))?(u(),p("a",{key:0,class:"page-link",onClick:H(Le=>i(c.url),["prevent"])},w(c.label),9,ke)):g("",!0)],2))),128))])])])])):g("",!0)])])])])])])}}},Se=j(xe,[["__scopeId","data-v-d5c14c98"]]);export{Se as default};
