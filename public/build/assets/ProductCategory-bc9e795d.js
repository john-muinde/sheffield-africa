import{a as P,v as e}from"./index-0d6930bf.js";import{u as B}from"./use-meta-44934223.js";import"./_commonjsHelpers-23102255.js";const D={class:"main"},S={class:"page-content mt-4"},T={class:"container"},L={class:"row"},$={class:"col-lg-9"},I={class:"toolbox"},M={class:"toolbox-left"},z={class:"toolbox-info"},F={class:"products mb-3"},A={class:"row"},j={class:"product product-7 text-center"},q={class:"product-media"},R=["src"],Z={class:"product-action"},G=["onClick"],H={class:"product-body"},J={class:"product-cat"},K={class:"product-title"},O={"aria-label":"Page navigation"},Q={class:"pagination justify-content-center"},U={class:"page-item-total"},W={class:"col-lg-3 order-lg-first"},X={class:"sidebar sidebar-shop"},Y={key:0,class:"widget widget-collapsible"},ee={id:"widget-1",class:"show"},te={class:"widget-body"},ae={class:"filter-items filter-items-count"},oe={class:"custom-control custom-checkbox"},le=["id"],se=["for"],re={class:"item-count"},ne={class:"widget widget-collapsible"},ce={id:"widget-4",class:"show"},ie={class:"widget-body"},de={class:"filter-items"},ue={class:"custom-control custom-checkbox"},me=["id"],ge=["for"],Ve={__name:"ProductCategory",setup(pe){const c=P();e.ref(c);const s=e.ref(c.params.page?parseInt(c.params.page):1),d=e.ref(12),u=e.ref(0),m=e.ref([]),V=e.ref(0),g=e.ref(c.params.id?parseInt(c.params.id):1),p=e.ref([]),E=e.ref([]),n=e.ref([]),v=async()=>{try{const a=await axios.get("/api/get-products",{params:{page:s.value,per_page:d.value,category_id:g.value}});m.value=a.data.products.data,u.value=a.data.products.total,V.value=a.data.products.data.length,p.value=a.data.categories,E.value=a.data.brands,n.value=a.data.the_category,B({title:n.value.name+" | Category"})}catch(a){console.error(a)}},i=e.computed(()=>Math.ceil(u.value/d.value)),h=e.ref([]),f=()=>{s.value>1&&s.value--},b=()=>{s.value<i.value&&s.value++},k=a=>{s.value=a},_=(a,o,r)=>{let l=o.replace(/ /g,"-").replace(/\//g,"-");l=l.replace(/-+/g,"-"),l=l.replace(/^-+|-+$/g,""),l=l.toLowerCase();let t=r.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),`/product/${a}/${l}-${t}`},N=(a,o,r)=>{let l=o.replace(/ /g,"-").replace(/\//g,"-");return l=l.replace(/-+/g,"-"),l=l.replace(/^-+|-+$/g,""),l=l.toLowerCase(),`/category/${a}/${l}/page/${r}`},x=()=>{h.value=m.value.slice(0,0+d.value)},y=a=>Number.isInteger(a),w=e.computed(()=>{const a=[];s.value>1&&a.push("Prev");let r=Math.max(1,s.value-Math.floor(5/2)),l=Math.min(r+5-1,i.value);l-r<5-1&&(r=Math.max(1,l-5+1));for(let t=r;t<=l;t++)a.push(t);return s.value<i.value&&a.push("Next"),a});return e.onMounted(()=>{v()}),e.watch(s,v),e.watch(m,x),e.watchEffect(()=>{const a=c.params;c.query,a.id!==""&&g.value!==a.id&&(s.value=1,g.value=a.id?parseInt(a.id):1,a.page!==""&&s.value!==a.page&&(s.value=a.page?parseInt(a.page):1),v())}),(a,o)=>{const r=e.resolveComponent("router-link"),l=e.resolveDirective("lazy");return e.openBlock(),e.createElementBlock("main",D,[e.createElementVNode("div",S,[e.createElementVNode("div",T,[e.createElementVNode("div",L,[e.createElementVNode("div",$,[e.createElementVNode("div",I,[e.createElementVNode("div",M,[e.createElementVNode("div",z,[o[0]||(o[0]=e.createTextVNode(" Showing ")),e.createElementVNode("span",null,e.toDisplayString(V.value)+" of "+e.toDisplayString(u.value),1),o[1]||(o[1]=e.createTextVNode(" Products "))])]),o[2]||(o[2]=e.createStaticVNode('<div class="toolbox-right"><div class="toolbox-sort"><label for="sortby">Sort by:</label><div class="select-custom"><select id="sortby" name="sortby" class="form-control"><option value="name"> Name A - Z </option><option value="date"> Date </option></select></div></div></div>',1))]),e.createElementVNode("div",F,[e.createElementVNode("div",A,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,t=>(e.openBlock(),e.createElementBlock("div",{key:t.id,class:"col-6 col-md-3 col-lg-3 col-xl-3"},[e.createElementVNode("div",j,[e.createElementVNode("figure",q,[e.createVNode(r,{to:_(t.id,t.name,t.model_number)},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("img",{src:"/storage/"+t.main_image_path,alt:"Product image",class:"product-image"},null,8,R),[[l,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"]),o[4]||(o[4]=e.createElementVNode("div",{class:"product-action-vertical"},null,-1)),e.createElementVNode("div",Z,[e.createElementVNode("button",{type:"button",class:"btn-product btn-cart",onClick:C=>a.addToCart(t)},o[3]||(o[3]=[e.createElementVNode("span",null,"Add to Cart",-1)]),8,G)])]),e.createElementVNode("div",H,[e.createElementVNode("div",J,[e.createVNode(r,{to:_(t.id,t.name,t.model_number)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.product_brand.name),1)]),_:2},1032,["to"])]),e.createElementVNode("h3",K,[e.createVNode(r,{to:_(t.id,t.name,t.model_number)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.name),1)]),_:2},1032,["to"])]),o[5]||(o[5]=e.createElementVNode("div",{class:"ratings-container"},null,-1))])])]))),128))])]),e.createElementVNode("nav",O,[e.createElementVNode("ul",Q,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===1}])},[e.createVNode(r,{class:"page-link page-link-prev",to:N(n.value.id,n.value.name,s.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:f},{default:e.withCtx(()=>o[6]||(o[6]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,t=>(e.openBlock(),e.createElementBlock("li",{key:t,class:e.normalizeClass(["page-item",{active:t===s.value}])},[y(t)?(e.openBlock(),e.createBlock(r,{key:0,class:"page-link",to:N(n.value.id,n.value.name,t),onClick:C=>k(t)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",U," of "+e.toDisplayString(i.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===i.value}])},[e.createVNode(r,{class:"page-link page-link-next",to:N(n.value.id,n.value.name,s.value+1),"aria-label":"Next",onClick:b},{default:e.withCtx(()=>o[7]||(o[7]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e.createElementVNode("aside",W,[e.createElementVNode("div",X,[o[10]||(o[10]=e.createElementVNode("div",{class:"widget widget-clean"},[e.createElementVNode("label",null,"Filters:"),e.createElementVNode("a",{href:"#",class:"sidebar-filter-clear"},"Clean All")],-1)),p.value.length?(e.openBlock(),e.createElementBlock("div",Y,[o[8]||(o[8]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e.createElementVNode("div",ee,[e.createElementVNode("div",te,[e.createElementVNode("div",ae,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock("div",{key:t.id,class:"filter-item"},[e.createElementVNode("div",oe,[e.createElementVNode("input",{id:"cat-"+t.id,type:"checkbox",class:"custom-control-input"},null,8,le),e.createElementVNode("label",{class:"custom-control-label",for:"cat-"+t.id},e.toDisplayString(t.name),9,se)]),e.createElementVNode("span",re,e.toDisplayString(t.category_products_count),1)]))),128))])])])])):e.createCommentVNode("",!0),e.createElementVNode("div",ne,[o[9]||(o[9]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e.createElementVNode("div",ce,[e.createElementVNode("div",ie,[e.createElementVNode("div",de,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,t=>(e.openBlock(),e.createElementBlock("div",{key:t.id,class:"filter-item"},[e.createElementVNode("div",ue,[e.createElementVNode("input",{id:"brand-"+t.product_brand,type:"checkbox",class:"custom-control-input"},null,8,me),e.createElementVNode("label",{class:"custom-control-label",for:"brand-"+t.product_brand},e.toDisplayString(t.product_brand.name),9,ge)])]))),128))])])])])])])])])])])}}};export{Ve as default};
