import{c2 as A,r,c as V,o as G,w as I,ae as J,bN as O,W as K,bF as n,bG as c,bH as a,e as d,bS as u,bW as b,bM as p,ab as L,bO as T,bJ as w,bL as f,V as Q,af as _}from"./index.fb9dc0c3.js";import"./use-meta.c39fc0d4.js";import{C}from"./ContentState.d809f56a.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";import"./transition.499f95ce.js";const X={class:"main"},Y={class:"page-content"},Z={class:"container"},ee={class:"row"},te={class:"col-lg-10 offset-lg-1"},ae={key:3,class:"row blogs-main-page-section"},se={class:"entry entry-grid"},oe={class:"entry-media entry-gallery"},le=["src"],ne={class:"entry-body"},re={class:"entry-title"},ie={class:"entry-content"},ce={class:"mb-2"},ue={key:4,class:"row"},ge={class:"col-md-12"},de={"aria-label":"Page navigation"},pe={class:"pagination justify-content-center"},ve={class:"page-item-total"},me={__name:"Blogs",setup(_e){const g=A(),o=r(g.params.page?parseInt(g.params.page):1),N=r(9),M=r(0),y=r([]),P=r(g.params.id?parseInt(g.params.id):1),D=r([]),h=r(!1),S=r(null),k=async()=>{h.value=!0;try{const e=await axios.get("/api/get-blogs",{params:{page:o.value,per_page:N.value,category_id:P.value}});y.value=e.data.data,M.value=e.data.total}catch(e){e.value=e,console.error(e)}finally{h.value=!1}},$=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});D.value=e.data.other_blogs}catch(e){console.error(e)}},x=(e,l)=>{let s=l.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/blogs/${e}/${s}`},B=e=>`/media/blogs/page/${e}`,v=V(()=>Math.ceil(M.value/N.value)),m=r([]),E=()=>{o.value>1&&o.value--},z=()=>{o.value<v.value&&o.value++},F=e=>{o.value=e},q=()=>{m.value=y.value},H=e=>Number.isInteger(e),R=V(()=>{const e=[];o.value>1&&e.push("Prev");let s=Math.max(1,o.value-Math.floor(5/2)),i=Math.min(s+5-1,v.value);i-s<5-1&&(s=Math.max(1,i-5+1));for(let t=s;t<=i;t++)e.push(t);return o.value<v.value&&e.push("Next"),e}),W=e=>{const l=document.createElement("div");l.innerHTML=e;const s=l.querySelectorAll("p");for(const i of s){const t=i.textContent.trim();if(t.length>50)return t.length>140?t.slice(0,144)+"...":t}return""},j=e=>e.length>5?e.length>35?e.slice(0,35)+"...":e:"";return G(()=>{k(),$()}),I(o,k),I(y,q),J(()=>{const e=g.params;g.query,e.id!==""&&P.value!==e.id&&(o.value=1,P.value=e.id?parseInt(e.id):1,e.page!==""&&o.value!==e.page&&(o.value=e.page?parseInt(e.page):1),k())}),(e,l)=>{const s=O("router-link"),i=K("lazy");return n(),c("div",null,[a("main",X,[a("div",Y,[a("div",Z,[a("div",ee,[a("div",te,[l[4]||(l[4]=a("h2",{class:"about-us-title"}," Blogs ",-1)),d(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:u(()=>l[0]||(l[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),l[5]||(l[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),h.value?(n(),b(C,{key:0,type:"loading","content-type":"Blog Posts"})):p("",!0),!m.value.length&&!h.value?(n(),b(C,{key:1,type:"empty","content-type":"Blog Posts"})):p("",!0),S.value?(n(),b(C,{key:2,type:"error","content-type":"Blog Posts"})):p("",!0),m.value.length?(n(),c("div",ae,[(n(!0),c(L,null,T(m.value,t=>(n(),c("div",{key:t.id,class:"entry-item col-sm-6 col-lg-4"},[a("article",se,[a("figure",oe,[d(s,{to:x(t.id,t.name)},{default:u(()=>[Q(a("img",{src:"/storage/"+t.main_image_path,alt:"image desc"},null,8,le),[[i,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"])]),a("div",ne,[a("h2",re,[d(s,{class:"text-primary",to:x(t.id,t.name)},{default:u(()=>[_(f(j(t.name)),1)]),_:2},1032,["to"])]),a("div",ie,[a("div",ce,f(W(t.excerpt)),1),d(s,{class:"btn btn-primary",to:x(t.id,t.name)},{default:u(()=>l[1]||(l[1]=[_(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)])),_:2},1032,["to"])])])])]))),128))])):p("",!0),m.value.length?(n(),c("div",ue,[a("div",ge,[a("nav",de,[a("ul",pe,[a("li",{class:w(["page-item",{disabled:o.value===1}])},[d(s,{class:"page-link page-link-prev",to:B(o.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:E},{default:u(()=>l[2]||(l[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(n(!0),c(L,null,T(R.value,t=>(n(),c("li",{key:t,class:w(["page-item",{active:t===o.value}])},[H(t)?(n(),b(s,{key:0,class:"page-link",to:B(t),onClick:he=>F(t)},{default:u(()=>[_(f(t),1)]),_:2},1032,["to","onClick"])):p("",!0)],2))),128)),a("li",ve," of "+f(v.value),1),a("li",{class:w(["page-item",{disabled:o.value===v.value}])},[d(s,{class:"page-link page-link-next",to:B(o.value+1),"aria-label":"Next",onClick:z},{default:u(()=>l[3]||(l[3]=[_(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):p("",!0)])])])])])])}}},xe=U(me,[["__scopeId","data-v-b4185591"]]);export{xe as default};
