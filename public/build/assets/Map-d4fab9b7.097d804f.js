import{d as z,z as b,Z as M,p as m,o as C,cE as J,w as i,q as E,bo as u,bp as y,bs as S,bx as f,bT as k,bC as $,X as B,bv as x,bw as I,B as j,I as Z,bq as A}from"./app-setting.d19a6685.js";import{s as L}from"./_plugin-vue_export-helper-dad06003.469021ef.js";import{a as V,y as c,c as q}from"./tools-b40e92cf.4881bf31.js";import"./_commonjsHelpers.f037b798.js";const D={},H={class:"gmaps-error"};function P(t,l){return u(),y("span",H,[S(t.$slots,"default")])}const G=L(D,[["render",P]]),R={},U={class:"gmaps-spinner"};function X(t,l){return u(),y("span",U)}const F=L(R,[["render",X]]),K={center:{lat:0,lng:0},zoom:2},Q=z({name:"GmapsMap",components:{MapSpinner:F,MapError:G},props:{center:{type:Object},clickableIcons:{type:Boolean},heading:{type:[String,Number]},mapTypeId:{type:[String,Object]},options:{type:Object,default:void 0},tilt:{type:[String,Number]},zoom:{type:[String,Number]},throttle:{type:[Number,String],default:100}},emits:{bounds_changed:t=>!0,center_changed:t=>!0,click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:()=>!0,dragend:()=>!0,dragstart:()=>!0,error:t=>!0,heading_changed:t=>!0,idle:()=>!0,isfractionalzoomenabled_changed:t=>!0,maptypeid_changed:t=>!0,mounted:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,projection_changed:()=>!0,renderingtype_changed:()=>!0,rightclick:t=>!0,tilesloaded:()=>!0,tilt_changed:t=>!0,unmounted:t=>!0,zoom_changed:t=>!0},setup(t,{emit:l}){let n=null,g=null;const v=[],h=b(),s=b(null),p=b(!1),{throttle:N}=M(t),_=V((e,o)=>{s.value=`[${o}]: ${e.message}`,l("error",s.value)},500),w=()=>{if(!g)throw new Error("vue3-gmaps :: getAPI() called before API loaded.");return g},O=()=>{if(!n)throw new Error("vue3-gmaps :: getMap() called before map loaded.");return n};m("$getAPI",w),m("$getMap",O),m("$getThrottle",()=>+t.throttle),m("$handleError",_);const T=e=>{const o=+N.value,r=google.maps.event;v.push(r.addListener(e,"bounds_changed",c(()=>{var d;return l("bounds_changed",((d=e.getBounds())==null?void 0:d.toJSON())||null)},o)),r.addListener(e,"center_changed",c(()=>{var d;return l("center_changed",((d=e.getCenter())==null?void 0:d.toJSON())||null)},o)),r.addListener(e,"drag",c(()=>l("drag"),o)),r.addListener(e,"mousemove",c(d=>{var a;return l("mousemove",((a=d.latLng)==null?void 0:a.toJSON())||null)},o)),r.addListener(e,"idle",c(()=>l("idle"),o)),r.addListener(e,"click",d=>{var a;return l("click",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"contextmenu",d=>{var a;return l("contextmenu",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"dblclick",d=>{var a;return l("dblclick",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"dragend",()=>l("dragend")),r.addListener(e,"dragstart",()=>l("dragstart")),r.addListener(e,"heading_changed",()=>l("heading_changed",e.getHeading()||null)),r.addListener(e,"isfractionalzoomenabled_changed",()=>l("isfractionalzoomenabled_changed",e.getZoom()||null)),r.addListener(e,"maptypeid_changed",()=>l("maptypeid_changed",e.getMapTypeId()||null)),r.addListener(e,"mouseout",d=>{var a;return l("mouseout",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"mouseover",d=>{var a;return l("mouseover",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"projection_changed",()=>l("projection_changed")),r.addListener(e,"renderingtype_changed",()=>l("renderingtype_changed")),r.addListener(e,"rightclick",d=>{var a;return l("rightclick",((a=d.latLng)==null?void 0:a.toJSON())||null)}),r.addListener(e,"tilesloaded",()=>l("tilesloaded")),r.addListener(e,"tilt_changed",()=>l("tilt_changed",e.getTilt()||null)),r.addListener(e,"zoom_changed",()=>l("zoom_changed",e.getZoom()||null)))};return C(()=>{J().then(e=>{g=e;const o={...K,...t.options};t.center&&(o.center=t.center),t.clickableIcons&&(o.clickableIcons=t.clickableIcons),t.heading&&(o.heading=t.heading),t.mapTypeId&&(o.mapTypeId=t.mapTypeId),t.tilt&&(o.tilt=t.tilt),t.zoom&&(o.zoom=t.zoom),n=new e.Map(h.value,o),n&&T(n),l("mounted",n),p.value=!0}).catch(e=>_(e,"Map"))}),i(()=>t.center,e=>{var o;return e===void 0||q(e,(o=n==null?void 0:n.getCenter())==null?void 0:o.toJSON())?null:n==null?void 0:n.setCenter(e)},{deep:!0}),i(()=>t.clickableIcons,e=>e===void 0||e==(n==null?void 0:n.getClickableIcons())?null:n==null?void 0:n.setClickableIcons(e)),i(()=>t.heading,e=>e===void 0||+e==(n==null?void 0:n.getHeading())?null:n==null?void 0:n.setHeading(+e)),i(()=>t.mapTypeId,e=>e===void 0||e==(n==null?void 0:n.getMapTypeId())?null:n==null?void 0:n.setMapTypeId(e)),i(()=>t.options,e=>e?n==null?void 0:n.setOptions(e):null),i(()=>t.tilt,e=>e===void 0||+e==(n==null?void 0:n.getTilt())?null:n==null?void 0:n.setTilt(+e)),i(()=>t.zoom,e=>e===void 0||+e==(n==null?void 0:n.getZoom())?null:n==null?void 0:n.setZoom(+e)),E(()=>{n&&l("unmounted",n),v.forEach(e=>e.remove()),n&&window.google.maps.event.clearInstanceListeners(n)}),{error:s,ready:p,mapEl:h}}}),W={style:{width:"100%",height:"100%"}},Y={ref:"mapEl",style:{width:"100%",height:"100%"}};function ee(t,l,n,g,v,h){const s=f("map-error"),p=f("map-spinner");return u(),y("div",W,[t.error?(u(),k(s,{key:0},{default:$(()=>[B(x(t.error),1)]),_:1})):t.ready?I("",!0):(u(),k(p,{key:1})),j(A("div",Y,null,512),[[Z,t.ready&&!t.error]]),t.ready&&!t.error?S(t.$slots,"default",{key:2}):I("",!0)])}const ae=L(Q,[["render",ee]]);export{ae as default};
