import{r as i,c6 as m,cg as n}from"./index-85e2ec5a.js";import{a6 as j}from"./index-ae113572.js";function k(){const y=i([]),g=i([]),f=i({name:"",parent_id:"",description:"",is_published:""}),u=m(),r=i({}),c=i(!1),d=async(e=1,a="",o="",l="",s="",t="created_at",h="desc")=>{try{const p=await n("get",`/api/projects?page=${e}&search_id=${a}&search_title=${o}&search_parent_id=${l}&search_global=${s}&order_column=${t}&order_direction=${h}`);y.value=p,console.log(p)}catch(p){r.value=p}};return{projectList:g,projects:y,project:f,getProjects:d,getProjectList:async()=>{try{const e=await n("get","/api/project-list");g.value=e}catch(e){r.value=e}},getProject:async e=>{try{const a=await n("get",`/api/projects/${e}`);f.value=a}catch(a){r.value=a}},storeProject:async(e,a)=>{var s;if(c.value)return;c.value=!0,r.value={};let o=new FormData;for(let t=0;t<a.length;t++){let h=a[t];o.append("project_gallery["+t+"]",h)}for(let t in e)e.hasOwnProperty(t)&&o.append(t,e[t]);const l={headers:{"Content-Type":"multipart/form-data"}};try{await n("post","/api/projects",o,l),u.push({name:"projects.index"}),e.value={name:"",parent_id:"",description:"",is_published:""},showToast("Project saved successfully","success")}catch(t){(s=t.response)!=null&&s.data&&(r.value=t.response.data.errors)}finally{c.value=!1}},updateProject:async(e,a)=>{if(c.value)return;c.value=!0,r.value={};let o=new FormData;if(a.length>0)for(let s=0;s<a.length;s++){let t=a[s];o.append("project_gallery["+s+"]",t)}for(let s in e)if(e.hasOwnProperty(s)&&s!=="clients"){let t=e[s];t===null&&["weight","length","height","width","quantity","cost_price","retail_price"].includes(s)&&(t=0),o.append(s,t)}const l={headers:{"Content-Type":"multipart/form-data"}};try{await n("put",`/api/projects/${e.id}`,o,l),u.push({name:"projects.index"}),showToast("Project updated successfully","success")}catch(s){r.value=s}finally{c.value=!1}},deleteProject:async e=>{j.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{n("delete",`/api/projects/${e}`),d(),u.push({name:"projects.index"}),showToast("Project deleted successfully","success")}})},deleteProjectImage:async e=>{j.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{await n("delete",`/api/project-images/${e}`),d(),u.go(0),showToast("Image deleted successfully","success")}})},validationErrors:r,isLoading:c}}export{k as u};
