import{aa as I,ab as G,ac as d,P as T,x as X,a3 as A,y as R,a4 as P,o as a,c as o,a2 as W,a as e,W as Z,p as h,X as z,t as r,u as i,F as u,g as m,i as w,al as $,v as H,m as x,aq as J,d as K,ad as O,ae as Q}from"./app-setting.366f23a7.js";import{u as Y}from"./projects.0564ee96.js";import{u as ee}from"./clients.0ceca505.js";/* empty css                                     */import{F as f}from"./file-upload-with-preview.esm.fbf56fa2.js";import{M as te}from"./vue3-multiselect.umd.min.4c4b3a85.js";/* empty css                         */import{q as se}from"./vue3-quill.a5a8cf44.js";import"./_commonjsHelpers.f037b798.js";const ie={class:"container"},le=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Projects")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Edit Project")])])])])])],-1),ae={class:"container"},oe={class:"row"},ne={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},ce={class:"statbox panel box box-shadow"},re=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"Edit Project")])])])],-1),de={class:"panel-body"},ue=["onSubmit"],me={class:"row"},_e={class:"form-group col-md-12"},pe=e("label",{for:"post-name"},"Project Name",-1),ge={class:"text-danger mt-1"},ve={class:"text-danger mt-1"},he={class:"form-group"},fe=e("label",{for:"post-client",class:"form-label"},"Select Client",-1),be={class:"text-danger mt-1"},ye={class:"text-danger mt-1"},je={class:"form-group"},Ie=e("label",{for:"post-content"},"Project Description",-1),Pe={class:"custom-file-container","data-upload-id":"myFirstImage"},we=e("label",null,[x("Upload Main Project Image "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),xe={class:"custom-file-container__custom-file",for:"main_image"},ke=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),Ee=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),Fe=e("div",{class:"custom-file-container__image-preview"},null,-1),Se={class:"custom-file-container","data-upload-id":"myProjectGallery"},Ve=e("label",null,[x("Project Gallery (multiple images allowed) "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),Ce={class:"custom-file-container__custom-file",for:"project_gallery"},qe={type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",ref:"project_gallery",multiple:"",id:"project_gallery"},Me=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),Ue=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),Le={class:"custom-file-container__image-preview"},Ne=["onClick"],Be=e("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"\xD7",-1),De=[Be],Ge={class:"form-group col-md-4"},Te=e("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1),Xe=e("option",{value:""}," Select Publishing Status ... ",-1),Ae=e("option",{selected:"",value:"1"}," Published ",-1),Re=e("option",{value:"0"}," Not Published ",-1),We=[Xe,Ae,Re],Ze={class:"text-danger mt-1"},ze={class:"text-danger mt-1"},$e=["disabled"],He={class:""},Je={key:0},Ke={key:1},rt={__name:"edit",setup(Oe){I("required",O),I("min",Q);const k={name:"required|min:3",client:"required",content:"required",is_published:"required"},{validate:E,errors:_,resetForm:Qe}=G({validationSchema:k}),{project:n,getProject:F,updateProject:b,validationErrors:p,isLoading:g,deleteProjectImage:S}=Y(),{getClientList:V,clientList:C}=ee(),{value:q}=d("name",null,{initialValue:""}),{value:M}=d("client",null,{initialValue:""}),{value:U}=d("content",null,{initialValue:""}),{value:L}=d("is_published",null,{initialValue:""}),t=T({name:q,content:U,client:M,is_published:L,main_image:"",project_gallery:""}),N=X({modules:{}}),B=A();function D(){E().then(v=>{if(v.valid){t.client&&t.client.id?t.client=t.client.id:t.client=null;const c=document.getElementById("project_gallery").files;c.length>0?b(t,c):b(t,[])}})}return R(()=>{V(),F(B.params.id),P(()=>{if(n.value&&n.value.main_image_path){const c={images:{baseImage:"/storage/"+n.value.main_image_path,backgroundImage:""}};new f("myFirstImage",c)}else new f("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new f("myProjectGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),P(()=>{t.id=n.value.id,t.client=n.value.client_json,t.name=n.value.name,t.content=n.value.content,t.is_published=n.value.is_published,t.project_images=n.value.project_images,console.log(n.value)}),(v,l)=>{var c,y,j;return a(),o("div",ie,[(a(),W(J,{to:"#breadcrumb"},[le])),e("div",ae,[e("div",oe,[e("div",ne,[e("div",ce,[re,e("div",de,[e("form",{onSubmit:Z(D,["prevent"])},[e("div",me,[e("div",_e,[pe,h(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.name=s),id:"post-name",type:"text",class:"form-control",placeholder:"Enter Project Name ..."},null,512),[[z,t.name]]),e("div",ge,r(i(_).name),1),e("div",ve,[(a(!0),o(u,null,m((c=i(p))==null?void 0:c.name,s=>(a(),o("div",null,r(s),1))),256))])]),e("div",he,[fe,w(i(te),{modelValue:t.client,"onUpdate:modelValue":l[1]||(l[1]=s=>t.client=s),options:i(C),reduce:s=>s.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Client ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"]),e("div",be,r(i(_).client),1),e("div",ye,[(a(!0),o(u,null,m((y=i(p))==null?void 0:y.client,s=>(a(),o("div",null,r(s),1))),256))])]),e("div",je,[Ie,w(i(se),{value:t.content,"onUpdate:value":l[2]||(l[2]=s=>t.content=s),options:N.value,placeholder:"Enter Project Description ..."},null,8,["value","options"])]),e("div",Pe,[we,e("label",xe,[e("input",{type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:l[3]||(l[3]=s=>t.main_image=s.target.files[0]),id:"main_image"},null,32),ke,Ee]),Fe]),e("div",Se,[Ve,e("label",Ce,[e("input",qe,null,512),Me,Ue]),e("div",Le,[(a(!0),o(u,null,m(t.project_images,s=>(a(),o("div",{key:s.id,class:"custom-file-container__image-multi-preview",style:K("background-image: url(/storage/"+s.name+")")},[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:Ye=>i(S)(s.id)},De,8,Ne)],4))),128))])]),e("div",Ge,[Te,e("div",null,[h(e("select",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.is_published=s),id:"is_published",class:"form-select"},We,512),[[$,t.is_published]])]),e("div",Ze,r(i(_).is_published),1),e("div",ze,[(a(!0),o(u,null,m((j=i(p))==null?void 0:j.is_published,s=>(a(),o("div",null,r(s),1))),256))])])]),e("button",{disabled:i(g),class:"btn btn-primary mt-3"},[h(e("div",He,null,512),[[H,i(g)]]),i(g)?(a(),o("span",Je,"Processing...")):(a(),o("span",Ke,"Update"))],8,$e)],40,ue)])])])])])])}}};export{rt as default};
