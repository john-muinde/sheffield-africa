import{z as r,ce as h,cx as s}from"./app-setting.6211240a.js";import"./index.06fb6985.js";import{$ as f}from"./Modal.2afb2ad5.js";function R(){const l=r([]),c=r([]),u=r([]),g=r({name:"",description:""}),n=h(),a=r({}),o=r(!1);return{categoryList:c,categoryMainList:u,categories:l,category:g,updateDatabaseOrder:async e=>{try{await s("post","/api/categories-update-order",{data:e}),showToast("Category order updated successfully","success")}catch(t){a.value=t}},getCategories:async({page:e=1,per_page:t=20,category_id:y=null,mainCategory:p=null,search:d=null,filter_category_id:v=""}={})=>{try{const i=`/api/get-categories?page=${e}&per_page=${t}&category_id=${y}&mainCategory=${p}&search=${d}&filter_category_id=${v}`,C=await s("get",i);l.value=C}catch(i){a.value=i}},getMainCategoryList:async()=>{try{const e=await s("get","/api/category-main");u.value=e}catch(e){a.value=e}},getSelectedCategoryList:async e=>{try{const t=await s("get",`/api/category-list/${e}`);c.value=t}catch(t){a.value=t}},getCategoryList:async(e="")=>{try{const t=await s("get","/api/category-list?exclude_id="+e);c.value=t}catch(t){a.value=t}},getCategory:async e=>{try{const t=await s("get",`/api/categories/${e}`);console.log(t),g.value=t}catch(t){a.value=t}},storeCategory:async e=>{if(!o.value){o.value=!0,a.value={};try{await s("post","/api/categories",e),n.push({name:"categories.index"}),showToast("Category saved successfully","success")}catch(t){a.value=t}finally{o.value=!1}}},updateCategory:async e=>{if(!o.value){o.value=!0,a.value={};try{await s("put",`/api/categories/${e.id}`,e),n.push({name:"categories.index"}),showToast("Category updated successfully","success")}catch(t){a.value=t}finally{o.value=!1}}},deleteCategory:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){s("delete",`/api/categories/${e}`).then(()=>{n.push({name:"categories.index"}),showToast("Category deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:o}}export{R as u};
