import{v as i,b as m,c as n}from"./index-cf71ea16.js";import{M as j}from"./index-ab53d71b.js";function k(){const h=i.ref([]),y=i.ref([]),g=i.ref({name:"",parent_id:"",description:"",is_published:""}),u=m(),o=i.ref({}),c=i.ref(!1),d=async(e=1,a="",r="",l="",s="",t="created_at",f="desc")=>{try{const p=await n("get",`/api/projects?page=${e}&search_id=${a}&search_title=${r}&search_parent_id=${l}&search_global=${s}&order_column=${t}&order_direction=${f}`);h.value=p,console.log(p)}catch(p){o.value=p}};return{projectList:y,projects:h,project:g,getProjects:d,getProjectList:async()=>{try{const e=await n("get","/api/project-list");y.value=e}catch(e){o.value=e}},getProject:async e=>{try{const a=await n("get",`/api/projects/${e}`);g.value=a}catch(a){o.value=a}},storeProject:async(e,a)=>{var s;if(c.value)return;c.value=!0,o.value={};let r=new FormData;for(let t=0;t<a.length;t++){let f=a[t];r.append("project_gallery["+t+"]",f)}for(let t in e)e.hasOwnProperty(t)&&r.append(t,e[t]);const l={headers:{"Content-Type":"multipart/form-data"}};try{await n("post","/api/projects",r,l),u.push({name:"projects.index"}),e.value={name:"",parent_id:"",description:"",is_published:""},showToast("Project saved successfully","success")}catch(t){(s=t.response)!=null&&s.data&&(o.value=t.response.data.errors)}finally{c.value=!1}},updateProject:async(e,a)=>{if(c.value)return;c.value=!0,o.value={};let r=new FormData;if(a.length>0)for(let s=0;s<a.length;s++){let t=a[s];r.append("project_gallery["+s+"]",t)}for(let s in e)if(e.hasOwnProperty(s)&&s!=="clients"){let t=e[s];t===null&&["weight","length","height","width","quantity","cost_price","retail_price"].includes(s)&&(t=0),r.append(s,t)}const l={headers:{"Content-Type":"multipart/form-data"}};try{await n("put",`/api/projects/${e.id}`,r,l),u.push({name:"projects.index"}),showToast("Project updated successfully","success")}catch(s){o.value=s}finally{c.value=!1}},deleteProject:async e=>{j.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{n("delete",`/api/projects/${e}`),d(),u.push({name:"projects.index"}),showToast("Project deleted successfully","success")}})},deleteProjectImage:async e=>{j.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{await n("delete",`/api/project-images/${e}`),d(),u.go(0),showToast("Image deleted successfully","success")}})},validationErrors:o,isLoading:c}}export{k as u};
