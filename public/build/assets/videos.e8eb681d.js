import{z as r,cd as _,cw as l}from"./app-setting.152ae457.js";import{$ as v}from"./Modal.54396ec4.js";function L(){const d=r([]),p=r([]),h=r({name:"",type:"",content:"",is_published:"",shown_in_about_us:"",video_url:null,main_image_path:null,file_path:null}),c=_(),s=r({}),o=r(!1),f=async(e=1,n="",a="",i="",t="",y="created_at",m="desc")=>{try{const u=await l("get",`/api/videos?page=${e}&search_id=${n}&search_title=${a}&search_parent_id=${i}&search_global=${t}&order_column=${y}&order_direction=${m}`);d.value=u}catch(u){s.value=u}};return{videoList:p,videos:d,video:h,getVideos:f,getVideoList:async()=>{try{const e=await l("get","/api/video-list");p.value=e}catch(e){s.value=e}},getVideo:async e=>{try{const n=await l("get",`/api/videos/${e}`);h.value=n}catch(n){s.value=n}},storeVideo:async(e,n)=>{if(o.value)return;o.value=!0,s.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&e[t]!="null"&&e[t]!=null&&a.append(t,e[t]);const i={headers:{"content-type":"multipart/form-data"}};try{await l("post","/api/videos",a,i),c.push({name:"videos.index"}),e.name=null,e.content=null,e.type=null,e.is_published=null,e.shown_in_about_us=null,showToast("Video saved successfully","success")}catch(t){s.value=t}finally{o.value=!1}},updateVideo:async(e,n)=>{if(o.value)return;o.value=!0,s.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&e[t]!="null"&&e[t]!=null&&a.append(t,e[t]);const i={headers:{"Content-Type":"multipart/form-data"}};a.append("_method","put");try{await l("post",`/api/videos/${e.id}`,a,i),c.push({name:"videos.index"}),showToast("Video updated successfully","success")}catch(t){s.value=t}finally{o.value=!1}},deleteVideo:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){l("delete",`/api/videos/${e}`).then(()=>{f(),c.push({name:"videos.index"}),showToast("Video deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:s,isLoading:o}}export{L as u};
