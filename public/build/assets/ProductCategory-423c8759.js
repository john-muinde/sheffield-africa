import{bT as j,r as n,c as M,o as q,w as T,aa as G,bK as J,R as K,bB as r,bC as c,bD as e,ab as g,bI as d,bV as Q,a7 as b,bL as h,bG as V,e as m,bP as p,bJ as B,Q as Z,bS as H}from"./index-a6927a74.js";import{u as O}from"./use-meta-c91e9d6d.js";import"./_commonjsHelpers-de833af9.js";const U={class:"main"},W={class:"page-content mt-4"},X={class:"container"},Y={class:"row"},ee={class:"col-lg-9"},te={class:"toolbox"},ae={class:"toolbox-left"},se={class:"toolbox-info"},oe={class:"products mb-3"},le={class:"row"},ie={class:"product product-7 text-center"},ne={class:"product-media"},re=["src"],ce={class:"product-action"},de=["onClick"],ue={class:"product-body"},ve={class:"product-cat"},ge={class:"product-title"},pe={"aria-label":"Page navigation"},_e={class:"pagination justify-content-center"},me={class:"page-item-total"},be={class:"col-lg-3 order-lg-first"},he={class:"sidebar sidebar-shop"},fe={key:0,class:"widget widget-collapsible"},xe={id:"widget-1",class:"show"},ye={class:"widget-body"},we={class:"filter-items filter-items-count"},ke={class:"custom-control custom-checkbox"},Pe=["id"],Ce=["for"],Ne={class:"item-count"},Ve={class:"widget widget-collapsible"},$e={id:"widget-4",class:"show"},Ie={class:"widget-body"},Le={class:"filter-items"},Me={class:"custom-control custom-checkbox"},Te=["id"],Be=["for"],Ee={__name:"ProductCategory",setup(De){const v=j();n(v);const l=n(v.params.page?parseInt(v.params.page):1),f=n(12),x=n(0),y=n([]),$=n(0),w=n(v.params.id?parseInt(v.params.id):1),k=n([]),I=n([]),u=n([]),P=async()=>{try{const a=await axios.get("/api/get-products",{params:{page:l.value,per_page:f.value,category_id:w.value}});y.value=a.data.products.data,x.value=a.data.products.total,$.value=a.data.products.data.length,k.value=a.data.categories,I.value=a.data.brands,u.value=a.data.the_category,O({title:u.value.name+" | Category"})}catch(a){console.error(a)}},_=M(()=>Math.ceil(x.value/f.value)),L=n([]),D=()=>{l.value>1&&l.value--},S=()=>{l.value<_.value&&l.value++},z=a=>{l.value=a},C=(a,s,i)=>{let o=s.replace(/ /g,"-").replace(/\//g,"-");o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase();let t=i.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),`/product/${a}/${o}-${t}`},N=(a,s,i)=>{let o=s.replace(/ /g,"-").replace(/\//g,"-");return o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase(),`/category/${a}/${o}/page/${i}`},A=()=>{L.value=y.value.slice(0,0+f.value)},E=a=>Number.isInteger(a),F=M(()=>{const a=[];l.value>1&&a.push("Prev");let i=Math.max(1,l.value-Math.floor(5/2)),o=Math.min(i+5-1,_.value);o-i<5-1&&(i=Math.max(1,o-5+1));for(let t=i;t<=o;t++)a.push(t);return l.value<_.value&&a.push("Next"),a});return q(()=>{P()}),T(l,P),T(y,A),G(()=>{const a=v.params;v.query,a.id!==""&&w.value!==a.id&&(l.value=1,w.value=a.id?parseInt(a.id):1,a.page!==""&&l.value!==a.page&&(l.value=a.page?parseInt(a.page):1),P())}),(a,s)=>{const i=J("router-link"),o=K("lazy");return r(),c("main",U,[e("div",W,[e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[e("div",ae,[e("div",se,[s[0]||(s[0]=g(" Showing ")),e("span",null,d($.value)+" of "+d(x.value),1),s[1]||(s[1]=g(" Products "))])]),s[2]||(s[2]=Q('<div class="toolbox-right"><div class="toolbox-sort"><label for="sortby">Sort by:</label><div class="select-custom"><select id="sortby" name="sortby" class="form-control"><option value="name"> Name A - Z </option><option value="date"> Date </option></select></div></div></div>',1))]),e("div",oe,[e("div",le,[(r(!0),c(b,null,h(L.value,t=>(r(),c("div",{key:t.id,class:"col-6 col-md-3 col-lg-3 col-xl-3"},[e("div",ie,[e("figure",ne,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[Z(e("img",{src:"/storage/"+t.main_image_path,alt:"Product image",class:"product-image"},null,8,re),[[o,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"]),s[4]||(s[4]=e("div",{class:"product-action-vertical"},null,-1)),e("div",ce,[e("button",{type:"button",class:"btn-product btn-cart",onClick:R=>a.addToCart(t)},s[3]||(s[3]=[e("span",null,"Add to Cart",-1)]),8,de)])]),e("div",ue,[e("div",ve,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[g(d(t.product_brand.name),1)]),_:2},1032,["to"])]),e("h3",ge,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[g(d(t.name),1)]),_:2},1032,["to"])]),s[5]||(s[5]=e("div",{class:"ratings-container"},null,-1))])])]))),128))])]),e("nav",pe,[e("ul",_e,[e("li",{class:V(["page-item",{disabled:l.value===1}])},[m(i,{class:"page-link page-link-prev",to:N(u.value.id,u.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:D},{default:p(()=>s[6]||(s[6]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),g(" Prev ")])),_:1},8,["to"])],2),(r(!0),c(b,null,h(F.value,t=>(r(),c("li",{key:t,class:V(["page-item",{active:t===l.value}])},[E(t)?(r(),H(i,{key:0,class:"page-link",to:N(u.value.id,u.value.name,t),onClick:R=>z(t)},{default:p(()=>[g(d(t),1)]),_:2},1032,["to","onClick"])):B("",!0)],2))),128)),e("li",me," of "+d(_.value),1),e("li",{class:V(["page-item",{disabled:l.value===_.value}])},[m(i,{class:"page-link page-link-next",to:N(u.value.id,u.value.name,l.value+1),"aria-label":"Next",onClick:S},{default:p(()=>s[7]||(s[7]=[g(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",be,[e("div",he,[s[10]||(s[10]=e("div",{class:"widget widget-clean"},[e("label",null,"Filters:"),e("a",{href:"#",class:"sidebar-filter-clear"},"Clean All")],-1)),k.value.length?(r(),c("div",fe,[s[8]||(s[8]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",xe,[e("div",ye,[e("div",we,[(r(!0),c(b,null,h(k.value,t=>(r(),c("div",{key:t.id,class:"filter-item"},[e("div",ke,[e("input",{id:"cat-"+t.id,type:"checkbox",class:"custom-control-input"},null,8,Pe),e("label",{class:"custom-control-label",for:"cat-"+t.id},d(t.name),9,Ce)]),e("span",Ne,d(t.category_products_count),1)]))),128))])])])])):B("",!0),e("div",Ve,[s[9]||(s[9]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",$e,[e("div",Ie,[e("div",Le,[(r(!0),c(b,null,h(I.value,t=>(r(),c("div",{key:t.id,class:"filter-item"},[e("div",Me,[e("input",{id:"brand-"+t.product_brand,type:"checkbox",class:"custom-control-input"},null,8,Te),e("label",{class:"custom-control-label",for:"brand-"+t.product_brand},d(t.product_brand.name),9,Be)])]))),128))])])])])])])])])])])}}};export{Ee as default};
