import{v as o,b as v,d as i}from"./index-0d6930bf.js";function B(){const d=o.ref([]),p=o.ref([]),m=o.ref({name:"",is_published:"",description:""}),u=v(),l=o.ref({}),n=o.ref(!1),r=o.inject("$swal"),f=async(e=1,s="",t="",a="",c="created_at",h="desc")=>{i.get("/api/testimonials?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+a+"&order_column="+c+"&order_direction="+h).then(g=>{d.value=g.data})};return{testimonialList:p,testimonials:d,testimonial:m,getTestimonials:f,getTestimonialList:async()=>{i.get("/api/testimonial-list").then(e=>{p.value=e.data.data})},getTestimonial:async e=>{i.get("/api/testimonials/"+e).then(s=>{m.value=s.data.data})},storeTestimonial:async e=>{if(console.log(e),n.value)return;n.value=!0,l.value={};let s=new FormData;for(let a in e)e.hasOwnProperty(a)&&s.append(a,e[a]);const t={headers:{"content-type":"multipart/form-data"}};console.log(s),i.post("/api/testimonials",s,t).then(a=>{u.push({name:"testimonials.create"}),e.name=null,e.website=null,e.person=null,e.email=null,e.description=null,e.main_image=null,e.is_published=null,r({icon:"success",title:"Testimonial saved successfully"})}).catch(a=>{var c;(c=a.response)!=null&&c.data&&(l.value=a.response.data.errors)}).finally(()=>n.value=!1)},updateTestimonial:async e=>{if(console.log(e),n.value)return;n.value=!0,l.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);console.log(s),i.put("/api/testimonials/"+e.id,e).then(t=>{u.push({name:"testimonials.index"}),r({icon:"success",title:"Testimonial updated successfully"})}).catch(t=>{var a;(a=t.response)!=null&&a.data&&(l.value=t.response.data.errors)}).finally(()=>n.value=!1)},deleteTestimonial:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&i.delete("/api/testimonials/"+e).then(t=>{f(),u.push({name:"testimonials.index"}),r({icon:"success",title:"Testimonial deleted successfully"})}).catch(t=>{r({icon:"error",title:"Something went wrong"})})})},validationErrors:l,isLoading:n}}export{B as u};
