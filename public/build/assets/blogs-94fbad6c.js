import{v as p,b as _,c}from"./index-0d6930bf.js";import{M as y}from"./index-ab450292.js";function I(){const h=p.ref([]),f=p.ref([]),m=p.ref({name:"",parent_id:"",description:"",is_published:""}),d=_(),n=p.ref({}),o=p.ref(!1),g=async(e=1,a="",s="",i="",l="",u="created_at",t="desc")=>{try{const r=await c("get",`/api/blogs?page=${e}&search_id=${a}&search_title=${s}&search_parent_id=${i}&search_global=${l}&order_column=${u}&order_direction=${t}`);h.value=r}catch(r){n.value=r}};return{blogList:f,blogs:h,blog:m,getBlogs:g,getBlogList:async()=>{try{const e=await c("get","/api/blog-list");f.value=e}catch(e){n.value=e}},getBlog:async e=>{try{const a=await c("get",`/api/blogs/${e}`);m.value=a}catch(a){n.value=a}},storeBlog:async(e,a)=>{if(o.value)return;o.value=!0,n.value={};let s=new FormData;const i=e.categories.map(t=>t.id);s.append("categories",i);for(var l=0;l<a.length;l++){let t=a[l];s.append("blog_gallery["+l+"]",t)}for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&s.append(t,e[t]);const u={headers:{"content-type":"multipart/form-data"}};try{await c("post","/api/blogs",s,u),d.push({name:"blogs.create"}),e.name=null,e.description=null,e.parent_id=null,e.is_published=null,e.model_number=null,e.sku=null,e.quantity=null,e.cost_price=null,e.retail_price=null,e.weight=null,e.length=null,e.width=null,e.height=null,e.short_description=null,e.technical_specification=null,e.terms_of_operation=null,e.main_image=null,e.blog_gallery=null,e.document=null,showToast("Blog saved successfully","success")}catch(t){n.value=t}finally{o.value=!1}},updateBlog:async(e,a)=>{if(o.value)return;o.value=!0,n.value={};let s=new FormData;const i=e.categories.map(t=>t.id);if(s.append("categories",i),a.length>0)for(var l=0;l<a.length;l++){let t=a[l];s.append("blog_gallery["+l+"]",t)}for(let t in e)if(e.hasOwnProperty(t)&&t!=="categories"){let r=e[t];r===null&&(t==="weight"||t==="length"||t==="height"||t==="width"||t==="quantity"||t==="cost_price"||t==="retail_price")&&(r=0),s.append(t,r)}const u={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put");try{await c("post",`/api/blogs/${e.id}`,s,u),d.push({name:"blogs.index"}),showToast("Blog updated successfully","success")}catch(t){n.value=t}finally{o.value=!1}},deleteBlog:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/blogs/${e}`).then(()=>{g(),d.push({name:"blogs.index"}),showToast("Blog deleted successfully","success")})},onCancel(){console.log("Cancel")}})},deleteBlogImage:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/blog-images/${e}`).then(()=>{g(),d.go(0),showToast("Image deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:n,isLoading:o}}export{I as u};
