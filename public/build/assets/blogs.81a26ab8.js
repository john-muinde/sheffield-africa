import{q as d,aa as _,aQ as c}from"./app-setting.176c951c.js";import{M as f}from"./Modal.333891ea.js";function I(){const h=d([]),m=d([]),y=d({name:"",parent_id:"",description:"",is_published:""}),p=_(),n=d({}),l=d(!1),g=async(e=1,a="",s="",i="",o="",u="created_at",t="desc")=>{try{const r=await c("get",`/api/blogs?page=${e}&search_id=${a}&search_title=${s}&search_parent_id=${i}&search_global=${o}&order_column=${u}&order_direction=${t}`);h.value=r.data}catch(r){n.value=r}};return{blogList:m,blogs:h,blog:y,getBlogs:g,getBlogList:async()=>{try{const e=await c("get","/api/blog-list");m.value=e.data.data}catch(e){n.value=e}},getBlog:async e=>{try{const a=await c("get",`/api/blogs/${e}`);y.value=a.data.data}catch(a){n.value=a}},storeBlog:async(e,a)=>{if(l.value)return;l.value=!0,n.value={};let s=new FormData;const i=e.categories.map(t=>t.id);s.append("categories",i);for(var o=0;o<a.length;o++){let t=a[o];s.append("blog_gallery["+o+"]",t)}for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&s.append(t,e[t]);const u={headers:{"content-type":"multipart/form-data"}};try{await c("post","/api/blogs",s,u),p.push({name:"blogs.create"}),e.name=null,e.description=null,e.parent_id=null,e.is_published=null,e.model_number=null,e.sku=null,e.quantity=null,e.cost_price=null,e.retail_price=null,e.weight=null,e.length=null,e.width=null,e.height=null,e.short_description=null,e.technical_specification=null,e.terms_of_operation=null,e.main_image=null,e.blog_gallery=null,e.document=null,showToast("Blog saved successfully","success")}catch(t){n.value=t}finally{l.value=!1}},updateBlog:async(e,a)=>{if(l.value)return;l.value=!0,n.value={};let s=new FormData;const i=e.categories.map(t=>t.id);if(s.append("categories",i),a.length>0)for(var o=0;o<a.length;o++){let t=a[o];s.append("blog_gallery["+o+"]",t)}for(let t in e)if(e.hasOwnProperty(t)&&t!=="categories"){let r=e[t];r===null&&(t==="weight"||t==="length"||t==="height"||t==="width"||t==="quantity"||t==="cost_price"||t==="retail_price")&&(r=0),s.append(t,r)}const u={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put");try{await c("post",`/api/blogs/${e.id}`,s,u),p.push({name:"blogs.index"}),showToast("Blog updated successfully","success")}catch(t){n.value=t}finally{l.value=!1}},deleteBlog:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/blogs/${e}`).then(()=>{g(),p.push({name:"blogs.index"}),showToast("Blog deleted successfully","success")}).catch(()=>{showToast("Something went wrong","error")})},onCancel(){console.log("Cancel")}})},deleteBlogImage:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/blog-images/${e}`).then(()=>{g(),p.go(0),showToast("Image deleted successfully","success")}).catch(()=>{showToast("Something went wrong","error")})},onCancel(){console.log("Cancel")}})},validationErrors:n,isLoading:l}}export{I as u};
