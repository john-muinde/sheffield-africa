import{r as u,c6 as f,cf as c}from"./index.c04b0559.js";import{$ as m}from"./Modal.01e5b60c.js";function k(){const d=u([]),g=u([]),h=u({name:"",gallery_introduction:"",gallery_type:"",main_image_path:"",is_published:""}),y=f(),s=u({}),n=u(!1),p=async(e=1,t="",r="",l="",i="created_at",a="desc")=>{try{const o=await c("get",`/api/galleries?page=${e}&search_id=${t}&search_title=${r}&search_global=${l}&order_column=${i}&order_direction=${a}`);d.value=o,console.log(o)}catch(o){s.value=o}};return{galleryList:g,galleries:d,gallery:h,getGalleries:p,getGalleryList:async()=>{try{const e=await c("get","/api/gallery-list");g.value=e}catch(e){s.value=e}},getGallery:async e=>{try{const t=await c("get",`/api/galleries/${e}`);h.value=t}catch(t){s.value=t}},storeGallery:async(e,t)=>{if(n.value)return;n.value=!0,s.value={};let r=new FormData;for(var l=0;l<t.length;l++){let a=t[l];r.append("gallery_gallery["+l+"]",a)}for(let a in e)e.hasOwnProperty(a)&&r.append(a,e[a]);const i={headers:{"Content-Type":"multipart/form-data"}};try{await c("post","/api/galleries",r,i),y.push({name:"gallery.index"}),e.name=null,e.gallery_introduction=null,e.company_involvement=null,e.collaborations_and_partnership=null,e.main_image_path=null,e.gallery_gallery=null,showToast("Gallery saved successfully","success")}catch(a){s.value=a}finally{n.value=!1}},updateGallery:async(e,t)=>{if(n.value)return;n.value=!0,s.value={};let r=new FormData;if(t.length>0)for(var l=0;l<t.length;l++){let a=t[l];r.append("gallery_gallery["+l+"]",a)}for(let a in e)if(e.hasOwnProperty(a)&&a!=="categories"){let o=e[a];o===null&&(a==="weight"||a==="length"||a==="height"||a==="width"||a==="quantity"||a==="cost_price"||a==="retail_price")&&(o=0),r.append(a,o)}const i={headers:{"Content-Type":"multipart/form-data"}};try{await c("put",`/api/galleries/${e.id}`,r,i),y.push({name:"gallery.index"}),showToast("Gallery updated successfully","success")}catch(a){s.value=a}finally{n.value=!1}},deleteGallery:async e=>{m.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/galleries/${e}`).then(()=>{p(),y.push({name:"gallery.index"}),showToast("Gallery deleted successfully","success")})},onCancel(){console.log("Cancel")}})},deleteGalleryImage:async e=>{m.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/gallery-images/${e}`).then(()=>{p(),y.go(0),showToast("Image deleted successfully","success")}).catch(()=>{showToast("Something went wrong","error")})},onCancel(){console.log("Cancel")}})},validationErrors:s,isLoading:n}}export{k as u};
