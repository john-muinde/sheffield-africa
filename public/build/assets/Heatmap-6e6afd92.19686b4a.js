import{c as w}from"./tools-b40e92cf.4881bf31.js";import{p as f,ab as e,u as g,s as b,a0 as M}from"./app-setting.fcc8ce06.js";import"./_commonjsHelpers.f037b798.js";const E=f({name:"GmapsHeatmap",props:{data:{type:Object,default:void 0},options:{type:Object,default:void 0}},emits:{mounted:t=>!0,unmounted:t=>!0},setup(t,{emit:s}){const d=e("$getAPI"),y=e("$getMap"),h=e("$handleError"),l=o=>h(o,"Heatmap");let a=null;const n=o=>o.map(i=>({location:new google.maps.LatLng(i.lat,i.lng),weight:i.weight||1})),p=()=>{var o,i,u,r,m,v,c;return{map:y(),data:t.data?n(t.data):(o=t.options)!=null&&o.data?n(t.options.data):[],dissipating:((i=t.options)==null?void 0:i.dissipating)===void 0||(u=t.options)==null?void 0:u.dissipating,gradient:((r=t.options)==null?void 0:r.gradient)||void 0,maxIntensity:((m=t.options)==null?void 0:m.maxIntensity)||void 0,opacity:((v=t.options)==null?void 0:v.opacity)||void 0,radius:((c=t.options)==null?void 0:c.radius)||void 0}};return d().visualization?(g(()=>t.options,o=>o===void 0?null:a==null?void 0:a.setOptions(p()),{deep:!0}),g(()=>t.data,o=>o===void 0||w(o,a==null?void 0:a.getData())?null:a==null?void 0:a.setData(n(o)),{deep:!0}),b(()=>{try{a=new(d()).visualization.HeatmapLayer(p()),s("mounted",a)}catch{l(new Error("There was a problem creating the heatmap."))}}),M(()=>{a&&s("unmounted",a),a&&a.setMap(null)}),()=>{}):(l(new Error("Visualization library not included in initial setup (main.ts)")),()=>{})}});export{E as default};
