import{bU as k,r as l,c as $,bK as P,R as B,bB as u,bC as p,bD as e,bI as c,ah as o,e as N,bP as S,bJ as f,Q as T,bG as D}from"./index-85e2ec5a.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-de833af9.js";const E={class:"own-product position-relative px-2 product-card"},I={class:"savings-badge"},K={class:"product-image-container"},M={key:0,class:"image-skeleton"},z=["alt"],A={class:"product-details"},V={class:"text-start product-name"},j={class:"text-start text-muted product-description"},F={class:"pricing-section"},q={class:"fw-bold text-center text-muted original-price"},G={class:"price-tag bg-danger fw-bold text-uppercase"},J={class:"product-action-image"},O={class:"btn-text"},Q={key:0,class:"btn-loading-icon"},R={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(b){const s=b.product,C=k(),n=l(!1),_=l(!1),m=l(!1),x=$(()=>n.value?"Adding...":"Add to Cart"),v=r=>new Intl.NumberFormat("en-KE").format(r),w=(r,t)=>Math.round((r-t)/r*100),h=r=>{if(!n.value){n.value=!0;try{const t=window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"});C.dispatch("cart/addToCart",r),t.fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}})}catch(t){console.error(t),toast.fire({icon:"error",title:"Failed to add item to cart",padding:"2em",customClass:{title:"swal-title-class"}})}finally{n.value=!1}}},y=(r,t,d,g)=>{let a=t.replace(/ /g,"-").replace(/\//g,"-");a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase();let i=d.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return i=i.replace(/-+/g,"-"),i=i.replace(/^-+|-+$/g,""),`/kitchen/product/${r}/${a}-${i}`};return(r,t)=>{const d=P("router-link"),g=B("lazy");return u(),p("div",E,[e("span",I," Save "+c(w(o(s).cost_price,o(s).retail_price))+"% ",1),e("div",K,[N(d,{to:y(o(s).id,o(s).name,o(s).model_number),class:"d-flex justify-content-center align-items-center mt-2"},{default:S(()=>[m.value?f("",!0):(u(),p("div",M)),T(e("img",{alt:o(s).name,class:"img img-fluid product-image",onLoad:t[0]||(t[0]=a=>m.value=!0)},null,40,z),[[g,"/storage/"+o(s).main_image_path]])]),_:1},8,["to"])]),e("div",A,[e("span",V,c(o(s).name),1),e("span",j,c(o(s).model_number),1)]),e("div",F,[e("span",q," KES "+c(v(o(s).cost_price)),1),e("div",G," KES "+c(v(o(s).retail_price)),1),e("div",J,[e("button",{class:D(["btn-product btn-cart",{adding:n.value}]),onClick:t[1]||(t[1]=a=>h(o(s))),onMouseenter:t[2]||(t[2]=a=>_.value=!0),onMouseleave:t[3]||(t[3]=a=>_.value=!1)},[e("span",O,c(x.value),1),n.value?(u(),p("div",Q,t[4]||(t[4]=[e("span",{class:"spinner"},null,-1)]))):f("",!0)],34)])]),t[5]||(t[5]=e("button",{id:"scroll-top",title:"Back to Top"},[e("i",{class:"icon-arrow-up"})],-1))])}}},Y=L(R,[["__scopeId","data-v-865a9e49"]]);export{Y as default};
