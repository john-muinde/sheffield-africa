import{d as E,M as c,ah as P,r as C,w as $,o as M,P as D,bF as S,bG as j,bH as h,bK as m,bI as B,a3 as b}from"./index.fb9dc0c3.js";import{c as G}from"./tools-b40e92cf.4881bf31.js";import{s as L}from"./_plugin-vue_export-helper-dad06003.469021ef.js";var O=Object.defineProperty,T=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t,o)=>(T(e,typeof t!="symbol"?t+"":t,o),o);class V extends globalThis.google.maps.OverlayView{constructor(t,o,r){super(),a(this,"position"),a(this,"content"),a(this,"onAdd",()=>{const n=this.getPanes();if(!n)throw new Error("Popup Class panes not found.");n.floatPane.appendChild(this.content)}),a(this,"onRemove",()=>this.content.parentElement?this.content.parentElement.removeChild(this.content):null),a(this,"draw",()=>{const n=this.getProjection().fromLatLngToDivPixel(new globalThis.google.maps.LatLng(this.position));if(!n)throw new Error("Popup Class divPosition not found.");this.content.style.left=n.x+"px",this.content.style.top=n.y+"px"}),a(this,"setPosition",n=>{this.position={...n},this.draw()}),this.position=t,this.content=o,r.OverlayView.preventMapHitsAndGesturesFrom(o)}}const A=E({name:"GmapsPopup",props:{background:{type:String,default:"#EEEEEE"},width:{type:String,default:"200px"},height:{type:String,default:"60px"},position:{type:Object,required:!0}},emits:{click:()=>!0,contextmenu:()=>!0,dblclick:()=>!0,mounted:e=>!0,unmounted:e=>!0},setup(e,{emit:t}){const o=c("$getAPI"),r=c("$getMap"),n=c("$handleError"),{background:d,width:s,height:g,position:f}=P(e),u=l=>n(l,"Popup"),p=C();let i=null;const v=()=>t("click"),w=()=>t("dblclick"),k=()=>t("contextmenu"),y=r(),x=o();return $(()=>e.position,l=>l===void 0||G(l,i==null?void 0:i.position)?null:i==null?void 0:i.setPosition(l),{deep:!0}),M(()=>{try{if(!p.value)return u(new Error("No root node found."));i=new V(f.value,p.value,x),i.setMap(y),t("mounted",i)}catch{u(new Error("There was a problem creating the popup."))}}),D(()=>{i&&t("unmounted",i),i&&i.setMap(null)}),{root:p,background:d,width:s,height:g,handleClick:v,handleDblclick:w,handleContextmenu:k}}});function H(e,t,o,r,n,d){return S(),j("div",{ref:"root",class:"gmaps-popup-container",onClick:t[0]||(t[0]=b((...s)=>e.handleClick&&e.handleClick(...s),["prevent"])),onDblclick:t[1]||(t[1]=b((...s)=>e.handleDblclick&&e.handleDblclick(...s),["prevent"])),onContextmenu:t[2]||(t[2]=(...s)=>e.handleContextmenu&&e.handleContextmenu(...s))},[h("div",{class:"gmaps-popup-bubble-anchor",style:m(`color: ${e.background};`)},[h("div",{class:"gmaps-popup-bubble",style:m(`background: ${e.background}; maxWidth:${e.width}; maxHeight:${e.height};`)},[B(e.$slots,"default")],4)],4)],544)}const I=L(A,[["render",H]]);export{I as default};
