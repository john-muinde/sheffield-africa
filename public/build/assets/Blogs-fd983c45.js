import{a as T,v as e}from"./index-0d6930bf.js";import"./use-meta-44934223.js";import{C as _}from"./ContentState-1258fa9e.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-23102255.js";import"./transition-167be84b.js";const M={class:"main"},D={class:"page-content"},L={class:"container"},S={class:"row"},z={class:"col-lg-10 offset-lg-1"},$={key:3,class:"row blogs-main-page-section"},F={class:"entry entry-grid"},q={class:"entry-media entry-gallery"},R=["src"],j={class:"entry-body"},A={class:"entry-title"},H={class:"entry-content"},G={class:"mb-2"},J={key:4,class:"row"},K={class:"col-md-12"},O={"aria-label":"Page navigation"},Q={class:"pagination justify-content-center"},U={class:"page-item-total"},W={__name:"Blogs",setup(X){const s=T(),l=e.ref(s.params.page?parseInt(s.params.page):1),h=e.ref(9),f=e.ref(0),m=e.ref([]),u=e.ref(s.params.id?parseInt(s.params.id):1),N=e.ref([]),d=e.ref(!1),y=e.ref(null),g=async()=>{d.value=!0;try{const t=await axios.get("/api/get-blogs",{params:{page:l.value,per_page:h.value,category_id:u.value}});m.value=t.data.data,f.value=t.data.total}catch(t){t.value=t,console.error(t)}finally{d.value=!1}},V=async()=>{try{const t=await axios.get("/api/get-blog-sidebar",{});N.value=t.data.other_blogs}catch(t){console.error(t)}},p=(t,r)=>{let o=r.replace(/ /g,"-").replace(/\//g,"-");return o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase(),`/media/blogs/${t}/${o}`},v=t=>`/media/blogs/page/${t}`,c=e.computed(()=>Math.ceil(f.value/h.value)),i=e.ref([]),k=()=>{l.value>1&&l.value--},E=()=>{l.value<c.value&&l.value++},x=t=>{l.value=t},b=()=>{i.value=m.value},B=t=>Number.isInteger(t),P=e.computed(()=>{const t=[];l.value>1&&t.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),n=Math.min(o+5-1,c.value);n-o<5-1&&(o=Math.max(1,n-5+1));for(let a=o;a<=n;a++)t.push(a);return l.value<c.value&&t.push("Next"),t}),C=t=>{const r=document.createElement("div");r.innerHTML=t;const o=r.querySelectorAll("p");for(const n of o){const a=n.textContent.trim();if(a.length>50)return a.length>140?a.slice(0,144)+"...":a}return""},w=t=>t.length>5?t.length>35?t.slice(0,35)+"...":t:"";return e.onMounted(()=>{g(),V()}),e.watch(l,g),e.watch(m,b),e.watchEffect(()=>{const t=s.params;s.query,t.id!==""&&u.value!==t.id&&(l.value=1,u.value=t.id?parseInt(t.id):1,t.page!==""&&l.value!==t.page&&(l.value=t.page?parseInt(t.page):1),g())}),(t,r)=>{const o=e.resolveComponent("router-link"),n=e.resolveDirective("lazy");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("main",M,[e.createElementVNode("div",D,[e.createElementVNode("div",L,[e.createElementVNode("div",S,[e.createElementVNode("div",z,[r[4]||(r[4]=e.createElementVNode("h2",{class:"about-us-title"}," Blogs ",-1)),e.createVNode(o,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:e.withCtx(()=>r[0]||(r[0]=[e.createElementVNode("i",{class:"icon-long-arrow-left"},null,-1),e.createElementVNode("span",null,"Back to Media Center",-1)])),_:1}),r[5]||(r[5]=e.createElementVNode("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),d.value?(e.openBlock(),e.createBlock(_,{key:0,type:"loading","content-type":"Blog Posts"})):e.createCommentVNode("",!0),!i.value.length&&!d.value?(e.openBlock(),e.createBlock(_,{key:1,type:"empty","content-type":"Blog Posts"})):e.createCommentVNode("",!0),y.value?(e.openBlock(),e.createBlock(_,{key:2,type:"error","content-type":"Blog Posts"})):e.createCommentVNode("",!0),i.value.length?(e.openBlock(),e.createElementBlock("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.id,class:"entry-item col-sm-6 col-lg-4"},[e.createElementVNode("article",F,[e.createElementVNode("figure",q,[e.createVNode(o,{to:p(a.id,a.name)},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("img",{src:"/storage/"+a.main_image_path,alt:"image desc"},null,8,R),[[n,"/storage/"+a.main_image_path,"src"]])]),_:2},1032,["to"])]),e.createElementVNode("div",j,[e.createElementVNode("h2",A,[e.createVNode(o,{class:"text-primary",to:p(a.id,a.name)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(w(a.name)),1)]),_:2},1032,["to"])]),e.createElementVNode("div",H,[e.createElementVNode("div",G,e.toDisplayString(C(a.excerpt)),1),e.createVNode(o,{class:"btn btn-primary",to:p(a.id,a.name)},{default:e.withCtx(()=>r[1]||(r[1]=[e.createTextVNode(" Read More "),e.createElementVNode("i",{class:"icon-long-arrow-right"},null,-1)])),_:2},1032,["to"])])])])]))),128))])):e.createCommentVNode("",!0),i.value.length?(e.openBlock(),e.createElementBlock("div",J,[e.createElementVNode("div",K,[e.createElementVNode("nav",O,[e.createElementVNode("ul",Q,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:l.value===1}])},[e.createVNode(o,{class:"page-link page-link-prev",to:v(l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:k},{default:e.withCtx(()=>r[2]||(r[2]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,a=>(e.openBlock(),e.createElementBlock("li",{key:a,class:e.normalizeClass(["page-item",{active:a===l.value}])},[B(a)?(e.openBlock(),e.createBlock(o,{key:0,class:"page-link",to:v(a),onClick:Y=>x(a)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",U," of "+e.toDisplayString(c.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:l.value===c.value}])},[e.createVNode(o,{class:"page-link page-link-next",to:v(l.value+1),"aria-label":"Next",onClick:E},{default:e.withCtx(()=>r[3]||(r[3]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):e.createCommentVNode("",!0)])])])])])])}}},re=I(W,[["__scopeId","data-v-b4185591"]]);export{re as default};
