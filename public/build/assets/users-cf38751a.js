import{v as c,b as y,c as o}from"./index-861d4cc9.js";import{M as h}from"./index-38316e46.js";function _(){const i=c.ref([]),d=c.ref({id:"",name:"",email:"",role:"",password:"",confirm_password:""}),n=y(),r=c.ref({}),t=c.ref(!1),p=async({page:e=1,search_id:s="",search_title:u="",search_global:a="",order_column:f="created_at",order_direction:v="desc"}={})=>{try{const l=await o("get",`/api/users?page=${e}&search_id=${s}&search_title=${u}&search_global=${a}&order_column=${f}&order_direction=${v}`);i.value=l}catch(l){r.value=l}};return{users:i,user:d,getUsers:p,getUser:async e=>{try{const s=await o("get",`/api/users/${e}`);d.value=s}catch(s){r.value=s}},storeUser:async e=>{if(t.value)return;t.value=!0,r.value={};let s=new FormData;for(let a in e)e.hasOwnProperty(a)&&s.append(a,e[a]);const u={headers:{"content-type":"multipart/form-data"}};try{await o("post","/api/users",s,u),n.push({name:"users.index"}),showToast("User saved successfully","success")}catch(a){r.value=a}finally{t.value=!1}},updateUser:async e=>{if(!t.value){t.value=!0,r.value={};try{await o("put",`/api/users/${e.id}`,e),n.push({name:"users.index"}),showToast("User updated successfully","success")}catch(s){r.value=s}finally{t.value=!1}}},deleteUser:async e=>{h.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/users/${e}`).then(()=>{p(),n.push({name:"users.index"}),showToast("User deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:r,isLoading:t}}export{_ as u};
