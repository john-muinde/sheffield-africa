import{z as c,ca as g,l as E,ch as r}from"./app-setting.a1373287.js";function P(){const p=c([]),v=c([]),f=c({name:"",is_published:"",description:""}),d=g(),l=c({}),a=c(!1),i=E("$swal"),h=async(e=1,s="",t="",o="",n="created_at",u="desc")=>{r.get("/api/events?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+o+"&order_column="+n+"&order_direction="+u).then(m=>{p.value=m.data})};return{eventList:v,events:p,event:f,getEvents:h,getEventList:async()=>{r.get("/api/event-list").then(e=>{v.value=e.data.data})},getEvent:async e=>{r.get("/api/events/"+e).then(s=>{f.value=s.data.data})},storeEvent:async e=>{if(console.log(e),a.value)return;a.value=!0,l.value={};let s=new FormData;for(let n in e)e.hasOwnProperty(n)&&s.append(n,e[n]);const t={headers:{"content-type":"multipart/form-data"}};console.log(s);const o=localStorage.getItem("token");o&&(r.defaults.headers.common.Authorization="Bearer "+o),r.post("/api/events",s,t).then(n=>{d.push({name:"events.create"}),e.name=null,e.location=null,e.startDate=null,e.endDate=null,e.description=null,e.main_image=null,e.is_published=null,i({icon:"success",title:"Event saved successfully"})}).catch(n=>{var u;(u=n.response)!=null&&u.data&&(l.value=n.response.data.errors)}).finally(()=>a.value=!1)},updateEvent:async e=>{if(console.log(e),a.value)return;a.value=!0,l.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);console.log(s),r.put("/api/events/"+e.id,e).then(t=>{d.push({name:"events.index"}),i({icon:"success",title:"Event updated successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(l.value=t.response.data.errors)}).finally(()=>a.value=!1)},deleteEvent:async e=>{i({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&r.delete("/api/events/"+e).then(t=>{h(),d.push({name:"events.index"}),i({icon:"success",title:"Event deleted successfully"})}).catch(t=>{i({icon:"error",title:"Something went wrong"})})})},validationErrors:l,isLoading:a}}export{P as u};
