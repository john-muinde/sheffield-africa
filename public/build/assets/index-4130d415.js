import{a as U,v as e,d as O}from"./index-27321865.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as A}from"./vue-draggable-next.esm-bundler-c264207c.js";import"./use-meta-34728d76.js";import{a as V}from"./vee-validate-97359948.js";import{u as F}from"./categories-fe81fe9b.js";import{u as $}from"./products-27964b1c.js";import"./_commonjsHelpers-23102255.js";import"./index-ac05b074.js";const q={class:"layout-px-spacing"},H={class:"row layout-top-spacing"},R={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},G={class:"panel br-6 p-0"},J={class:"panel-body"},K={class:"row"},Q={class:"form-group col-md-1"},W={class:"form-group col-md-3"},X={class:"form-group col-md-3"},Y={class:"form-group col-md-5"},Z={class:"table-responsive"},ee={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},te={role:"rowgroup"},oe={role:"row"},ae={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},le={role:"rowgroup"},re={key:0,"aria-colindex":"0",class:"handle"},ne={"aria-colindex":"1",role:"cell"},se=["src"],ie={"aria-colindex":"1",role:"cell"},de={"aria-colindex":"2",role:"cell"},ce={"aria-colindex":"3",role:"cell"},ue={"aria-colindex":"4",role:"cell"},me={"aria-colindex":"4",role:"cell"},pe={key:0,class:"badge badge-success inv-status"},ge={key:1,class:"badge badge-danger inv-status"},Ve={"aria-colindex":"5",role:"cell"},ve={"aria-colindex":"6",role:"cell",class:"text-center"},Ne=["onClick"],Ee={"aria-label":"Page navigation",style:{"margin-top":"20px"}},be={class:"pagination justify-content-center"},Ie={__name:"index",setup(fe){const{categoryList:k,getMainCategoryList:_,categoryMainList:w,getSelectedCategoryList:P}=F(),{deleteProduct:C}=$(),d=U(),r=e.ref(d.params.page?parseInt(d.params.page):1),x=e.ref(0),B=e.ref(0),v=e.ref(d.params.id?parseInt(d.params.id):1),N=e.ref([]),u=e.ref([]),{value:E}=V("perPage",null,{initialValue:"20"}),{value:h}=V("filter_category_id",null,{initialValue:""}),{value:m}=V("main_category",null,{initialValue:""}),{value:M}=V("search",null,{initialValue:""}),l=e.reactive({perPage:E,filter_category_id:h,main_category:m,search:M}),b=async()=>{try{l.main_category!=""&&l.search==""&&(l.perPage=1e4);const a=await O.get("/api/get-products-admin",{params:{page:r.value,per_page:l.perPage,category_id:v.value,mainCategory:l.main_category.id,search:l.search,filter_category_id:l.filter_category_id&&l.filter_category_id.id||null}});x.value=a.data.categories.total,B.value=a.data.categories.data.length,N.value=a.data.categories.data}catch(a){console.error(a)}},c=e.computed(()=>Math.ceil(x.value/E.value)),i=e.ref([]),S=()=>{r.value>1&&r.value--},y=()=>{r.value<c.value&&r.value++},D=a=>{r.value=a},p=()=>{i.value=N.value.slice(0,0+E.value)},I=a=>Number.isInteger(a),L=e.computed(()=>{const a=[];r.value>1&&a.push("Prev");let n=Math.max(1,r.value-Math.floor(5/2)),s=Math.min(n+5-1,c.value);s-n<5-1&&(n=Math.max(1,s-5+1));for(let o=n;o<=s;o++)a.push(o);return r.value<c.value&&a.push("Next"),a}),g=(a,t)=>`/admin/products/page/${t}`;e.onMounted(()=>{b(),_()}),e.watch(r,b),e.watch(m,a=>{if(m){const t=l.main_category.id;l.filter_category_id=null,P(t)}}),e.watch(l,p),e.watch(m,p),e.watch(h,p),e.watch(N,p),e.watchEffect(()=>{const a=d.params;d.query,a.id!==""&&v.value!==a.id&&(r.value=1,v.value=a.id?parseInt(a.id):1,a.page!==""&&r.value!==a.page&&(r.value=a.page?parseInt(a.page):1),b())});const T=async a=>{try{const t=await axios.post("/api/products-update-order",{data:a})}catch(t){console.error("Error saving data:",t)}},j=()=>{i.value.forEach(a=>{a.order=null})},z=a=>{const t=i.value.map(n=>n.id);T(t),i.value.forEach(n=>{const s=t.indexOf(n.id);n.order=s+1})};return(a,t)=>{const n=e.resolveComponent("multiselect"),s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",q,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[5]||(t[5]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Products")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"View Products")])])])])])],-1))])),e.createElementVNode("div",H,[e.createElementVNode("div",R,[e.createElementVNode("div",G,[t[26]||(t[26]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"flex justify-between items-center"},[e.createElementVNode("h3",{class:"text-lg font-bold"}," View Products "),e.createElementVNode("button",{class:"bg-blue-500 text-white font-semibold py-2 px-4 rounded hover:bg-blue-600"}," Add Product ")])],-1)),e.createElementVNode("div",J,[e.createElementVNode("div",K,[e.createElementVNode("div",Q,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Per Page",-1)),e.withDirectives(e.createElementVNode("select",{id:"perpage","onUpdate:modelValue":t[0]||(t[0]=o=>l.perPage=o),class:"form-control form-select select"},t[6]||(t[6]=[e.createStaticVNode('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[e.vModelSelect,l.perPage]])]),e.createElementVNode("div",W,[t[8]||(t[8]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Segment",-1)),e.createVNode(n,{modelValue:l.main_category,"onUpdate:modelValue":t[1]||(t[1]=o=>l.main_category=o),options:e.unref(w),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",X,[t[9]||(t[9]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Main Category",-1)),e.createVNode(n,{modelValue:l.filter_category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>l.filter_category_id=o),options:e.unref(k),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",Y,[t[10]||(t[10]=e.createElementVNode("label",{for:"post-name"},"Search",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[3]||(t[3]=o=>l.search=o),type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[e.vModelText,l.search]])])]),e.createElementVNode("div",Z,[e.createElementVNode("table",ee,[e.createElementVNode("thead",te,[e.createElementVNode("tr",oe,[l.main_category!==""?(e.openBlock(),e.createElementBlock("th",ae,t[11]||(t[11]=[e.createElementVNode("div",null,null,-1)]))):e.createCommentVNode("",!0),t[12]||(t[12]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e.createElementVNode("div",null,"Image")],-1)),t[13]||(t[13]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e.createElementVNode("div",null,"Name")],-1)),t[14]||(t[14]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e.createElementVNode("div",null,"Make")],-1)),t[15]||(t[15]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e.createElementVNode("div",null,"Model Number")],-1)),t[16]||(t[16]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e.createElementVNode("div",null,"Sku")],-1)),t[17]||(t[17]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"6"},[e.createElementVNode("div",null,"Is Published")],-1)),t[18]||(t[18]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"7"},[e.createElementVNode("div",null,"Created At")],-1)),t[19]||(t[19]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"8","aria-label":"Action",class:"text-center"},[e.createElementVNode("div",null,"action")],-1))])]),e.createElementVNode("tbody",le,[e.createVNode(e.unref(A),{id:"left-lovehandles",modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value=o),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:j,onEnd:z},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,o=>{var f;return e.openBlock(),e.createElementBlock("tr",{key:o.id,role:"row",class:""},[l.main_category!==""?(e.openBlock(),e.createElementBlock("td",re,t[20]||(t[20]=[e.createElementVNode("div",null,[e.createElementVNode("span",null,[e.createElementVNode("i",{class:"far fa-clone"})])],-1)]))):e.createCommentVNode("",!0),e.createElementVNode("td",ne,[e.createElementVNode("img",{style:{width:"80px"},src:"/storage/"+o.main_image_path,class:"rounded profile-img",alt:"avatar"},null,8,se)]),e.createElementVNode("td",ie,e.toDisplayString(o==null?void 0:o.name),1),e.createElementVNode("td",de,e.toDisplayString((f=o.product_brand)==null?void 0:f.name),1),e.createElementVNode("td",ce,e.toDisplayString(o.model_number),1),e.createElementVNode("td",ue,e.toDisplayString(o.sku),1),e.createElementVNode("td",me,[o.is_published===1?(e.openBlock(),e.createElementBlock("span",pe,"Published")):e.createCommentVNode("",!0),o.is_published!==1?(e.openBlock(),e.createElementBlock("span",ge,"Not Published")):e.createCommentVNode("",!0)]),e.createElementVNode("td",Ve,e.toDisplayString(o.created_at),1),e.createElementVNode("td",ve,[e.createVNode(s,{to:{name:"products.edit",params:{id:o.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:e.withCtx(()=>t[21]||(t[21]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e.createElementVNode("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e.createElementVNode("a",{href:"javascript:;",class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",onClick:e.withModifiers(xe=>e.unref(C)(o.id),["prevent"])},t[22]||(t[22]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e.createElementVNode("polyline",{points:"3 6 5 6 21 6"}),e.createElementVNode("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Ne)])])}),128))]),_:1},8,["modelValue"])])])]),e.createElementVNode("nav",Ee,[e.createElementVNode("ul",be,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===1}])},[e.createVNode(s,{class:"page-link page-link-prev",to:g(u.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:S},{default:e.withCtx(()=>t[23]||(t[23]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value,o=>(e.openBlock(),e.createElementBlock("li",{key:o,class:e.normalizeClass(["page-item",{active:o===r.value}])},[I(o)?(e.openBlock(),e.createBlock(s,{key:0,class:"page-link",to:g(u.value.id,o),onClick:f=>D(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===c.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:g(u.value.id,c.value),"aria-label":"Next",onClick:y},{default:e.withCtx(()=>t[24]||(t[24]=[e.createTextVNode(" Last "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===c.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:g(u.value.id,r.value+1),"aria-label":"Next",onClick:y},{default:e.withCtx(()=>t[25]||(t[25]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{Ie as default};
