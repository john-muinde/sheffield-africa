import{a3 as N,x as r,ac as g,P as B,Q as U,y as F,z as c,a4 as O,o as m,c as f,a2 as j,a as e,p as z,al as Q,i as x,u as d,l as R,aq as T,F as Y,g as A,t as G,Y as H}from"./app-setting.27140836.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as J}from"./vue-draggable-next.esm-bundler.4cd0506d.js";/* empty css                        */import{u as K}from"./categories.286ba628.js";import{M as C}from"./vue3-multiselect.umd.min.7157806b.js";/* empty css                         */import"./_commonjsHelpers.f037b798.js";const W={class:"layout-px-spacing"},X=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1),Z={class:"row layout-top-spacing"},$={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ee={class:"panel br-6 p-0"},ae=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1),oe={class:"panel-body"},te={class:"row"},se={class:"form-group col-md-1"},le=e("label",{for:"post-category",class:"form-label"},"Per Page",-1),re=H('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6),ie=[re],ne={class:"form-group col-md-3",style:{display:"none"}},ce=e("label",{for:"post-category",class:"form-label"},"Segment",-1),de={class:"form-group col-md-3",style:{display:"none"}},ue=e("label",{for:"post-category",class:"form-label"},"Main Category",-1),pe=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1),ge={class:"table-responsive"},me={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},_e=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1),ve={role:"rowgroup"},he=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1),ye={"aria-colindex":"1",role:"cell"},qe={__name:"category-sequence",setup(be){const{getCategoryList:fe,categoryList:S,getMainCategoryList:xe,categoryMainList:M,getSelectedCategoryList:I}=K(),l=N();r(l);const i=r(l.params.page?parseInt(l.params.page):1),V=r(l.params.id?parseInt(l.params.id):0);r(0),r(0);const _=r(l.params.id?parseInt(l.params.id):1),v=r([]),D=r([]),{value:P}=g("perPage",null,{initialValue:"20"}),{value:w}=g("filter_category_id",null,{initialValue:""}),{value:u}=g("main_category",null,{initialValue:""}),{value:k}=g("search",null,{initialValue:""}),s=B({perPage:P,filter_category_id:w,main_category:u,search:k}),h=async()=>{try{s.main_category==""&&(s.perPage=1e4),console.log(V);const a=await axios.get("/api/get-solutions-categories",{params:{page:i.value,per_page:s.perPage,category_id:_.value,mainCategory:s.main_category.id,solution_id:V.value,search:s.search}});v.value=a.data.categories,D.value=a.data.the_solution}catch(a){console.error(a)}},n=r([]),p=()=>{n.value=v.value.slice(0,0+P.value)};U(()=>{const a=[];i.value>1&&a.push("Prev");let o=Math.max(1,i.value-Math.floor(5/2)),y=Math.min(o+5-1,totalPages.value);y-o<5-1&&(o=Math.max(1,y-5+1));for(let b=o;b<=y;b++)a.push(b);return i.value<totalPages.value&&a.push("Next"),a}),F(()=>{h()}),c(i,h),c(u,a=>{if(u){const t=s.main_category.id;s.filter_category_id=null,I(t)}}),c(s,p),c(u,p),c(w,p),c(v,p),O(()=>{const a=l.params;l.query,a.id!==""&&_!==a.id&&(i.value=1,_.value=a.id?parseInt(a.id):1,a.page!==""&&i!==a.page&&(i.value=a.page?parseInt(a.page):1),h())});const L=async a=>{try{const t=await axios.post("/api/solutions-categories-update-order",{data:a})}catch(t){console.error("Error saving data:",t)}},q=()=>{n.value.forEach(a=>{a.order=null})},E=a=>{const t=n.value.map(o=>o.id);console.log(t),L(t)};return(a,t)=>(m(),f("div",W,[(m(),j(T,{to:"#breadcrumb"},[X])),e("div",Z,[e("div",$,[e("div",ee,[ae,e("div",oe,[e("div",te,[e("div",se,[le,z(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.perPage=o),id:"perpage",class:"form-control form-select select"},ie,512),[[Q,s.perPage]])]),e("div",ne,[ce,x(d(C),{modelValue:s.main_category,"onUpdate:modelValue":t[1]||(t[1]=o=>s.main_category=o),options:d(M),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",de,[ue,x(d(C),{modelValue:s.filter_category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>s.filter_category_id=o),options:d(S),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),pe]),e("div",ge,[e("table",me,[_e,e("tbody",ve,[x(d(J),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),animation:200,onStart:q,onEnd:E},{default:R(()=>[(m(!0),f(Y,null,A(n.value,o=>(m(),f("tr",{key:s.id,role:"row",class:""},[he,e("td",ye,G(o.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])]))}};export{qe as default};
