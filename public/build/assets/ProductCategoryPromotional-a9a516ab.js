import{bT as te,r as n,c as G,o as se,w as L,aa as ae,bK as oe,bB as r,bC as c,bD as e,e as x,bP as C,bI as u,ab as m,Q as le,ca as ie,bV as ne,a7 as w,bL as V,bG as $,bJ as H,bS as de}from"./index-fb7a5e42.js";import{b as re}from"./use-meta-e4427254.js";import ce from"./ProductCard-addb58f1.js";import"./_commonjsHelpers-de833af9.js";import"./_plugin-vue_export-helper-c27b6911.js";const ue={class:"main"},ve={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},pe={class:"container d-flex align-items-center"},_e={class:"breadcrumb"},me={class:"breadcrumb-item"},be={class:"breadcrumb-item"},he={class:"breadcrumb-item active","aria-current":"page"},ge={class:"page-content"},fe={class:"container"},ke={class:"row"},xe={class:"col-lg-10"},Ce={class:"toolbox"},Pe={class:"toolbox-left"},we={class:"toolbox-info"},Ve={class:"toolbox-right"},Ne={class:"toolbox-sort"},Be={class:"select-custom"},Se={class:"products mb-3 products-section"},ye={class:"row"},Me={"aria-label":"Page navigation"},Ae={class:"pagination justify-content-center"},Le={class:"page-item-total"},$e={class:"col-lg-2 order-lg-first"},Oe={class:"sidebar sidebar-shop sidebar-shop-category"},Te={key:0,class:"widget widget-collapsible"},De={id:"widget-1",class:"show"},Ie={class:"widget-body"},Ee={class:"filter-items filter-items-count"},Fe={class:"custom-control custom-checkbox"},qe=["id","value","onChange"],Ze=["for"],je={class:"item-count"},ze={class:"widget widget-collapsible"},Ge={id:"widget-4",class:"show"},He={class:"widget-body"},Je={class:"filter-items"},Ke={class:"custom-control custom-checkbox"},Qe=["id","value","onChange"],Re=["for"],at={__name:"ProductCategoryPromotional",setup(Ue){const b=te(),l=n(b.params.page?parseInt(b.params.page):1),O=n(12),N=n(0),B=n([]),T=n(0),v=n(b.params.id?parseInt(b.params.id):1),S=n([]),D=n([]),d=n([]),p=n([]),_=n([]),P=n(""),y=async()=>{try{const a={[v.value]:p.value[v.value]||[]};p.value=a;const t={[v.value]:_.value[v.value]||[]};_.value=t;const o=await axios.get("/api/get-products",{params:{page:l.value,per_page:O.value,category_id:v.value,checkedCategories:p.value,checkedBrands:_.value,selectedSortOption:P.value}});B.value=o.data.products.data,N.value=o.data.products.total,T.value=o.data.products.per_page,S.value=o.data.categories,D.value=o.data.brands,d.value=o.data.the_category}catch(a){console.error(a)}};function J(a){let t=d.value.id;t in p.value||(p.value[t]=[]);const o=p.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function K(a){let t=d.value.id;t in _.value||(_.value[t]=[]);const o=_.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function Q(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),p.value=[],_.value=[],P.value=null}const f=G(()=>Math.ceil(N.value/O.value)),I=n([]),R=()=>{l.value>1&&l.value--},U=()=>{l.value<f.value&&l.value++},W=a=>{l.value=a},M=(a,t,o)=>{if(t===void 0)return"/promotional-solutions";{let i=t.replace(/ /g,"-").replace(/\//g,"-");return i=i.replace(/-+/g,"-"),i=i.replace(/^-+|-+$/g,""),i=i.toLowerCase(),`/promotional-solutions/${a}/${i}/page/${o}`}},X=()=>{I.value=B.value},Y=a=>Number.isInteger(a),ee=G(()=>{const a=[];l.value>1&&a.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),i=Math.min(o+5-1,f.value);i-o<5-1&&(o=Math.max(1,i-5+1));for(let h=o;h<=i;h++)a.push(h);return l.value<f.value&&a.push("Next"),a});se(()=>{y()}),L(l,y),L(B,X),ae(()=>{const a=b.params;b.query,a.id!==""&&v.value!==a.id&&(l.value=1,v.value=a.id?parseInt(a.id):1,a.page!==""&&l.value!==a.page&&(l.value=a.page?parseInt(a.page):1),y())});const E=n("");return L(()=>{var a;return(a=d.value)==null?void 0:a.name},(a,t)=>{a!==t&&(E.value=a)}),re({title:E.value+"All you can get Promotions"}),(a,t)=>{var i,h,F,q,Z;const o=oe("router-link");return r(),c("main",ue,[e("nav",ve,[e("div",pe,[e("ol",_e,[e("li",me,[x(o,{to:"/"},{default:C(()=>t[1]||(t[1]=[m(" HOME ")])),_:1})]),e("li",be,[x(o,{to:"/promotional-solutions"},{default:C(()=>t[2]||(t[2]=[m(" All Promotions ")])),_:1})]),e("li",he,u((i=d.value)==null?void 0:i.name),1)])])]),e("div",ge,[e("div",fe,[e("div",ke,[e("div",xe,[e("div",Ce,[e("div",Pe,[e("div",we,[t[3]||(t[3]=m(" Showing ")),e("span",null,u(T.value)+" of "+u(N.value),1),t[4]||(t[4]=m(" Products "))])]),e("div",Ve,[e("div",Ne,[t[6]||(t[6]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",Be,[le(e("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=s=>P.value=s),name:"sortby",class:"form-control"},t[5]||(t[5]=[ne('<option value=""> Default </option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[ie,P.value]])])])])]),e("div",Se,[e("div",ye,[(r(!0),c(w,null,V(I.value,s=>(r(),c("div",{key:s==null?void 0:s.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[x(ce,{product:s},null,8,["product"])]))),128))])]),e("nav",Me,[e("ul",Ae,[e("li",{class:$(["page-item",{disabled:l.value===1}])},[x(o,{class:"page-link page-link-prev",to:M((h=d.value)==null?void 0:h.id,(F=d.value)==null?void 0:F.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:R},{default:C(()=>t[7]||(t[7]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),m(" Prev ")])),_:1},8,["to"])],2),(r(!0),c(w,null,V(ee.value,s=>{var g,k;return r(),c("li",{key:s,class:$(["page-item",{active:s===l.value}])},[Y(s)?(r(),de(o,{key:0,class:"page-link",to:M((g=d.value)==null?void 0:g.id,(k=d.value)==null?void 0:k.name,s),onClick:A=>W(s)},{default:C(()=>[m(u(s),1)]),_:2},1032,["to","onClick"])):H("",!0)],2)}),128)),e("li",Le," of "+u(f.value),1),e("li",{class:$(["page-item",{disabled:l.value===f.value}])},[x(o,{class:"page-link page-link-next",to:M((q=d.value)==null?void 0:q.id,(Z=d.value)==null?void 0:Z.name,l.value+1),"aria-label":"Next",onClick:U},{default:C(()=>t[8]||(t[8]=[m(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",$e,[e("div",Oe,[e("div",{class:"widget widget-clean"},[t[9]||(t[9]=e("label",null,"Filters:",-1)),e("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:Q}," Clean All ")]),S.value.length?(r(),c("div",Te,[t[10]||(t[10]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",De,[e("div",Ie,[e("div",Ee,[(r(!0),c(w,null,V(S.value,s=>(r(),c("div",{key:s==null?void 0:s.id,class:"filter-item"},[e("div",Fe,[e("input",{id:"cat-"+(s==null?void 0:s.id),type:"checkbox",class:"custom-control-input",value:s==null?void 0:s.id,onChange:g=>J(s==null?void 0:s.id)},null,40,qe),e("label",{class:"custom-control-label",for:"cat-"+(s==null?void 0:s.id)},u(s==null?void 0:s.name),9,Ze)]),e("span",je,u(s.category_products_count),1)]))),128))])])])])):H("",!0),e("div",ze,[t[11]||(t[11]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",Ge,[e("div",He,[e("div",Je,[(r(!0),c(w,null,V(D.value,s=>{var g,k,A,j;return r(),c("div",{key:s==null?void 0:s.id,class:"filter-item"},[e("div",Ke,[e("input",{id:"brand-"+((g=s.product_brand)==null?void 0:g.id),type:"checkbox",class:"custom-control-input",value:(k=s.product_brand)==null?void 0:k.id,onChange:We=>{var z;return K((z=s.product_brand)==null?void 0:z.id)}},null,40,Qe),e("label",{class:"custom-control-label",for:"brand-"+((A=s.product_brand)==null?void 0:A.id)},u((j=s.product_brand)==null?void 0:j.name),9,Re)])])}),128))])])])])])])])])])])}}};export{at as default};
