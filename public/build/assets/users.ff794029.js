import{z as c,cb as h,ct as o}from"./app-setting.e7c0c170.js";import{$ as v}from"./Modal.e3116305.js";function x(){const i=c([]),d=c({id:"",name:"",email:"",role:"",password:"",confirm_password:""}),n=h(),t=c({}),a=c(!1),p=async({page:e=1,search_id:s="",search_title:u="",search_global:r="",order_column:f="created_at",order_direction:y="desc"})=>{try{const l=await o("get",`/api/users?page=${e}&search_id=${s}&search_title=${u}&search_global=${r}&order_column=${f}&order_direction=${y}`);i.value=l}catch(l){t.value=l}};return{users:i,user:d,getUsers:p,getUser:async e=>{try{const s=await o("get",`/api/users/${e}`);d.value=s}catch(s){t.value=s}},storeUser:async e=>{if(a.value)return;a.value=!0,t.value={};let s=new FormData;for(let r in e)e.hasOwnProperty(r)&&s.append(r,e[r]);const u={headers:{"content-type":"multipart/form-data"}};try{await o("post","/api/users",s,u),n.push({name:"users.index"}),showToast("User saved successfully","success")}catch(r){t.value=r}finally{a.value=!1}},updateUser:async e=>{if(!a.value){a.value=!0,t.value={};try{await o("put",`/api/users/${e.id}`,e),n.push({name:"users.index"}),showToast("User updated successfully","success")}catch(s){t.value=s}finally{a.value=!1}}},deleteUser:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/users/${e}`).then(()=>{p(),n.push({name:"users.index"}),showToast("User deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:t,isLoading:a}}export{x as u};
