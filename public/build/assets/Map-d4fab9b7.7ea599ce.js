import{d as T,r as b,ah as z,L as p,o as J,w as i,P as C,bF as u,bG as y,bI as S,bN as _,bW as k,bS as $,af as E,bL as B,bM as I,V as j,a2 as x,bH as V}from"./index.fb9dc0c3.js";import{s as L}from"./_plugin-vue_export-helper-dad06003.469021ef.js";import{A}from"./v3-gmaps.2a9408fe.js";import{a as H,y as c,c as P}from"./tools-b40e92cf.4881bf31.js";const Z={},D={class:"gmaps-error"};function G(t,r){return u(),y("span",D,[S(t.$slots,"default")])}const F=L(Z,[["render",G]]),R={},U={class:"gmaps-spinner"};function W(t,r){return u(),y("span",U)}const q=L(R,[["render",W]]),K={center:{lat:0,lng:0},zoom:2},Q=T({name:"GmapsMap",components:{MapSpinner:q,MapError:F},props:{center:{type:Object},clickableIcons:{type:Boolean},heading:{type:[String,Number]},mapTypeId:{type:[String,Object]},options:{type:Object,default:void 0},tilt:{type:[String,Number]},zoom:{type:[String,Number]},throttle:{type:[Number,String],default:100}},emits:{bounds_changed:t=>!0,center_changed:t=>!0,click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:()=>!0,dragend:()=>!0,dragstart:()=>!0,error:t=>!0,heading_changed:t=>!0,idle:()=>!0,isfractionalzoomenabled_changed:t=>!0,maptypeid_changed:t=>!0,mounted:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,projection_changed:()=>!0,renderingtype_changed:()=>!0,rightclick:t=>!0,tilesloaded:()=>!0,tilt_changed:t=>!0,unmounted:t=>!0,zoom_changed:t=>!0},setup(t,{emit:r}){let n=null,g=null;const h=[],v=b(),s=b(null),m=b(!1),{throttle:N}=z(t),f=H((e,o)=>{s.value=`[${o}]: ${e.message}`,r("error",s.value)},500),O=()=>{if(!g)throw new Error("vue3-gmaps :: getAPI() called before API loaded.");return g},w=()=>{if(!n)throw new Error("vue3-gmaps :: getMap() called before map loaded.");return n};p("$getAPI",O),p("$getMap",w),p("$getThrottle",()=>+t.throttle),p("$handleError",f);const M=e=>{const o=+N.value,a=google.maps.event;h.push(a.addListener(e,"bounds_changed",c(()=>{var d;return r("bounds_changed",((d=e.getBounds())==null?void 0:d.toJSON())||null)},o)),a.addListener(e,"center_changed",c(()=>{var d;return r("center_changed",((d=e.getCenter())==null?void 0:d.toJSON())||null)},o)),a.addListener(e,"drag",c(()=>r("drag"),o)),a.addListener(e,"mousemove",c(d=>{var l;return r("mousemove",((l=d.latLng)==null?void 0:l.toJSON())||null)},o)),a.addListener(e,"idle",c(()=>r("idle"),o)),a.addListener(e,"click",d=>{var l;return r("click",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"contextmenu",d=>{var l;return r("contextmenu",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"dblclick",d=>{var l;return r("dblclick",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"dragend",()=>r("dragend")),a.addListener(e,"dragstart",()=>r("dragstart")),a.addListener(e,"heading_changed",()=>r("heading_changed",e.getHeading()||null)),a.addListener(e,"isfractionalzoomenabled_changed",()=>r("isfractionalzoomenabled_changed",e.getZoom()||null)),a.addListener(e,"maptypeid_changed",()=>r("maptypeid_changed",e.getMapTypeId()||null)),a.addListener(e,"mouseout",d=>{var l;return r("mouseout",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"mouseover",d=>{var l;return r("mouseover",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"projection_changed",()=>r("projection_changed")),a.addListener(e,"renderingtype_changed",()=>r("renderingtype_changed")),a.addListener(e,"rightclick",d=>{var l;return r("rightclick",((l=d.latLng)==null?void 0:l.toJSON())||null)}),a.addListener(e,"tilesloaded",()=>r("tilesloaded")),a.addListener(e,"tilt_changed",()=>r("tilt_changed",e.getTilt()||null)),a.addListener(e,"zoom_changed",()=>r("zoom_changed",e.getZoom()||null)))};return J(()=>{A().then(e=>{g=e;const o={...K,...t.options};t.center&&(o.center=t.center),t.clickableIcons&&(o.clickableIcons=t.clickableIcons),t.heading&&(o.heading=t.heading),t.mapTypeId&&(o.mapTypeId=t.mapTypeId),t.tilt&&(o.tilt=t.tilt),t.zoom&&(o.zoom=t.zoom),n=new e.Map(v.value,o),n&&M(n),r("mounted",n),m.value=!0}).catch(e=>f(e,"Map"))}),i(()=>t.center,e=>{var o;return e===void 0||P(e,(o=n==null?void 0:n.getCenter())==null?void 0:o.toJSON())?null:n==null?void 0:n.setCenter(e)},{deep:!0}),i(()=>t.clickableIcons,e=>e===void 0||e==(n==null?void 0:n.getClickableIcons())?null:n==null?void 0:n.setClickableIcons(e)),i(()=>t.heading,e=>e===void 0||+e==(n==null?void 0:n.getHeading())?null:n==null?void 0:n.setHeading(+e)),i(()=>t.mapTypeId,e=>e===void 0||e==(n==null?void 0:n.getMapTypeId())?null:n==null?void 0:n.setMapTypeId(e)),i(()=>t.options,e=>e?n==null?void 0:n.setOptions(e):null),i(()=>t.tilt,e=>e===void 0||+e==(n==null?void 0:n.getTilt())?null:n==null?void 0:n.setTilt(+e)),i(()=>t.zoom,e=>e===void 0||+e==(n==null?void 0:n.getZoom())?null:n==null?void 0:n.setZoom(+e)),C(()=>{n&&r("unmounted",n),h.forEach(e=>e.remove()),n&&window.google.maps.event.clearInstanceListeners(n)}),{error:s,ready:m,mapEl:v}}}),X={style:{width:"100%",height:"100%"}},Y={ref:"mapEl",style:{width:"100%",height:"100%"}};function ee(t,r,n,g,h,v){const s=_("map-error"),m=_("map-spinner");return u(),y("div",X,[t.error?(u(),k(s,{key:0},{default:$(()=>[E(B(t.error),1)]),_:1})):t.ready?I("",!0):(u(),k(m,{key:1})),j(V("div",Y,null,512),[[x,t.ready&&!t.error]]),t.ready&&!t.error?S(t.$slots,"default",{key:2}):I("",!0)])}const le=L(Q,[["render",ee]]);export{le as default};
