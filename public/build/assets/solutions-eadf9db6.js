import{v as c,b as v,c as l}from"./index-2bbf2be9.js";import{M as y}from"./index-b8e96512.js";function C(){const g=c.ref([]),f=c.ref([]),m=c.ref({name:"",parent_id:"",description:"",is_published:""}),u=v(),s=c.ref({}),a=c.ref(!1),d=async(e=1,n="",o="",i="",r="",t="created_at",h="desc")=>{try{const p=await l("get",`/api/solutions?page=${e}&search_id=${n}&search_title=${o}&search_parent_id=${i}&search_global=${r}&order_column=${t}&order_direction=${h}`);g.value=p}catch(p){s.value=p}};return{solutionList:f,solutions:g,solution:m,getSolutions:d,getSolutionList:async()=>{try{const e=await l("get","/api/solution-list");f.value=e}catch(e){s.value=e}},getSolution:async e=>{try{const n=await l("get",`/api/solutions/${e}`);m.value=n}catch(n){s.value=n}},storeSolution:async(e,n)=>{if(a.value)return;a.value=!0,s.value={};let o=new FormData;const i=e.categories.map(t=>t.id);o.append("categories",i);for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&o.append(t,e[t]);const r={headers:{"content-type":"multipart/form-data"}};try{await l("post","/api/solutions",o,r),u.push({name:"solutions.index"}),e.name=null,e.solution_category=null,e.description=null,e.is_published=null,e.main_image=null,showToast("Solution saved successfully","success")}catch(t){s.value=t}finally{a.value=!1}},updateSolution:async(e,n)=>{if(a.value)return;a.value=!0,s.value={};let o=new FormData;const i=e.categories.map(t=>t.id);o.append("categories",i);for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&o.append(t,e[t]);const r={headers:{"Content-Type":"multipart/form-data"}};o.append("_method","put");try{await l("post",`/api/solutions/${e.id}`,o,r),u.push({name:"solutions.index"}),showToast("Solution updated successfully","success")}catch(t){s.value=t}finally{a.value=!1}},deleteSolution:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){l("delete",`/api/solutions/${e}`).then(()=>{d(),u.push({name:"solutions.index"}),showToast("Solution deleted successfully","success")})},onCancel(){console.log("Cancel")}})},deleteSolutionImage:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){l("delete",`/api/solution-images/${e}`).then(()=>{d(),u.go(0),showToast("Image deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:s,isLoading:a}}export{C as u};
