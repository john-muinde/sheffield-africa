import{bU as $,r as l,c as N,bK as B,R as P,bB as u,bC as p,bD as e,bI as i,ah as o,e as S,bP as T,bJ as f,Q as D,ab as b,bG as E}from"./index-938c5b2c.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-de833af9.js";const M={class:"own-product position-relative px-2 product-card"},K={class:"savings-badge"},I={class:"product-image-container"},V={key:0,class:"image-skeleton"},z=["alt"],A={class:"product-details"},U={class:"text-start product-name"},j={class:"fw-bold text-start text-muted product-description"},F={class:"pricing-section"},O={class:"fw-bold text-center text-muted original-price"},R={class:"price-tag bg-danger fw-bold text-uppercase"},q={class:"product-action-image"},G={class:"btn-text"},J={key:0,class:"btn-loading-icon"},Q={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(C){const s=C.product,x=$(),c=l(!1),_=l(!1),m=l(!1),w=N(()=>c.value?"Adding...":"Add to Cart"),v=a=>new Intl.NumberFormat("en-KE").format(a),y=(a,t)=>Math.round((a-t)/a*100),g=window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"}),k=a=>{if(!c.value){c.value=!0;try{x.dispatch("cart/addToCart",a),g.fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}})}catch(t){console.error(t),g.fire({icon:"error",title:"Failed to add item to cart",padding:"2em",customClass:{title:"swal-title-class"}})}finally{c.value=!1}}},h=(a,t,d)=>{let r=t.replace(/ /g,"-").replace(/\//g,"-");r=r.replace(/-+/g,"-"),r=r.replace(/^-+|-+$/g,""),r=r.toLowerCase();let n=d.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return n=n.replace(/-+/g,"-"),n=n.replace(/^-+|-+$/g,""),`/kitchen/product/${a}/${r}-${n}`};return(a,t)=>{const d=B("router-link"),r=P("lazy");return u(),p("div",M,[e("span",K," Save "+i(y(o(s).cost_price,o(s).retail_price))+"% ",1),e("div",I,[S(d,{to:h(o(s).id,o(s).name,o(s).model_number),class:"d-flex justify-content-center align-items-center mt-2"},{default:T(()=>[m.value?f("",!0):(u(),p("div",V)),D(e("img",{alt:o(s).name,class:"img img-fluid product-image",onLoad:t[0]||(t[0]=n=>m.value=!0)},null,40,z),[[r,"/storage/"+o(s).main_image_path]])]),_:1},8,["to"])]),e("div",A,[e("span",U,i(o(s).name),1),e("span",j,[b(" SKU: "+i(o(s).sku)+" ",1),t[4]||(t[4]=e("br",null,null,-1)),b(" MODEL NUMBER: "+i(o(s).model_number),1)])]),e("div",F,[e("span",O," KES "+i(v(o(s).cost_price)),1),e("div",R," KES "+i(v(o(s).retail_price)),1),e("div",q,[e("button",{class:E(["btn-product btn-cart",{adding:c.value}]),onClick:t[1]||(t[1]=n=>k(o(s))),onMouseenter:t[2]||(t[2]=n=>_.value=!0),onMouseleave:t[3]||(t[3]=n=>_.value=!1)},[e("span",G,i(w.value),1),c.value?(u(),p("div",J,t[5]||(t[5]=[e("span",{class:"spinner"},null,-1)]))):f("",!0)],34)])]),t[6]||(t[6]=e("button",{id:"scroll-top",title:"Back to Top"},[e("i",{class:"icon-arrow-up"})],-1))])}}},Z=L(Q,[["__scopeId","data-v-d4699c5f"]]);export{Z as default};
