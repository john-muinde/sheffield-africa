import{y as c,c as w}from"./tools-b40e92cf.4881bf31.js";import{r}from"./gmaps-ca810647.822941de.js";import{d as E,N as s,w as u,Q as O}from"./index.1921c821.js";import"./_commonjsHelpers.f037b798.js";const B=E({name:"GmapsPolyline",props:{draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,default:void 0},path:{type:Object,default:void 0},visible:{type:Boolean,default:!0}},emits:{click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:t=>!0,dragend:t=>!0,dragstart:t=>!0,mounted:t=>!0,mousedown:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,mouseup:t=>!0,path_changed:t=>!0,rightclick:t=>!0,unmounted:t=>!0},setup(t,{emit:l}){const p=s("$getAPI"),h=s("$getMap"),b=s("$getThrottle"),L=s("$handleError"),f=e=>L(e,"Polyline"),v=[];let d=null;const g=e=>e.getPath().getArray().map(n=>n.toJSON()),y=e=>{const n=google.maps.event,m=b();v.push(n.addListener(e,"drag",c(a=>{var i;return l("drag",((i=a.latLng)==null?void 0:i.toJSON())||null)},m)),n.addListener(e,"mousemove",c(a=>l("mousemove",r(a)),m)),n.addListener(e,"mouseover",c(a=>l("mouseover",r(a)),m)),n.addListener(e,"click",a=>l("click",r(a))),n.addListener(e,"contextmenu",a=>l("contextmenu",r(a))),n.addListener(e,"dblclick",a=>l("dblclick",r(a))),n.addListener(e,"dragend",a=>{var i;return l("dragend",((i=a.latLng)==null?void 0:i.toJSON())||null)}),n.addListener(e,"dragstart",a=>{var i;return l("dragstart",((i=a.latLng)==null?void 0:i.toJSON())||null)}),n.addListener(e,"mousedown",a=>l("mousedown",r(a))),n.addListener(e,"mouseout",a=>l("mouseout",r(a))),n.addListener(e,"mouseup",a=>l("mouseup",r(a))),n.addListener(e,"rightclick",a=>l("rightclick",r(a))),n.addListener(e,"dragend",a=>l("path_changed",g(e))),n.addListener(e,"mouseup",a=>a.vertex!==void 0||a.edge!==void 0?l("path_changed",g(e)):null),e.getPath().addListener("remove_at",()=>l("path_changed",g(e))))},k=h(),P=p(),o={map:k,...t.options};return t.draggable&&(o.draggable=t.draggable),t.editable&&(o.editable=t.editable),t.path&&(o.path=t.path),t.visible&&(o.visible=t.visible),d=new P.Polyline(o),d?(y(d),l("mounted",d)):f(new Error("There was a problem creating the shape.")),u(()=>t.draggable,e=>e===void 0||e==(d==null?void 0:d.getDraggable())?null:d==null?void 0:d.setDraggable(e)),u(()=>t.editable,e=>e===void 0||e==(d==null?void 0:d.getEditable())?null:d==null?void 0:d.setEditable(e)),u(()=>t.path,e=>e===void 0||w(e,d==null?void 0:d.getPath())?null:d==null?void 0:d.setPath(e),{deep:!0}),u(()=>t.visible,e=>e===void 0||e==(d==null?void 0:d.getVisible())?null:d==null?void 0:d.setVisible(e)),O(()=>{d&&l("unmounted",d),v.forEach(e=>e.remove()),d&&d.setMap(null),d&&p().event.clearInstanceListeners(d)}),()=>{}}});export{B as default};
