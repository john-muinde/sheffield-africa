import{C as w}from"./ContentState-39ca6cd7.js";import{bT as z,r as i,c as M,o as F,w as C,aa as G,bK as J,bB as l,bC as c,bD as a,e as P,bP as _,bS as m,bJ as g,a7 as T,bL as V,bG as x,bI as B,ab as h}from"./index-fb7a5e42.js";import"./use-meta-e4427254.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./transition-51684ccb.js";import"./_commonjsHelpers-de833af9.js";const O={class:"main"},W={class:"page-content"},H={class:"container"},Q={class:"row"},U={class:"col-lg-10 offset-lg-1 in-the-news-section"},X={key:3,class:"row justify-content-left"},Y={class:"p-6 border rounded"},Z={class:"position-relative mb-2",style:{height:"216px"}},ee=["href"],ae=["src","alt"],te=["href"],se={class:"col-lg-12 blogs mt-3"},oe={"aria-label":"Page navigation"},le={class:"pagination justify-content-center"},ne={class:"page-item-total"},ie={__name:"Media_In_The_News",setup(re){const r=z(),t=i(r.params.page?parseInt(r.params.page):1),N=i(12),I=i(0),b=i([]),f=i(r.params.id?parseInt(r.params.id):1),S=i([]),u=i(!1),L=i(null),y=async()=>{u.value=!0;try{const e=await axios.get("/api/get-in-the-news",{params:{page:t.value,per_page:N.value,category_id:f.value}});b.value=e.data.data,I.value=e.data.total,u.value=!1}catch(e){u.value=!1,e.value=e,console.error(e)}},j=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},k=e=>`/media/in-the-news/page/${e}`,d=M(()=>Math.ceil(I.value/N.value)),p=i([]),D=()=>{t.value>1&&t.value--},A=()=>{t.value<d.value&&t.value++},E=e=>{t.value=e},R=()=>{p.value=b.value},$=e=>Number.isInteger(e),q=M(()=>{const e=[];t.value>1&&e.push("Prev");let n=Math.max(1,t.value-Math.floor(5/2)),s=Math.min(n+5-1,d.value);s-n<5-1&&(n=Math.max(1,s-5+1));for(let v=n;v<=s;v++)e.push(v);return t.value<d.value&&e.push("Next"),e});return F(()=>{y(),j()}),C(t,y),C(b,R),G(()=>{const e=r.params;r.query,e.id!==""&&f.value!==e.id&&(t.value=1,f.value=e.id?parseInt(e.id):1,e.page!==""&&t.value!==e.page&&(t.value=e.page?parseInt(e.page):1),y())}),(e,o)=>{const n=J("router-link");return l(),c("div",null,[a("main",O,[a("div",W,[a("div",H,[a("div",Q,[a("div",U,[o[4]||(o[4]=a("h2",{class:"about-us-title"}," In the News ",-1)),P(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:_(()=>o[0]||(o[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),o[5]||(o[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),u.value?(l(),m(w,{key:0,type:"loading","content-type":"Articles In The News"})):g("",!0),!p.value.length&&!u.value?(l(),m(w,{key:1,type:"empty","content-type":"Our articles In The News"})):g("",!0),L.value?(l(),m(w,{key:2,type:"error","content-type":"Articles In The News"})):g("",!0),p.value.length?(l(),c("div",X,[(l(!0),c(T,null,V(p.value,s=>(l(),c("div",{key:s.id,class:"col-12 col-md-6 col-lg-4 mb-2 blog-item"},[a("div",Y,[a("div",Z,[a("a",{target:"_blank",class:"float-center",href:s.url},[a("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:"/storage/"+s.main_image_path,alt:s.name},null,8,ae)],8,ee)]),a("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:s.url},o[1]||(o[1]=[h(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)]),8,te)])]))),128)),a("div",se,[a("nav",oe,[a("ul",le,[a("li",{class:x(["page-item",{disabled:t.value===1}])},[P(n,{class:"page-link page-link-prev",to:k(t.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:D},{default:_(()=>o[2]||(o[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),h(" Prev ")])),_:1},8,["to"])],2),(l(!0),c(T,null,V(q.value,s=>(l(),c("li",{key:s,class:x(["page-item",{active:s===t.value}])},[$(s)?(l(),m(n,{key:0,class:"page-link",to:k(s),onClick:v=>E(s)},{default:_(()=>[h(B(s),1)]),_:2},1032,["to","onClick"])):g("",!0)],2))),128)),a("li",ne," of "+B(d.value),1),a("li",{class:x(["page-item",{disabled:t.value===d.value}])},[P(n,{class:"page-link page-link-next",to:k(t.value+1),"aria-label":"Next",onClick:A},{default:_(()=>o[3]||(o[3]=[h(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):g("",!0)])])])])])])}}},_e=K(ie,[["__scopeId","data-v-15ee8db1"]]);export{_e as default};
