import{a3 as ee,x as c,ac as P,P as ae,Q as E,y as te,z as _,a4 as oe,f as se,o as r,c as n,a2 as T,a as e,p as j,al as le,i as p,u as v,X as ie,e as b,l as h,n as V,F as U,g as O,ah as z,aq as re,t as f,W as ne,m as C,Y as ce}from"./app-setting.27140836.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as de}from"./vue-draggable-next.esm-bundler.4cd0506d.js";/* empty css                        */import{u as ue}from"./categories.286ba628.js";import{M as F}from"./vue3-multiselect.umd.min.7157806b.js";/* empty css                         */import"./_commonjsHelpers.f037b798.js";const pe={class:"layout-px-spacing"},ge=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Categories")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Categories")])])])])])],-1),_e={class:"row layout-top-spacing"},he={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},me={class:"panel br-6 p-0"},ve=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"View Categories")])])])],-1),be={class:"panel-body"},fe={class:"row"},xe={class:"form-group col-md-1"},ye=e("label",{for:"post-category",class:"form-label"},"Per Page",-1),ke=ce('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6),we=[ke],Pe={class:"form-group col-md-3"},Ve=e("label",{for:"post-category",class:"form-label"},"Segment",-1),Ce={class:"form-group col-md-3"},Me=e("label",{for:"post-category",class:"form-label"},"Main Category",-1),Ne={class:"form-group col-md-5"},Ie=e("label",{for:"post-name"},"Search",-1),Le={class:"table-responsive"},Se={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},De={role:"rowgroup"},Be={role:"row"},Ee={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},Te=e("div",null,null,-1),je=[Te],Ue=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")],-1),Oe=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Description")],-1),ze=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Parent Category")],-1),Fe=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Status")],-1),$e=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Created At")],-1),qe=e("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1),Ae={role:"rowgroup"},He={key:0,"aria-colindex":"0",class:"handle"},Qe=e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1),Re=[Qe],We={"aria-colindex":"1",role:"cell"},Xe={"aria-colindex":"2",role:"cell"},Ye={"aria-colindex":"3",role:"cell"},Ge={"aria-colindex":"4",role:"cell"},Je={key:0,class:"badge badge-success inv-status"},Ke={key:1,class:"badge badge-danger inv-status"},Ze={"aria-colindex":"5",role:"cell"},ea={"aria-colindex":"6",role:"cell",class:"text-center"},aa=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),ta=["onClick"],oa=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),sa=[oa],la={"aria-label":"Page navigation",style:{"margin-top":"20px"}},ia={class:"pagination justify-content-center"},ra=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),na=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),ca=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),ka={__name:"index",setup(da){const{getCategoryList:ua,categoryList:$,getMainCategoryList:q,categoryMainList:A,getSelectedCategoryList:H}=ue(),d=ee();c(d);const l=c(d.params.page?parseInt(d.params.page):1),S=c(0),Q=c(0),M=c(d.params.id?parseInt(d.params.id):1),N=c([]),x=c([]),{value:I}=P("perPage",null,{initialValue:"20"}),{value:D}=P("filter_category_id",null,{initialValue:""}),{value:y}=P("main_category",null,{initialValue:""}),{value:R}=P("search",null,{initialValue:""}),o=ae({perPage:I,filter_category_id:D,main_category:y,search:R}),L=async()=>{try{o.main_category!=""&&o.search==""&&(o.perPage=1e4);const t=await z.get("/api/get-categories",{params:{page:l.value,per_page:o.perPage,category_id:M.value,mainCategory:o.main_category.id,search:o.search,filter_category_id:o.filter_category_id&&o.filter_category_id.id||null}});S.value=t.data.categories.total,Q.value=t.data.categories.data.length,N.value=t.data.categories.data}catch(t){console.error(t)}},g=E(()=>Math.ceil(S.value/I.value)),u=c([]),W=()=>{l.value>1&&l.value--},B=()=>{l.value<g.value&&l.value++},X=t=>{l.value=t},k=()=>{u.value=N.value.slice(0,0+I.value)},Y=t=>Number.isInteger(t),G=E(()=>{const t=[];l.value>1&&t.push("Prev");let i=Math.max(1,l.value-Math.floor(5/2)),a=Math.min(i+5-1,g.value);a-i<5-1&&(i=Math.max(1,a-5+1));for(let m=i;m<=a;m++)t.push(m);return l.value<g.value&&t.push("Next"),t}),w=(t,s)=>`/admin/categories/page/${s}`;te(()=>{L(),q()}),_(l,L),_(y,t=>{if(y){const s=o.main_category.id;o.filter_category_id=null,H(s)}}),_(o,k),_(y,k),_(D,k),_(N,k),oe(()=>{const t=d.params;d.query,t.id!==""&&M!==t.id&&(l.value=1,M.value=t.id?parseInt(t.id):1,t.page!==""&&l!==t.page&&(l.value=t.page?parseInt(t.page):1),L())});const J=async t=>{try{const s=await z.post("/api/categories-update-order",{data:t})}catch(s){console.error("Error saving data:",s)}},K=()=>{u.value.forEach(t=>{t.order=null})},Z=t=>{const s=u.value.map(i=>i.id);J(s),u.value.forEach(i=>{const a=s.indexOf(i.id);i.order=a+1})};return(t,s)=>{const i=se("router-link");return r(),n("div",pe,[(r(),T(re,{to:"#breadcrumb"},[ge])),e("div",_e,[e("div",he,[e("div",me,[ve,e("div",be,[e("div",fe,[e("div",xe,[ye,j(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.perPage=a),id:"perpage",class:"form-control form-select select"},we,512),[[le,o.perPage]])]),e("div",Pe,[Ve,p(v(F),{modelValue:o.main_category,"onUpdate:modelValue":s[1]||(s[1]=a=>o.main_category=a),options:v(A),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ce,[Me,p(v(F),{modelValue:o.filter_category_id,"onUpdate:modelValue":s[2]||(s[2]=a=>o.filter_category_id=a),options:v($),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ne,[Ie,j(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>o.search=a),id:"post-name",type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[ie,o.search]])])]),e("div",Le,[e("table",Se,[e("thead",De,[e("tr",Be,[o.main_category!==""?(r(),n("th",Ee,je)):b("",!0),Ue,Oe,ze,Fe,$e,qe])]),e("tbody",Ae,[p(v(de),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=a=>u.value=a),animation:200,onStart:K,onEnd:Z},{default:h(()=>[(r(!0),n(U,null,O(u.value,a=>(r(),n("tr",{key:a.id,role:"row",class:""},[o.main_category!==""?(r(),n("td",He,Re)):b("",!0),e("td",We,f(a.name),1),e("td",Xe,f(a.description),1),e("td",Ye,f(a.parent?a.parent.name:"----"),1),e("td",Ge,[a.is_published===1?(r(),n("span",Je,"Published")):b("",!0),a.is_published!==1?(r(),n("span",Ke,"Not Published")):b("",!0)]),e("td",Ze,f(a.created_at),1),e("td",ea,[p(i,{to:{name:"categories.edit",params:{id:a.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:h(()=>[aa]),_:2},1032,["to"]),e("a",{href:"javascript:;",onClick:ne(m=>t.deleteCategory(a.id),["prevent"]),class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top"},sa,8,ta)])]))),128))]),_:1},8,["modelValue"])])])]),e("nav",la,[e("ul",ia,[e("li",{class:V(["page-item",{disabled:l.value===1}])},[p(i,{class:"page-link page-link-prev",to:w(x.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:W},{default:h(()=>[ra,C(" Prev ")]),_:1},8,["to"])],2),(r(!0),n(U,null,O(G.value,a=>(r(),n("li",{class:V(["page-item",{active:a===l.value}]),key:a},[Y(a)?(r(),T(i,{key:0,class:"page-link",to:w(x.value.id,a),onClick:m=>X(a)},{default:h(()=>[C(f(a),1)]),_:2},1032,["to","onClick"])):b("",!0)],2))),128)),e("li",{class:V(["page-item",{disabled:l.value===g.value}])},[p(i,{class:"page-link page-link-next",to:w(x.value.id,g.value),"aria-label":"Next",onClick:B},{default:h(()=>[C(" Last "),na]),_:1},8,["to"])],2),e("li",{class:V(["page-item",{disabled:l.value===g.value}])},[p(i,{class:"page-link page-link-next",to:w(x.value.id,l.value+1),"aria-label":"Next",onClick:B},{default:h(()=>[C(" Next "),ca]),_:1},8,["to"])],2)])])])])])])])}}};export{ka as default};
