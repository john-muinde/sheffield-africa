import{v as e,a as b,b as x,f as P}from"./index-37a3e797.js";import"./use-meta-5612b25f.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{C}from"./ContentState-e3885539.js";import"./_commonjsHelpers-23102255.js";import"./transition-bd7fa928.js";const L={key:0,class:"filter-container"},D={class:"filter-heading"},S=["value"],$={class:"filter-content"},F={class:"checkbox-wrapper"},T={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"checkmark"},M={class:"filter-label"},z={key:0,class:"filter-count"},I={__name:"DynamicFilters",props:{items:{type:Array,required:!0},filterColumn:{type:String,required:!0},filters:{type:Array,required:!1,default:()=>[]},selectedFilters:{type:Array,required:!1,default:()=>[]},showNumbers:{type:Boolean,default:!1},searchTerm:{type:String,default:""},classes:{type:String,default:""}},emits:["update:displayedProducts"],setup(k,{emit:v}){const y=v,t=k,i=e.ref(t.selectedFilters),g=e.ref(t.showNumbers),m=e.ref(t.items),d=e.ref(t.searchTerm),u=e.ref([]),f=e.ref([]);t.filters.length>0&&(typeof t.filters[0]=="object"?(u.value=t.filters.map(l=>Object.keys(l)[0]),f.value=t.filters.map(l=>Object.values(l)[0])):(u.value=t.filters,f.value=t.filters)),e.computed(()=>{var l,r,n;if(u.value.length)return u.value;if(!((l=t.items)!=null&&l.length)&&!((r=u.value)!=null&&r.length)&&!t.filterColumn)return[];if(!((n=t.items)!=null&&n.length)||!t.filterColumn)return[];u.value=[...new Set(t.items.map(p=>p[t.filterColumn]).filter(Boolean))].sort(),f.value=u.value});const N=l=>t.items.filter(r=>r[t.filterColumn]===l).length,_=l=>l.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),h=()=>{i.value.length===0?m.value=t.items:m.value=t.items.filter(l=>i.value.includes(l[t.filterColumn])),d.value&&(m.value=m.value.filter(l=>{var r,n,p;return((r=l.name)==null?void 0:r.toLowerCase().includes(d.value.toLowerCase()))||((n=l.description)==null?void 0:n.toLowerCase().includes(d.value.toLowerCase()))||((p=l.tags)==null?void 0:p.toLowerCase().includes(d.value.toLowerCase()))||l[t.filterColumn].toLowerCase().includes(d.value.toLowerCase())})),y("update:displayedProducts",{filteredData:m.value,selectedFilters:i.value})};return e.watch(()=>t.searchTerm,l=>{d.value=l,h()}),e.watch(()=>t.items,l=>{if(m.value=l,i.value.length>0){const r=l.filter(n=>i.value.includes(n[t.filterColumn]));y("update:displayedProducts",{filteredData:r,selectedFilters:i.value})}else y("update:displayedProducts",{filteredData:l,selectedFilters:[]})},{deep:!0}),(l,r)=>u.value.length?(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("h4",D,[r[1]||(r[1]=e.createElementVNode("span",{class:"filter-icon"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})])],-1)),e.createTextVNode(" "+e.toDisplayString(_(k.filterColumn)),1)]),e.createElementVNode("div",{class:e.normalizeClass(["filter-options-container",t.classes])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(n,p)=>(e.openBlock(),e.createElementBlock("label",{key:n,class:e.normalizeClass(["filter-card",{"filter-card-selected":i.value.includes(n)}])},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r[0]||(r[0]=V=>i.value=V),type:"checkbox",value:n,class:"filter-checkbox",onChange:h},null,40,S),[[e.vModelCheckbox,i.value]]),e.createElementVNode("div",$,[e.createElementVNode("div",F,[e.createElementVNode("div",{class:e.normalizeClass(["custom-checkbox",{checked:i.value.includes(n)}])},[i.value.includes(n)?(e.openBlock(),e.createElementBlock("svg",T,r[2]||(r[2]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):e.createCommentVNode("",!0)],2),e.createElementVNode("span",M,e.toDisplayString(f.value[p]),1)]),g.value?(e.openBlock(),e.createElementBlock("span",z,e.toDisplayString(N(n)),1)):e.createCommentVNode("",!0)])],2))),128))],2)])):e.createCommentVNode("",!0)}},A=w(I,[["__scopeId","data-v-ce636ef1"]]);const R={class:"main"},j={class:"page-content"},U={class:"container"},q={class:"row"},G={class:"col-lg-10 offset-lg-1 gallery-main-page-section"},O={key:3,class:"row mt-2"},J={class:"entry entry-mask"},H={class:"entry-media entry-gallery"},K=["src"],Q={class:"entry-body"},W={class:"entry-title"},X={class:"entry-cats mt-1"},Y={style:{"background-color":"#c02434",padding:"5px"}},Z={class:"col-lg-12 mt-3"},ee={"aria-label":"Page navigation"},te={class:"pagination justify-content-center"},le=["onClick"],ae={__name:"Media_Gallery",setup(k){const v=b(),y=x(),t=e.ref(v.params.page?parseInt(v.params.page):1);e.ref(12);const i=e.ref(0),g=e.ref([]),m=e.ref(v.params.id?parseInt(v.params.id):1),d=e.ref([]),u=e.ref([]),f=e.ref({}),N=e.ref(["CSR","EVENT","PROJECT"]),_=e.ref(!1),h=e.ref(null),l=async(o=null)=>{_.value=!0,typeof o=="string"&&o.includes("http")&&(o=o.split("/api/").pop());try{const a=(await P.get(o||"/api/get-media-center-galleries",{params:{page:t.value,category_id:m.value,gallery_type:u.value}})).data;g.value=a.data,i.value=a.total,f.value={next_page_url:a.next_page_url,prev_page_url:a.prev_page_url,links:a.links},_.value=!1,p(g.value)}catch(s){s.value=s,console.error(s)}finally{_.value=!1}},r=(o,s)=>{let a=s.replace(/ /g,"-").replace(/\//g,"-");return a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase(),`/media/gallery/${o}/${a}`},n=o=>{if(o){const a=new URLSearchParams(o.split("?")[1]).get("page");a&&(t.value=parseInt(a),y.push(`/media/gallery/page/${t.value}`))}},p=o=>{d.value=o},V=({filteredData:o,selectedFilters:s})=>{p(o),s.value=s};return e.onMounted(()=>{l()}),e.watch(g,p),e.watchEffect(()=>{const o=v.params,s=o.id?parseInt(o.id):1,a=o.page?parseInt(o.page):1;(m.value!==s||t.value!==a)&&(m.value=s,t.value=a,l())}),(o,s)=>{var E;const a=e.resolveComponent("router-link"),B=e.resolveDirective("lazy");return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("main",R,[e.createElementVNode("div",j,[e.createElementVNode("div",U,[e.createElementVNode("div",q,[e.createElementVNode("div",G,[s[2]||(s[2]=e.createElementVNode("h2",{class:"about-us-title"}," Gallery ",-1)),e.createVNode(a,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:e.withCtx(()=>s[0]||(s[0]=[e.createElementVNode("i",{class:"icon-long-arrow-left"},null,-1),e.createElementVNode("span",null,"Back to Media Center",-1)])),_:1}),s[3]||(s[3]=e.createElementVNode("p",{class:"lead about-us-lead text-primary mb-3"}," Journey Through the Lens: Our Story in Pictures ",-1)),e.createVNode(A,{items:g.value,"filter-column":"gallery_type",filters:N.value,"onUpdate:displayedProducts":V},null,8,["items","filters"]),_.value?(e.openBlock(),e.createBlock(C,{key:0,type:"loading","content-type":"gallery"})):e.createCommentVNode("",!0),!d.value.length&&!_.value?(e.openBlock(),e.createBlock(C,{key:1,type:"empty","content-type":"gallery"})):e.createCommentVNode("",!0),h.value?(e.openBlock(),e.createBlock(C,{key:2,type:"error","content-type":"gallery"})):e.createCommentVNode("",!0),d.value.length?(e.openBlock(),e.createElementBlock("div",O,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,c=>(e.openBlock(),e.createElementBlock("div",{key:c.id,class:"entry-item col-sm-6 col-lg-4"},[e.createElementVNode("article",J,[e.createElementVNode("figure",H,[e.createVNode(a,{to:r(c.id,c.name)},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("img",{src:"/storage/"+c.main_image_path,alt:"image desc"},null,8,K),[[B,"/storage/"+c.main_image_path,"src"]])]),_:2},1032,["to"])]),e.createElementVNode("div",Q,[s[1]||(s[1]=e.createElementVNode("div",{class:"entry-meta"},[e.createElementVNode("span",{class:"meta-separator"},"|")],-1)),e.createElementVNode("h2",W,[e.createVNode(a,{to:r(c.id,c.name)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.name),1)]),_:2},1032,["to"])]),e.createElementVNode("div",X,[e.createElementVNode("b",Y,e.toDisplayString(c.gallery_type),1)])])])]))),128)),e.createElementVNode("div",Z,[e.createElementVNode("nav",ee,[e.createElementVNode("ul",te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((E=f.value)==null?void 0:E.links,(c,re)=>(e.openBlock(),e.createElementBlock("li",{key:c.label,class:e.normalizeClass(["page-item",{active:c.active}])},[c.url&&Number.isInteger(Number(c.label))?(e.openBlock(),e.createElementBlock("a",{key:0,class:"page-link",onClick:e.withModifiers(se=>n(c.url),["prevent"])},e.toDisplayString(c.label),9,le)):e.createCommentVNode("",!0)],2))),128))])])])])):e.createCommentVNode("",!0)])])])])])])}}},me=w(ae,[["__scopeId","data-v-d5c14c98"]]);export{me as default};
