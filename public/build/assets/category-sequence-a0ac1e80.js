import{bT as L,r as i,a as N,o as U,w as n,aa as q,bK as M,bB as p,bC as y,bS as O,bD as e,aQ as F,Q,ca as T,bV as j,e as _,ah as f,bP as K,a7 as R,bL as z,bI as A}from"./index-95e815af.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as G}from"./vue-draggable-next.esm-bundler-26b9f86f.js";import"./use-meta-e8b7babf.js";import{a as m}from"./vee-validate-e3972c11.js";import{u as H}from"./categories-a20f1eec.js";import"./_commonjsHelpers-de833af9.js";import"./index-9e7ed944.js";const J={class:"layout-px-spacing"},W={class:"row layout-top-spacing"},X={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Y={class:"panel br-6 p-0"},Z={class:"panel-body"},$={class:"row"},ee={class:"form-group col-md-1"},ae={class:"form-group col-md-3",style:{display:"none"}},oe={class:"form-group col-md-3",style:{display:"none"}},te={class:"table-responsive"},le={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},se={role:"rowgroup"},re={"aria-colindex":"1",role:"cell"},_e={__name:"category-sequence",setup(ie){const{categoryList:w,categoryMainList:S,getSelectedCategoryList:C}=H(),s=L(),d=i(s.params.page?parseInt(s.params.page):1),P=i(s.params.id?parseInt(s.params.id):0),g=i(s.params.id?parseInt(s.params.id):1),v=i([]),I=i([]),{value:h}=m("perPage",null,{initialValue:"20"}),{value:V}=m("filter_category_id",null,{initialValue:""}),{value:c}=m("main_category",null,{initialValue:""}),{value:D}=m("search",null,{initialValue:""}),t=N({perPage:h,filter_category_id:V,main_category:c,search:D}),b=async()=>{try{t.main_category==""&&(t.perPage=1e4);const o=await axios.get("/api/get-solutions-categories",{params:{page:d.value,per_page:t.perPage,category_id:g.value,mainCategory:t.main_category.id,solution_id:P.value,search:t.search}});v.value=o.data.categories,I.value=o.data.the_solution}catch(o){console.error(o)}},r=i([]),u=()=>{r.value=v.value.slice(0,0+h.value)};U(()=>{b()}),n(d,b),n(c,()=>{if(c){const o=t.main_category.id;t.filter_category_id=null,C(o)}}),n(t,u),n(c,u),n(V,u),n(v,u),q(()=>{const o=s.params;o.id!==""&&g.value!==o.id&&(d.value=1,g.value=o.id?parseInt(o.id):1,o.page!==""&&d.value!==o.page&&(d.value=o.page?parseInt(o.page):1),b())});const k=async o=>{try{await axios.post("/api/solutions-categories-update-order",{data:o})}catch(a){console.error("Error saving data:",a)}},B=()=>{r.value.forEach(o=>{o.order=null})},E=()=>{const o=r.value.map(a=>a.id);k(o)};return(o,a)=>{const x=M("multiselect");return p(),y("div",J,[(p(),O(F,{to:"#breadcrumb"},[a[4]||(a[4]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e("div",W,[e("div",X,[e("div",Y,[a[12]||(a[12]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1)),e("div",Z,[e("div",$,[e("div",ee,[a[6]||(a[6]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),Q(e("select",{id:"perpage","onUpdate:modelValue":a[0]||(a[0]=l=>t.perPage=l),class:"form-control form-select select"},a[5]||(a[5]=[j('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[T,t.perPage]])]),e("div",ae,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),_(x,{modelValue:t.main_category,"onUpdate:modelValue":a[1]||(a[1]=l=>t.main_category=l),options:f(S),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",oe,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),_(x,{modelValue:t.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=l=>t.filter_category_id=l),options:f(w),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),a[9]||(a[9]=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e("div",te,[e("table",le,[a[11]||(a[11]=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1)),e("tbody",se,[_(f(G),{id:"left-lovehandles",modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:B,onEnd:E},{default:K(()=>[(p(!0),y(R,null,z(r.value,l=>(p(),y("tr",{key:l.id,role:"row",class:""},[a[10]||(a[10]=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1)),e("td",re,A(l.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])])}}};export{_e as default};
