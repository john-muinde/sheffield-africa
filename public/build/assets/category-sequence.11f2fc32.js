import{a5 as E,q as i,af as g,U as N,V as U,s as B,u as c,a6 as F,f as O,o as m,c as _,P as j,a as e,ar as R,m as T,am as Z,$,h,Z as V,k as z,F as A,g as G,t as H}from"./app-setting.a77e8a6e.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as J}from"./vue-draggable-next.esm-bundler.81ab2011.js";/* empty css                        */import{u as K}from"./categories.05d27a6f.js";import"./_commonjsHelpers.f037b798.js";const Q={class:"layout-px-spacing"},W={class:"row layout-top-spacing"},X={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Y={class:"panel br-6 p-0"},ee={class:"panel-body"},ae={class:"row"},oe={class:"form-group col-md-1"},te={class:"form-group col-md-3",style:{display:"none"}},le={class:"form-group col-md-3",style:{display:"none"}},se={class:"table-responsive"},re={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},ie={role:"rowgroup"},ne={"aria-colindex":"1",role:"cell"},he={__name:"category-sequence",setup(de){const{getCategoryList:ce,categoryList:C,getMainCategoryList:ue,categoryMainList:S,getSelectedCategoryList:I}=K(),s=E();i(s);const n=i(s.params.page?parseInt(s.params.page):1),x=i(s.params.id?parseInt(s.params.id):0);i(0),i(0);const v=i(s.params.id?parseInt(s.params.id):1),y=i([]),M=i([]),{value:P}=g("perPage",null,{initialValue:"20"}),{value:w}=g("filter_category_id",null,{initialValue:""}),{value:u}=g("main_category",null,{initialValue:""}),{value:k}=g("search",null,{initialValue:""}),l=N({perPage:P,filter_category_id:w,main_category:u,search:k}),b=async()=>{try{l.main_category==""&&(l.perPage=1e4),console.log(x);const o=await axios.get("/api/get-solutions-categories",{params:{page:n.value,per_page:l.perPage,category_id:v.value,mainCategory:l.main_category.id,solution_id:x.value,search:l.search}});y.value=o.data.categories,M.value=o.data.the_solution}catch(o){console.error(o)}},d=i([]),p=()=>{d.value=y.value.slice(0,0+P.value)};U(()=>{const o=[];n.value>1&&o.push("Prev");let r=Math.max(1,n.value-Math.floor(5/2)),t=Math.min(r+5-1,totalPages.value);t-r<5-1&&(r=Math.max(1,t-5+1));for(let f=r;f<=t;f++)o.push(f);return n.value<totalPages.value&&o.push("Next"),o}),B(()=>{b()}),c(n,b),c(u,o=>{if(u){const a=l.main_category.id;l.filter_category_id=null,I(a)}}),c(l,p),c(u,p),c(w,p),c(y,p),F(()=>{const o=s.params;s.query,o.id!==""&&v!==o.id&&(n.value=1,v.value=o.id?parseInt(o.id):1,o.page!==""&&n!==o.page&&(n.value=o.page?parseInt(o.page):1),b())});const D=async o=>{try{const a=await axios.post("/api/solutions-categories-update-order",{data:o})}catch(a){console.error("Error saving data:",a)}},L=()=>{d.value.forEach(o=>{o.order=null})},q=o=>{const a=d.value.map(r=>r.id);console.log(a),D(a)};return(o,a)=>{const r=O("multiselect");return m(),_("div",Q,[(m(),j(R,{to:"#breadcrumb"},[a[4]||(a[4]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e("div",W,[e("div",X,[e("div",Y,[a[12]||(a[12]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1)),e("div",ee,[e("div",ae,[e("div",oe,[a[6]||(a[6]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),T(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.perPage=t),id:"perpage",class:"form-control form-select select"},a[5]||(a[5]=[$('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6)]),512),[[Z,l.perPage]])]),e("div",te,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),h(r,{modelValue:l.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>l.main_category=t),options:V(S),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",le,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),h(r,{modelValue:l.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>l.filter_category_id=t),options:V(C),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),a[9]||(a[9]=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e("div",se,[e("table",re,[a[11]||(a[11]=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1)),e("tbody",ie,[h(V(J),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=t=>d.value=t),animation:200,onStart:L,onEnd:q},{default:z(()=>[(m(!0),_(A,null,G(d.value,t=>(m(),_("tr",{key:l.id,role:"row",class:""},[a[10]||(a[10]=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1)),e("td",ne,H(t.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])])}}};export{he as default};
