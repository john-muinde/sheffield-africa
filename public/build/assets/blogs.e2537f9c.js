import{q as p,aa as B,ab as _,ai as i}from"./app-setting.04459ca1.js";function Y(){const m=p([]),f=p([]),y=p({name:"",parent_id:"",description:"",is_published:""}),g=B(),c=p({}),l=p(!1),r=_("$swal"),h=async(e=1,s="",n="",u="",a="",d="created_at",t="desc")=>{i.get("/api/blogs?page="+e+"&search_id="+s+"&search_title="+n+"&search_parent_id="+u+"&search_global="+a+"&order_column="+d+"&order_direction="+t).then(o=>{m.value=o.data})};return{blogList:f,blogs:m,blog:y,getBlogs:h,getBlogList:async()=>{i.get("/api/blog-list").then(e=>{f.value=e.data.data})},getBlog:async e=>{i.get("/api/blogs/"+e).then(s=>{y.value=s.data.data})},storeBlog:async(e,s)=>{if(l.value)return;console.log(e),l.value=!0,c.value={};let n=new FormData;const u=e.categories.map(t=>t.id);n.append("categories",u);for(var a=0;a<s.length;a++){let t=s[a];n.append("blog_gallery["+a+"]",t)}for(let t in e)e.hasOwnProperty(t)&&e.hasOwnProperty(t)&&t!=="categories"&&n.append(t,e[t]);const d={headers:{"content-type":"multipart/form-data"}};i.post("/api/blogs",n,d).then(t=>{g.push({name:"blogs.create"}),e.name=null,e.description=null,e.parent_id=null,e.is_published=null,e.model_number=null,e.sku=null,e.quantity=null,e.cost_price=null,e.retail_price=null,e.weight=null,e.length=null,e.width=null,e.height=null,e.short_description=null,e.technical_specification=null,e.terms_of_operation=null,e.main_image=null,e.blog_gallery=null,e.document=null,r({icon:"success",title:"Blog saved successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(c.value=t.response.data.errors)}).finally(()=>l.value=!1)},updateBlog:async(e,s)=>{if(l.value)return;l.value=!0,c.value={};let n=new FormData;const u=e.categories.map(t=>t.id);if(console.log(n),n.append("categories",u),s.length>0)for(var a=0;a<s.length;a++){let t=s[a];n.append("blog_gallery["+a+"]",t)}for(let t in e)if(e.hasOwnProperty(t)&&t!=="categories"){let o=e[t];o===null&&(t==="weight"||t==="length"||t==="height"||t==="width"||t==="quantity"||t==="cost_price"||t==="retail_price")&&(o=0),n.append(t,o)}const d={headers:{"Content-Type":"multipart/form-data"}};n.append("_method","put"),console.log(n),await i.post("/api/blogs/"+e.id,n,d).then(t=>{g.push({name:"blogs.index"}),r({icon:"success",title:"Blog updated successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(c.value=t.response.data.errors)}).finally(()=>l.value=!1)},deleteBlog:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&i.delete("/api/blogs/"+e).then(n=>{h(),g.push({name:"blogs.index"}),r({icon:"success",title:"Blog deleted successfully"})}).catch(n=>{r({icon:"error",title:"Something went wrong"})})})},deleteBlogImage:async e=>{r({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&i.delete("/api/blog-images/"+e).then(n=>{h(),g.go(0),r({icon:"success",title:"Image deleted successfully"})}).catch(n=>{r({icon:"error",title:"Something went wrong"})})})},validationErrors:c,isLoading:l}}export{Y as u};
