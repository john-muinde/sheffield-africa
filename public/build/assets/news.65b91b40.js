import{z as c,ca as g,l as v,ch as r}from"./app-setting.f4cae79d.js";function P(){const d=c([]),p=c([]),f=c({name:"",is_published:"",description:""}),u=g(),i=c({}),a=c(!1),l=v("$swal"),h=async(e=1,s="",n="",t="",o="created_at",w="desc")=>{r.get("/api/newss?page="+e+"&search_id="+s+"&search_title="+n+"&search_global="+t+"&order_column="+o+"&order_direction="+w).then(m=>{d.value=m.data})};return{newsList:p,newss:d,news:f,getNewss:h,getNewsList:async()=>{r.get("/api/news-list").then(e=>{p.value=e.data.data})},getNews:async e=>{r.get("/api/newss/"+e).then(s=>{f.value=s.data.data})},storeNews:async e=>{if(console.log(e),a.value)return;a.value=!0,i.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const n={headers:{"content-type":"multipart/form-data"}};console.log(s),r.post("/api/newss",s,n).then(t=>{u.push({name:"news.create"}),e.name=null,e.description=null,e.main_image=null,e.is_published=null,e.video=null,l({icon:"success",title:"News saved successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(i.value=t.response.data.errors)}).finally(()=>a.value=!1)},updateNews:async e=>{if(console.log(e),a.value)return;a.value=!0,i.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const n={headers:{"content-type":"multipart/form-data"}};s.append("_method","put"),console.log(s),r.post("/api/newss/"+e.id,s,n).then(t=>{u.push({name:"news.index"}),l({icon:"success",title:"News updated successfully"})}).catch(t=>{var o;(o=t.response)!=null&&o.data&&(i.value=t.response.data.errors)}).finally(()=>a.value=!1)},deleteNews:async e=>{l({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&r.delete("/api/newss/"+e).then(n=>{h(),u.push({name:"news.index"}),l({icon:"success",title:"News deleted successfully"})}).catch(n=>{l({icon:"error",title:"Something went wrong"})})})},validationErrors:i,isLoading:a}}export{P as u};
