import{c2 as te,r as u,a as le,c as B,o as oe,w as S,ae as se,bN as j,bF as n,bG as d,bW as E,bH as e,aU as re,V as O,cc as ie,c4 as ne,e as p,al as b,c5 as de,bM as f,bS as m,bJ as w,ab as U,bO as F,cf as ce,bL as h,a3 as ue,af as V}from"./index.fb9dc0c3.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as pe}from"./vue-draggable-next.esm-bundler.a1024313.js";import{f as ge}from"./index.dbc662e0.js";import"./use-meta.c39fc0d4.js";import{a as P}from"./vee-validate.e73f457b.js";import{u as me}from"./categories.ef9ba983.js";import"./moment.40bc58bf.js";import"./Modal.7d2e7c36.js";const ve={class:"layout-px-spacing"},be={class:"row layout-top-spacing"},fe={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},he={class:"panel br-6 p-0"},xe={class:"panel-body"},_e={class:"row d-flex align-items-center justify-content-between"},ye={class:"form-group col-md-1"},ke={class:"form-group col-md-3"},we={class:"form-group col-md-3"},Ve={class:"form-group col-md-4"},Pe={class:"table-responsive"},Ce={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},Ne={role:"rowgroup"},Me={role:"row"},Le={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},Se={role:"rowgroup"},De={key:0,"aria-colindex":"0",class:"handle"},Ie={"aria-colindex":"1",role:"cell"},Te={"aria-colindex":"2",role:"cell"},Be={"aria-colindex":"3",role:"cell"},je={"aria-colindex":"4",role:"cell"},Ee={key:0,class:"badge badge-success inv-status"},Oe={key:1,class:"badge badge-danger inv-status"},Ue={"aria-colindex":"5",role:"cell"},Fe={"aria-colindex":"6",role:"cell",class:"text-center"},$e=["onClick"],ze={"aria-label":"Page navigation",style:{"margin-top":"20px"}},Ae={class:"pagination justify-content-center"},ta={__name:"index",setup(He){const{getCategoryList:Ge,categoryList:$,getMainCategoryList:z,categoryMainList:A,getSelectedCategoryList:H,deleteCategory:G,updateDatabaseOrder:J}=me(),v=te(),s=u(v.params.page?k(v.params.page):1),D=u(0),R=u(0),C=u(v.params.id?k(v.params.id):1),N=u([]),x=u([]),{value:M}=P("perPage",null,{initialValue:"20"}),{value:I}=P("filter_category_id",null,{initialValue:""}),{value:_}=P("main_category",null,{initialValue:""}),{value:W}=P("search",null,{initialValue:""}),o=le({perPage:M,filter_category_id:I,main_category:_,search:W}),L=async()=>{var l;try{o.main_category!=""&&o.search==""&&(o.perPage=1e4);const a=await ce.get("/api/get-categories",{params:{page:s.value,per_page:o.perPage,category_id:C.value,mainCategory:o.main_category.id,search:o.search,filter_category_id:((l=o.filter_category_id)==null?void 0:l.id)||null}});D.value=a.data.categories.total,R.value=a.data.categories.data.length,N.value=a.data.categories.data}catch(a){console.error(a)}},g=B(()=>Math.ceil(D.value/M.value)),c=u([]),q=()=>{s.value>1&&s.value--},T=()=>{s.value<g.value&&s.value++},K=l=>{s.value=l},Q=()=>{c.value=N.value.slice(0,0+M.value)},X=l=>Number.isInteger(l),Y=B(()=>{const l=[];s.value>1&&l.push("Prev");let r=Math.max(1,s.value-Math.floor(5/2)),i=Math.min(r+5-1,g.value);i-r<5-1&&(r=Math.max(1,i-5+1));for(let t=r;t<=i;t++)l.push(t);return s.value<g.value&&l.push("Next"),l}),y=(l,a)=>`/admin/categories/page/${a}`;oe(()=>{L(),z()}),S([s,o],L),S(_,l=>{if(_){const a=o.main_category.id;o.filter_category_id=null,H(a)}}),S([o,_,I,N],Q);const k=l=>{const a=l===""?null:parseInt(l);return isNaN(a)?null:a};se(()=>{const l=v.params;l.id!==""&&C.value!==k(l.id)&&(s.value=1,C.value=k(l.id),L())});const Z=()=>{c.value.forEach(l=>{l.order=null})},ee=l=>{const a=c.value.map(r=>r.id);J(a),c.value.forEach(r=>{const i=a.indexOf(r.id);r.order=i+1})};return(l,a)=>{const r=j("multiselect"),i=j("router-link");return n(),d("div",ve,[(n(),E(re,{to:"#breadcrumb"},[a[5]||(a[5]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Categories")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Categories")])])])])])],-1))])),e("div",be,[e("div",fe,[e("div",he,[a[24]||(a[24]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"View Categories")])])])],-1)),e("div",xe,[e("div",_e,[e("div",ye,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),O(e("select",{id:"perpage","onUpdate:modelValue":a[0]||(a[0]=t=>o.perPage=t),class:"form-control form-select select"},a[6]||(a[6]=[ne('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[ie,o.perPage]])]),e("div",ke,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),p(r,{modelValue:o.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>o.main_category=t),options:b(A),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",we,[a[9]||(a[9]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),p(r,{modelValue:o.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>o.filter_category_id=t),options:b($),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ve,[a[10]||(a[10]=e("label",{for:"post-name"},"Search",-1)),O(e("input",{id:"post-name","onUpdate:modelValue":a[3]||(a[3]=t=>o.search=t),type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[de,o.search]])])]),e("div",Pe,[e("table",Ce,[e("thead",Ne,[e("tr",Me,[o.main_category!==""?(n(),d("th",Le,a[11]||(a[11]=[e("div",null,null,-1)]))):f("",!0),a[12]||(a[12]=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")],-1)),a[13]||(a[13]=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Description")],-1)),a[14]||(a[14]=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Parent Category")],-1)),a[15]||(a[15]=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Status")],-1)),a[16]||(a[16]=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Created At")],-1)),a[17]||(a[17]=e("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1))])]),e("tbody",Se,[p(b(pe),{id:"left-lovehandles",modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=t=>c.value=t),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:Z,onEnd:ee},{default:m(()=>[(n(!0),d(U,null,F(c.value,t=>(n(),d("tr",{key:t.id,role:"row",class:""},[o.main_category!==""?(n(),d("td",De,a[18]||(a[18]=[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1)]))):f("",!0),e("td",Ie,h(t.name),1),e("td",Te,h(t.description),1),e("td",Be,h(t.parent?t.parent.name:"----"),1),e("td",je,[t.is_published===1?(n(),d("span",Ee,"Published")):f("",!0),t.is_published!==1?(n(),d("span",Oe,"Not Published")):f("",!0)]),e("td",Ue,h(b(ge)(t.created_at)),1),e("td",Fe,[p(i,{to:{name:"categories.edit",params:{id:t.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:m(()=>a[19]||(a[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e("a",{href:"javascript:;",class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",onClick:ue(ae=>b(G)(t.id),["prevent"])},a[20]||(a[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,$e)])]))),128))]),_:1},8,["modelValue"])])])]),e("nav",ze,[e("ul",Ae,[e("li",{class:w(["page-item",{disabled:s.value===1}])},[p(i,{class:"page-link page-link-prev",to:y(x.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:q},{default:m(()=>a[21]||(a[21]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),V(" Prev ")])),_:1},8,["to"])],2),(n(!0),d(U,null,F(Y.value,t=>(n(),d("li",{key:t,class:w(["page-item",{active:t===s.value}])},[X(t)?(n(),E(i,{key:0,class:"page-link",to:y(x.value.id,t),onClick:ae=>K(t)},{default:m(()=>[V(h(t),1)]),_:2},1032,["to","onClick"])):f("",!0)],2))),128)),e("li",{class:w(["page-item",{disabled:s.value===g.value}])},[p(i,{class:"page-link page-link-next",to:y(x.value.id,g.value),"aria-label":"Next",onClick:T},{default:m(()=>a[22]||(a[22]=[V(" Last "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e("li",{class:w(["page-item",{disabled:s.value===g.value}])},[p(i,{class:"page-link page-link-next",to:y(x.value.id,s.value+1),"aria-label":"Next",onClick:T},{default:m(()=>a[23]||(a[23]=[V(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{ta as default};
