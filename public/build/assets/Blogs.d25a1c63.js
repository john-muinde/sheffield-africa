import{c2 as A,r,c as M,o as G,w as T,af as K,bO as O,X,bG as n,bH as c,bI as a,e as d,bT as u,bW as f,bN as p,ac as V,bP as L,bK as w,bM as y,W as J,ag as _}from"./index.42933e75.js";import"./use-meta.b79f0391.js";import{C}from"./ContentState.80ddd154.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import"./_commonjsHelpers.f037b798.js";import"./transition.388a4cd6.js";const U={class:"main"},Y={class:"page-content"},Z={class:"container"},ee={class:"row"},te={class:"col-lg-10 offset-lg-1"},ae={key:3,class:"row blogs-main-page-section"},se={class:"entry entry-grid"},oe={class:"entry-media entry-gallery"},le=["src"],ne={class:"entry-body"},re={class:"entry-title"},ie={class:"entry-content"},ce={class:"mb-2"},ue={key:4,class:"row"},ge={class:"col-md-12"},de={"aria-label":"Page navigation"},pe={class:"pagination justify-content-center"},me={class:"page-item-total"},ve={__name:"Blogs",setup(_e){const g=A(),o=r(g.params.page?parseInt(g.params.page):1),N=r(9),I=r(0),b=r([]),P=r(g.params.id?parseInt(g.params.id):1),D=r([]),h=r(!1),$=r(null),k=async()=>{h.value=!0;try{const e=await axios.get("/api/get-blogs",{params:{page:o.value,per_page:N.value,category_id:P.value}});b.value=e.data.data,I.value=e.data.total}catch(e){e.value=e,console.error(e)}finally{h.value=!1}},E=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});D.value=e.data.other_blogs}catch(e){console.error(e)}},x=(e,l)=>{let s=l.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/blogs/${e}/${s}`},B=e=>`/media/blogs/page/${e}`,m=M(()=>Math.ceil(I.value/N.value)),v=r([]),S=()=>{o.value>1&&o.value--},z=()=>{o.value<m.value&&o.value++},q=e=>{o.value=e},F=()=>{v.value=b.value},H=e=>Number.isInteger(e),R=M(()=>{const e=[];o.value>1&&e.push("Prev");let s=Math.max(1,o.value-Math.floor(5/2)),i=Math.min(s+5-1,m.value);i-s<5-1&&(s=Math.max(1,i-5+1));for(let t=s;t<=i;t++)e.push(t);return o.value<m.value&&e.push("Next"),e}),W=e=>{const l=document.createElement("div");l.innerHTML=e;const s=l.querySelectorAll("p");for(const i of s){const t=i.textContent.trim();if(t.length>50)return t.length>140?t.slice(0,144)+"...":t}return""},j=e=>e.length>5?e.length>35?e.slice(0,35)+"...":e:"";return G(()=>{k(),E()}),T(o,k),T(b,F),K(()=>{const e=g.params;g.query,e.id!==""&&P!==e.id&&(o.value=1,P.value=e.id?parseInt(e.id):1,e.page!==""&&o!==e.page&&(o.value=e.page?parseInt(e.page):1),k())}),(e,l)=>{const s=O("router-link"),i=X("lazy");return n(),c("div",null,[a("main",U,[a("div",Y,[a("div",Z,[a("div",ee,[a("div",te,[l[4]||(l[4]=a("h2",{class:"about-us-title"},"Blogs",-1)),d(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:u(()=>l[0]||(l[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),l[5]||(l[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),h.value?(n(),f(C,{key:0,type:"loading",contentType:"Blog Posts"})):p("",!0),!v.value.length&&!h.value?(n(),f(C,{key:1,type:"empty",contentType:"Blog Posts"})):p("",!0),$.value?(n(),f(C,{key:2,type:"error",contentType:"Blog Posts"})):p("",!0),v.value.length?(n(),c("div",ae,[(n(!0),c(V,null,L(v.value,t=>(n(),c("div",{class:"entry-item col-sm-6 col-lg-4",key:t.id},[a("article",se,[a("figure",oe,[d(s,{to:x(t.id,t.name)},{default:u(()=>[J(a("img",{src:"/storage/"+t.main_image_path,alt:"image desc"},null,8,le),[[i,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"])]),a("div",ne,[a("h2",re,[d(s,{class:"text-primary",to:x(t.id,t.name)},{default:u(()=>[_(y(j(t.name)),1)]),_:2},1032,["to"])]),a("div",ie,[a("div",ce,y(W(t.excerpt)),1),d(s,{class:"btn btn-primary",to:x(t.id,t.name)},{default:u(()=>l[1]||(l[1]=[_(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)])),_:2},1032,["to"])])])])]))),128))])):p("",!0),v.value.length?(n(),c("div",ue,[a("div",ge,[a("nav",de,[a("ul",pe,[a("li",{class:w(["page-item",{disabled:o.value===1}])},[d(s,{class:"page-link page-link-prev",to:B(o.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:S},{default:u(()=>l[2]||(l[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(n(!0),c(V,null,L(R.value,t=>(n(),c("li",{class:w(["page-item",{active:t===o.value}]),key:t},[H(t)?(n(),f(s,{key:0,class:"page-link",to:B(t),onClick:he=>q(t)},{default:u(()=>[_(y(t),1)]),_:2},1032,["to","onClick"])):p("",!0)],2))),128)),a("li",me," of "+y(m.value),1),a("li",{class:w(["page-item",{disabled:o.value===m.value}])},[d(s,{class:"page-link page-link-next",to:B(o.value+1),"aria-label":"Next",onClick:z},{default:u(()=>l[3]||(l[3]=[_(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):p("",!0)])])])])])])}}},Be=Q(ve,[["__scopeId","data-v-463cd852"]]);export{Be as default};
