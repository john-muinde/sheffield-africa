import{a3 as ae,x as c,ac as P,P as te,Q as T,y as oe,z as m,a4 as se,f as le,o as n,c as r,a2 as E,a as e,p as j,al as ie,i as d,u as v,X as ne,e as f,l as g,n as V,F as U,g as q,ah as z,aq as re,t as C,m as u,W as ce,Y as de}from"./app-setting.46400ad2.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as ue}from"./vue-draggable-next.esm-bundler.fca02b0c.js";/* empty css                        */import{u as pe}from"./categories.182b9be2.js";import{M as O}from"./vue3-multiselect.umd.min.7eb8bf8d.js";/* empty css                         */import{u as _e}from"./solutions.9de1d50a.js";import"./_commonjsHelpers.f037b798.js";const ge={class:"layout-px-spacing"},he=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Solutions")])])])])])],-1),me={class:"row layout-top-spacing"},ve={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},be={class:"panel br-6 p-0"},fe=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"View Solutions")])])])],-1),xe={class:"panel-body"},we={class:"row"},ye={class:"form-group col-md-1"},ke=e("label",{for:"post-category",class:"form-label"},"Per Page",-1),Pe=de('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6),Ve=[Pe],Ce={class:"form-group col-md-3"},Me=e("label",{for:"post-category",class:"form-label"},"Segment",-1),Se={class:"form-group col-md-3",style:{display:"none"}},Le=e("label",{for:"post-category",class:"form-label"},"Main Category",-1),Ne={class:"form-group offset-md-3 col-md-5"},Ie=e("label",{for:"post-name"},"Search",-1),De={class:"table-responsive"},Be={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},Te={role:"rowgroup"},Ee={role:"row"},je={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},Ue=e("div",null,null,-1),qe=[Ue],ze=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Image")],-1),Oe=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")],-1),Ae=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Description")],-1),Fe=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Parent Category")],-1),He=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Status")],-1),$e=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Created At")],-1),Ge=e("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1),Qe={role:"rowgroup"},Re={key:0,"aria-colindex":"0",class:"handle"},We=e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1),Xe=[We],Ye={"aria-colindex":"1",role:"cell"},Je=["src"],Ke={"aria-colindex":"1",role:"cell"},Ze=["innerHTML"],ea={"aria-colindex":"3",role:"cell"},aa={"aria-colindex":"4",role:"cell"},ta={key:0,class:"badge badge-success inv-status"},oa={key:1,class:"badge badge-danger inv-status"},sa={"aria-colindex":"5",role:"cell"},la={"aria-colindex":"6",role:"cell",class:"text-center"},ia={class:"btn-group dropdown custom-dropdown"},na=e("button",{id:"btnGroupVerticalDrop1",type:"button",class:"btn btn-dark dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[u(" Action "),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1),ra={class:"dropdown-menu","aria-labelledby":"btnGroupVerticalDrop1"},ca=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),da=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),ua=["onClick"],pa=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),_a={"aria-label":"Page navigation",style:{"margin-top":"20px"}},ga={class:"pagination justify-content-center"},ha=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),ma=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),va=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),Ba={__name:"index",setup(ba){const{solutions:fa,getSolutions:xa,deleteSolution:A}=_e(),{getCategoryList:wa,categoryList:F,getMainCategoryList:H,categoryMainList:$,getSelectedCategoryList:G}=pe(),p=ae();c(p);const l=c(p.params.page?parseInt(p.params.page):1),I=c(0),Q=c(0),M=c(p.params.id?parseInt(p.params.id):1),S=c([]),x=c([]),{value:L}=P("perPage",null,{initialValue:"20"}),{value:D}=P("filter_category_id",null,{initialValue:""}),{value:w}=P("main_category",null,{initialValue:""}),{value:R}=P("search",null,{initialValue:""}),s=te({perPage:L,filter_category_id:D,main_category:w,search:R}),N=async()=>{try{s.main_category!=""&&s.search==""&&(s.perPage=1e4);const t=await z.get("/api/get-solutions",{params:{page:l.value,per_page:s.perPage,category_id:M.value,mainCategory:s.main_category.id,search:s.search}});I.value=t.data.categories.total,Q.value=t.data.categories.data.length,S.value=t.data.categories.data}catch(t){console.error(t)}},h=T(()=>Math.ceil(I.value/L.value)),_=c([]),W=()=>{l.value>1&&l.value--},B=()=>{l.value<h.value&&l.value++},X=t=>{l.value=t},y=()=>{_.value=S.value.slice(0,0+L.value)},Y=t=>Number.isInteger(t),J=T(()=>{const t=[];l.value>1&&t.push("Prev");let i=Math.max(1,l.value-Math.floor(5/2)),a=Math.min(i+5-1,h.value);a-i<5-1&&(i=Math.max(1,a-5+1));for(let b=i;b<=a;b++)t.push(b);return l.value<h.value&&t.push("Next"),t}),k=(t,o)=>`/admin/solutions/page/${o}`;oe(()=>{N(),H()}),m(l,N),m(w,t=>{if(w){const o=s.main_category.id;s.filter_category_id=null,G(o)}}),m(s,y),m(w,y),m(D,y),m(S,y),se(()=>{const t=p.params;p.query,t.id!==""&&M!==t.id&&(l.value=1,M.value=t.id?parseInt(t.id):1,t.page!==""&&l!==t.page&&(l.value=t.page?parseInt(t.page):1),N())});const K=async t=>{try{const o=await z.post("/api/solutions-update-order",{data:t})}catch(o){console.error("Error saving data:",o)}},Z=()=>{_.value.forEach(t=>{t.order=null})},ee=t=>{const o=_.value.map(i=>i.id);K(o),_.value.forEach(i=>{const a=o.indexOf(i.id);i.order=a+1})};return(t,o)=>{const i=le("router-link");return n(),r("div",ge,[(n(),E(re,{to:"#breadcrumb"},[he])),e("div",me,[e("div",ve,[e("div",be,[fe,e("div",xe,[e("div",we,[e("div",ye,[ke,j(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>s.perPage=a),id:"perpage",class:"form-control form-select select"},Ve,512),[[ie,s.perPage]])]),e("div",Ce,[Me,d(v(O),{modelValue:s.main_category,"onUpdate:modelValue":o[1]||(o[1]=a=>s.main_category=a),options:v($),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Se,[Le,d(v(O),{modelValue:s.filter_category_id,"onUpdate:modelValue":o[2]||(o[2]=a=>s.filter_category_id=a),options:v(F),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ne,[Ie,j(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>s.search=a),id:"post-name",type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[ne,s.search]])])]),e("div",De,[e("table",Be,[e("thead",Te,[e("tr",Ee,[s.main_category!==""?(n(),r("th",je,qe)):f("",!0),ze,Oe,Ae,Fe,He,$e,Ge])]),e("tbody",Qe,[d(v(ue),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=a=>_.value=a),animation:200,onStart:Z,onEnd:ee},{default:g(()=>[(n(!0),r(U,null,q(_.value,a=>(n(),r("tr",{key:a.id,role:"row",class:""},[s.main_category!==""?(n(),r("td",Re,Xe)):f("",!0),e("td",Ye,[e("img",{style:{width:"80px"},src:"/storage/"+a.main_image_path,class:"rounded profile-img",alt:"avatar"},null,8,Je)]),e("td",Ke,C(a.name),1),e("td",{"aria-colindex":"2",role:"cell",innerHTML:a.description},null,8,Ze),e("td",ea,C(a.solution_category.name),1),e("td",aa,[a.is_published===1?(n(),r("span",ta,"Published")):f("",!0),a.is_published!==1?(n(),r("span",oa,"Not Published")):f("",!0)]),e("td",sa,C(a.created_at),1),e("td",la,[e("div",ia,[na,e("div",ra,[d(i,{to:{name:"solutions.edit",params:{id:a.id}},class:"dropdown-item"},{default:g(()=>[u("Edit \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 "),ca]),_:2},1032,["to"]),d(i,{to:{name:"solutions.category.sequence",params:{id:a.id}},class:"dropdown-item"},{default:g(()=>[u("Update Category Sequence \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 "),da]),_:2},1032,["to"]),e("a",{href:"javascript:;",onClick:ce(b=>v(A)(a.id),["prevent"]),class:"dropdown-item"},[u("Delete \xA0\xA0\xA0\xA0\xA0 "),pa],8,ua)])])])]))),128))]),_:1},8,["modelValue"])])])]),e("nav",_a,[e("ul",ga,[e("li",{class:V(["page-item",{disabled:l.value===1}])},[d(i,{class:"page-link page-link-prev",to:k(x.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:W},{default:g(()=>[ha,u(" Prev ")]),_:1},8,["to"])],2),(n(!0),r(U,null,q(J.value,a=>(n(),r("li",{class:V(["page-item",{active:a===l.value}]),key:a},[Y(a)?(n(),E(i,{key:0,class:"page-link",to:k(x.value.id,a),onClick:b=>X(a)},{default:g(()=>[u(C(a),1)]),_:2},1032,["to","onClick"])):f("",!0)],2))),128)),e("li",{class:V(["page-item",{disabled:l.value===h.value}])},[d(i,{class:"page-link page-link-next",to:k(x.value.id,h.value),"aria-label":"Next",onClick:B},{default:g(()=>[u(" Last "),ma]),_:1},8,["to"])],2),e("li",{class:V(["page-item",{disabled:l.value===h.value}])},[d(i,{class:"page-link page-link-next",to:k(x.value.id,l.value+1),"aria-label":"Next",onClick:B},{default:g(()=>[u(" Next "),va]),_:1},8,["to"])],2)])])])])])])])}}};export{Ba as default};
