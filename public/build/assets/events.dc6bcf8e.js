import{r,c6 as y,cg as o}from"./index.b5cb60a8.js";import{$ as g}from"./Modal.e84f656d.js";function b(){const u=r([]),d=r([]),p=r({name:"",location:"",start_date:"",end_date:"",main_image_path:"",url:"",is_published:"",description:""}),i=y(),n=r({}),a=r(!1),v=async(e=1,s="",l="",t="",f="created_at",h="desc")=>{a.value=!0;try{const c=await o("get",`/api/events?page=${e}
                &search_id=${s}
                &search_title=${l}
                &search_global=${t}
                &order_column=${f}
                &order_direction=${h}`);u.value=c}catch(c){n.value=c}finally{a.value=!1}};return{eventList:d,events:u,event:p,getEvents:v,getEventList:async()=>{try{const e=await o("get","/api/event-list");d.value=e}catch(e){n.value=e}},getEvent:async e=>{a.value=!0;try{const s=await o("get",`/api/events/${e}`);p.value=s}catch(s){n.value=s}finally{a.value=!1}},storeEvent:async e=>{if(console.log(e),console.log("updating events"),a.value)return;a.value=!0,n.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const l={headers:{"Content-Type":"multipart/form-data"}};try{await o("post","/api/events",s,l),i.push({name:"events.index"}),e.name=null,e.location=null,e.startDate=null,e.endDate=null,e.description=null,e.main_image_path=null,e.is_published=null,showToast("Event saved successfully","success")}catch(t){n.value=t}finally{a.value=!1}},updateEvent:async e=>{if(a.value)return;a.value=!0,n.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&(console.log(`Appending ${t}:`,e[t]),s.append(t,e[t]));for(let t of s.entries())console.log(t[0]+": "+t[1]);const l={headers:{"Content-Type":"multipart/form-data"}};try{await o("put",`/api/events/${e.id}`,s,l),i.push({name:"events.index"}),showToast("Event updated successfully","success")}catch(t){n.value=t}finally{a.value=!1}},deleteEvent:async e=>{a.value=!0,g.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/events/${e}`).then(()=>{v(),i.push({name:"events.index"}),showToast("Event deleted successfully","success")})},onCancel(){}})},validationErrors:n,isLoading:a}}export{b as u};
