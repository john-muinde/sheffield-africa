import{r as d,c8 as _,cg as c}from"./index.97a6f1a7.js";import{$ as f}from"./Modal.d6995eb1.js";function C(){const h=d([]),m=d([]),y=d({name:"",parent_id:"",description:"",is_published:""}),p=_(),l=d({}),o=d(!1),g=async(e=1,a="",s="",i="",n="",u="created_at",t="desc")=>{try{const r=await c("get",`/api/products?page=${e}&search_id=${a}
                &search_title=${s}
                &search_parent_id=${i}
                &search_global=${n}
                &order_column=${u}
                &order_direction=${t}`);h.value=r}catch(r){l.value=r}};return{productList:m,products:h,product:y,getProducts:g,getProductList:async()=>{try{const e=await c("get","/api/product-list");m.value=e}catch(e){l.value=e}},getProduct:async e=>{try{const a=await c("get",`/api/products/${e}`);y.value=a}catch(a){l.value=a}},storeProduct:async(e,a)=>{if(o.value)return;o.value=!0,l.value={};let s=new FormData;const i=e.categories.map(t=>t.id);s.append("categories",i);for(var n=0;n<a.length;n++){let t=a[n];s.append("product_gallery["+n+"]",t)}for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&s.append(t,e[t]);const u={headers:{"content-type":"multipart/form-data"}};try{await c("post","/api/products",s,u),p.push({name:"products.index"}),e.name=null,e.description=null,e.parent_id=null,e.is_published=null,e.model_number=null,e.sku=null,e.quantity=null,e.cost_price=null,e.retail_price=null,e.weight=null,e.length=null,e.width=null,e.height=null,e.short_description=null,e.technical_specification=null,e.terms_of_operation=null,e.main_image=null,e.product_gallery=null,e.document=null,showToast("Product saved successfully","success")}catch(t){l.value=t}finally{o.value=!1}},updateProduct:async(e,a)=>{if(o.value)return;o.value=!0,l.value={};let s=new FormData;const i=e.categories.map(t=>t.id);if(s.append("categories",i),a.length>0)for(var n=0;n<a.length;n++){let t=a[n];s.append("product_gallery["+n+"]",t)}for(let t in e)if(e.hasOwnProperty(t)&&t!=="categories"){let r=e[t];r===null&&(t==="weight"||t==="length"||t==="height"||t==="width"||t==="quantity"||t==="cost_price"||t==="retail_price")&&(r=0),s.append(t,r)}const u={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put");try{await c("post",`/api/products/${e.id}`,s,u),p.push({name:"products.index"}),showToast("Product updated successfully","success")}catch(t){l.value=t}finally{o.value=!1}},deleteProduct:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/products/${e}`).then(()=>{g(),p.push({name:"products.index"}),showToast("Product deleted successfully","success")})},onCancel(){console.log("Cancel")}})},deleteProductImage:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){c("delete",`/api/product-images/${e}`).then(()=>{g(),p.go(0),showToast("Image deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:l,isLoading:o}}export{C as u};
