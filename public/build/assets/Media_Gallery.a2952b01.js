import{r as n,c as j,w as T,bE as u,bF as p,bG as t,ae as R,bK as w,aa as S,bN as V,bI as L,U,c8 as z,bL as g,c0 as G,c6 as q,o as O,ad as J,bM as K,V as H,e as P,bR as D,bU as B,c4 as Q,a2 as W}from"./index.3edc9a5d.js";import"./use-meta.cdc2f9a7.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as M}from"./ContentState.6351ff25.js";import"./_commonjsHelpers.f037b798.js";import"./transition.03996002.js";const X={key:0,class:"filter-container"},Y={class:"filter-heading"},Z=["value"],ee={class:"filter-content"},te={class:"checkbox-wrapper"},ae={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"checkmark"},se={class:"filter-label"},le={key:0,class:"filter-count"},re={__name:"DynamicFilters",props:{items:{type:Array,required:!0},filterColumn:{type:String,required:!0},filters:{type:Array,required:!1,default:()=>[]},selectedFilters:{type:Array,required:!1,default:()=>[]},showNumbers:{type:Boolean,default:!1},searchTerm:{type:String,default:""},classes:{type:String,default:""}},emits:["update:displayedProducts"],setup($,{emit:y}){const k=y,e=$,d=n(e.selectedFilters),C=n(e.showNumbers),_=n(e.items),v=n(e.searchTerm),m=n([]),h=n([]);e.filters.length>0&&(typeof e.filters[0]=="object"?(m.value=e.filters.map(a=>Object.keys(a)[0]),h.value=e.filters.map(a=>Object.values(a)[0])):(m.value=e.filters,h.value=e.filters)),j(()=>{var a,l,i;if(m.value.length)return m.value;if(!((a=e.items)!=null&&a.length)&&!((l=m.value)!=null&&l.length)&&!e.filterColumn)return[];if(!((i=e.items)!=null&&i.length)||!e.filterColumn)return[];m.value=[...new Set(e.items.map(f=>f[e.filterColumn]).filter(Boolean))].sort(),h.value=m.value});const F=a=>e.items.filter(l=>l[e.filterColumn]===a).length,b=a=>a.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),x=()=>{d.value.length===0?_.value=e.items:_.value=e.items.filter(a=>d.value.includes(a[e.filterColumn])),v.value&&(_.value=_.value.filter(a=>{var l,i,f;return((l=a.name)==null?void 0:l.toLowerCase().includes(v.value.toLowerCase()))||((i=a.description)==null?void 0:i.toLowerCase().includes(v.value.toLowerCase()))||((f=a.tags)==null?void 0:f.toLowerCase().includes(v.value.toLowerCase()))||a[e.filterColumn].toLowerCase().includes(v.value.toLowerCase())})),k("update:displayedProducts",{filteredData:_.value,selectedFilters:d.value})};return T(()=>e.searchTerm,a=>{v.value=a,x()}),T(()=>e.items,a=>{if(_.value=a,d.value.length>0){const l=a.filter(i=>d.value.includes(i[e.filterColumn]));k("update:displayedProducts",{filteredData:l,selectedFilters:d.value})}else k("update:displayedProducts",{filteredData:a,selectedFilters:[]})},{deep:!0}),(a,l)=>m.value.length?(u(),p("div",X,[t("h4",Y,[l[1]||(l[1]=t("span",{class:"filter-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})])],-1)),R(" "+w(b($.filterColumn)),1)]),t("div",{class:L(["filter-options-container",e.classes])},[(u(!0),p(S,null,V(m.value,(i,f)=>(u(),p("label",{key:i,class:L(["filter-card",{"filter-card-selected":d.value.includes(i)}])},[U(t("input",{"onUpdate:modelValue":l[0]||(l[0]=N=>d.value=N),type:"checkbox",value:i,class:"filter-checkbox",onChange:x},null,40,Z),[[z,d.value]]),t("div",ee,[t("div",te,[t("div",{class:L(["custom-checkbox",{checked:d.value.includes(i)}])},[d.value.includes(i)?(u(),p("svg",ae,l[2]||(l[2]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):g("",!0)],2),t("span",se,w(h.value[f]),1)]),C.value?(u(),p("span",le,w(F(i)),1)):g("",!0)])],2))),128))],2)])):g("",!0)}},oe=A(re,[["__scopeId","data-v-ce636ef1"]]);const ne={class:"main"},ie={class:"page-content"},ce={class:"container"},ue={class:"row"},de={class:"col-lg-10 offset-lg-1 gallery-main-page-section"},pe={key:3,class:"row mt-2"},ve={class:"entry entry-mask"},me={class:"entry-media entry-gallery"},_e=["src"],fe={class:"entry-body"},ge={class:"entry-title"},ye={class:"entry-cats mt-1"},he={style:{"background-color":"#c02434",padding:"5px"}},be={class:"col-lg-12 mt-3"},Ce={"aria-label":"Page navigation"},we={class:"pagination justify-content-center"},ke=["onClick"],xe={__name:"Media_Gallery",setup($){const y=G(),k=q(),e=n(y.params.page?parseInt(y.params.page):1);n(12);const d=n(0),C=n([]),_=n(y.params.id?parseInt(y.params.id):1),v=n([]),m=n([]),h=n({}),F=n(["CSR","EVENT","PROJECT"]),b=n(!1),x=n(null),a=async(o=null)=>{b.value=!0,typeof o=="string"&&o.includes("http")&&(o=o.split("/api/").pop());try{const s=(await Q.get(o||"/api/get-media-center-galleries",{params:{page:e.value,category_id:_.value,gallery_type:m.value}})).data;C.value=s.data,d.value=s.total,h.value={next_page_url:s.next_page_url,prev_page_url:s.prev_page_url,links:s.links},b.value=!1,f(C.value)}catch(r){r.value=r,console.error(r)}finally{b.value=!1}},l=(o,r)=>{let s=r.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/gallery/${o}/${s}`},i=o=>{if(o){const s=new URLSearchParams(o.split("?")[1]).get("page");s&&(e.value=parseInt(s),k.push(`/media/gallery/page/${e.value}`))}},f=o=>{v.value=o},N=({filteredData:o,selectedFilters:r})=>{f(o),r.value=r};return O(()=>{a()}),T(C,f),J(()=>{const o=y.params,r=o.id?parseInt(o.id):1,s=o.page?parseInt(o.page):1;(_.value!==r||e.value!==s)&&(_.value=r,e.value=s,a())}),(o,r)=>{var I;const s=K("router-link"),E=H("lazy");return u(),p("div",null,[t("main",ne,[t("div",ie,[t("div",ce,[t("div",ue,[t("div",de,[r[2]||(r[2]=t("h2",{class:"about-us-title"}," Gallery ",-1)),P(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:D(()=>r[0]||(r[0]=[t("i",{class:"icon-long-arrow-left"},null,-1),t("span",null,"Back to Media Center",-1)])),_:1}),r[3]||(r[3]=t("p",{class:"lead about-us-lead text-primary mb-3"}," Journey Through the Lens: Our Story in Pictures ",-1)),P(oe,{items:C.value,"filter-column":"gallery_type",filters:F.value,"onUpdate:displayedProducts":N},null,8,["items","filters"]),b.value?(u(),B(M,{key:0,type:"loading","content-type":"gallery"})):g("",!0),!v.value.length&&!b.value?(u(),B(M,{key:1,type:"empty","content-type":"gallery"})):g("",!0),x.value?(u(),B(M,{key:2,type:"error","content-type":"gallery"})):g("",!0),v.value.length?(u(),p("div",pe,[(u(!0),p(S,null,V(v.value,c=>(u(),p("div",{key:c.id,class:"entry-item col-sm-6 col-lg-4"},[t("article",ve,[t("figure",me,[P(s,{to:l(c.id,c.name)},{default:D(()=>[U(t("img",{src:"/storage/"+c.main_image_path,alt:"image desc"},null,8,_e),[[E,"/storage/"+c.main_image_path,"src"]])]),_:2},1032,["to"])]),t("div",fe,[r[1]||(r[1]=t("div",{class:"entry-meta"},[t("span",{class:"meta-separator"},"|")],-1)),t("h2",ge,[P(s,{to:l(c.id,c.name)},{default:D(()=>[R(w(c.name),1)]),_:2},1032,["to"])]),t("div",ye,[t("b",he,w(c.gallery_type),1)])])])]))),128)),t("div",be,[t("nav",Ce,[t("ul",we,[(u(!0),p(S,null,V((I=h.value)==null?void 0:I.links,(c,Pe)=>(u(),p("li",{key:c.label,class:L(["page-item",{active:c.active}])},[c.url&&Number.isInteger(Number(c.label))?(u(),p("a",{key:0,class:"page-link",onClick:W(Le=>i(c.url),["prevent"])},w(c.label),9,ke)):g("",!0)],2))),128))])])])])):g("",!0)])])])])])])}}},Te=A(xe,[["__scopeId","data-v-d5c14c98"]]);export{Te as default};
