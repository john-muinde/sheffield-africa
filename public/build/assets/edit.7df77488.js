import{cc as w,cd as D,ce as u,r as T,z as j,c7 as G,o as X,W as x,bo as o,bp as n,bT as z,bq as e,aB as A,J as W,B as _,c1 as Z,bv as d,a2 as t,S as v,by as g,j as b,X as E,cl as J,I as $,bu as H,cf as K,cg as O}from"./app-setting.109e5d36.js";import{u as Q}from"./csrs.4966d7a6.js";/* empty css                                     */import{F as f}from"./file-upload-with-preview.esm.fbf56fa2.js";import{q as y}from"./vue3-quill.c576bdbc.js";import"./_commonjsHelpers.f037b798.js";const Y={class:"container"},ee={class:"container"},se={class:"row"},ie={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},ae={class:"statbox panel box box-shadow"},le={class:"panel-body"},te={class:"row"},oe={class:"form-group col-md-12"},ne={class:"text-danger mt-1"},re={class:"text-danger mt-1"},ue={class:"form-group"},de={class:"form-group"},me={class:"form-group"},ce={class:"custom-file-container","data-upload-id":"myFirstImage"},pe={class:"custom-file-container__custom-file",for:"main_image"},_e={class:"custom-file-container","data-upload-id":"myCsrGallery"},ve={class:"custom-file-container__custom-file",for:"csr_gallery"},ge={type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",ref:"csr_gallery",multiple:"",id:"csr_gallery"},be={class:"custom-file-container__image-preview"},fe=["onClick"],ye={class:"form-group col-md-4"},he={class:"text-danger mt-1"},Ie={class:"text-danger mt-1"},Ce=["disabled"],Se={class:""},we={key:0},xe={key:1},Ne={__name:"edit",setup(Ee){w("required",K),w("min",O);const k={name:"required|min:3",csr_introduction:"required",company_involvement:"required",collaborations_and_partnership:"required|min:3",is_published:"required"},{validate:F,errors:h,resetForm:ke}=D({validationSchema:k}),{csr:l,getCsr:q,updateCsr:I,validationErrors:C,isLoading:m,getCsrList:Fe,csrList:qe,deleteCsrImage:R}=Q(),{value:V}=u("name",null,{initialValue:""}),{value:U}=u("csr_introduction",null,{initialValue:""}),{value:P}=u("company_involvement",null,{initialValue:""}),{value:B}=u("collaborations_and_partnership",null,{initialValue:""}),{value:M}=u("is_published",null,{initialValue:""}),i=T({name:V,csr_introduction:U,company_involvement:P,collaborations_and_partnership:B,is_published:M,main_image:"",csr_gallery:""}),c=j({modules:{}}),L=G();function N(){F().then(p=>{if(p.valid){const r=document.getElementById("csr_gallery").files;r.length>0?I(i,r):I(i,[])}})}return X(()=>{q(L.params.id),x(()=>{if(l.value&&l.value.main_image_path){const r={images:{baseImage:"/storage/"+l.value.main_image_path,backgroundImage:""}};new f("myFirstImage",r)}else new f("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new f("myCsrGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),x(()=>{i.id=l.value.id,i.name=l.value.name,i.csr_introduction=l.value.csr_introduction,i.company_involvement=l.value.company_involvement,i.collaborations_and_partnership=l.value.collaborations_and_partnership,i.is_published=l.value.is_published,i.csr_images=l.value.csr_images,console.log(l.value)}),(p,s)=>{var r,S;return o(),n("div",Y,[(o(),z(A,{to:"#breadcrumb"},[s[6]||(s[6]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"CSRs")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Edit CSR")])])])])])],-1))])),e("div",ee,[e("div",se,[e("div",ie,[e("div",ae,[s[21]||(s[21]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"Edit CSR")])])])],-1)),e("div",le,[e("form",{onSubmit:W(N,["prevent"])},[e("div",te,[e("div",oe,[s[7]||(s[7]=e("label",{for:"post-name"},"CSR Name",-1)),_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.name=a),id:"post-name",type:"text",class:"form-control",placeholder:"Enter CSR Name ..."},null,512),[[Z,i.name]]),e("div",ne,d(t(h).name),1),e("div",re,[(o(!0),n(v,null,g((r=t(C))==null?void 0:r.name,a=>(o(),n("div",null,d(a),1))),256))])]),e("div",ue,[s[8]||(s[8]=e("label",{for:"csr_introduction"},"CSR Introduction",-1)),b(t(y),{value:i.csr_introduction,"onUpdate:value":s[1]||(s[1]=a=>i.csr_introduction=a),id:"csr_introduction",options:c.value,placeholder:"Enter Short Description ..."},null,8,["value","options"])]),e("div",de,[s[9]||(s[9]=e("label",{for:"post_description"},"Company company_involvement",-1)),b(t(y),{value:i.company_involvement,"onUpdate:value":s[2]||(s[2]=a=>i.company_involvement=a),options:c.value,placeholder:"Enter Description ..."},null,8,["value","options"])]),e("div",me,[s[10]||(s[10]=e("label",{for:"post_description"},"Collaborations and collaborations_and_partnerships",-1)),b(t(y),{value:i.collaborations_and_partnership,"onUpdate:value":s[3]||(s[3]=a=>i.collaborations_and_partnership=a),options:c.value,placeholder:"Enter Technical Specification ..."},null,8,["value","options"])]),e("div",ce,[s[13]||(s[13]=e("label",null,[E("Upload Main CSR Image "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e("label",pe,[e("input",{type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:s[4]||(s[4]=a=>i.main_image=a.target.files[0]),id:"main_image"},null,32),s[11]||(s[11]=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),s[12]||(s[12]=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),s[14]||(s[14]=e("div",{class:"custom-file-container__image-preview"},null,-1))]),e("div",_e,[s[18]||(s[18]=e("label",null,[E("CSR Gallery (multiple images allowed) "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e("label",ve,[e("input",ge,null,512),s[15]||(s[15]=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),s[16]||(s[16]=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),e("div",be,[(o(!0),n(v,null,g(i.csr_images,a=>(o(),n("div",{key:a.id,class:"custom-file-container__image-multi-preview",style:H("background-image: url(/storage/"+a.name+")")},[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:Re=>t(R)(a.id)},s[17]||(s[17]=[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"\xD7",-1)]),8,fe)],4))),128))])]),e("div",ye,[s[20]||(s[20]=e("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1)),e("div",null,[_(e("select",{"onUpdate:modelValue":s[5]||(s[5]=a=>i.is_published=a),id:"is_published",class:"form-select"},s[19]||(s[19]=[e("option",{value:""}," Select Publishing Status ... ",-1),e("option",{selected:"",value:"1"}," Published ",-1),e("option",{value:"0"}," Not Published ",-1)]),512),[[J,i.is_published]])]),e("div",he,d(t(h).is_published),1),e("div",Ie,[(o(!0),n(v,null,g((S=t(C))==null?void 0:S.is_published,a=>(o(),n("div",null,d(a),1))),256))])])]),e("button",{disabled:t(m),class:"btn btn-primary mt-3"},[_(e("div",Se,null,512),[[$,t(m)]]),t(m)?(o(),n("span",we,"Processing...")):(o(),n("span",xe,"Update"))],8,Ce)],32)])])])])])])}}};export{Ne as default};
