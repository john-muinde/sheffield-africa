import{a3 as ee,s as d,ad as P,P as ae,Q as B,u as te,x as m,a4 as le,f as oe,o as i,c as n,a0 as E,a as e,ap as se,p as U,ak as re,X as ie,i as p,W as f,U as ne,e as h,l as v,n as V,F as j,g as O,ag as F,t as x,T as de,m as C}from"./app-setting.d3c4d057.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as ce}from"./vue-draggable-next.esm-bundler.723b8ae7.js";/* empty css                        */import{u as ue}from"./categories.4c97a0cc.js";import{M as $}from"./vue3-multiselect.umd.min.357405b9.js";/* empty css                         */import"./_commonjsHelpers.f037b798.js";const pe={class:"layout-px-spacing"},ge={class:"row layout-top-spacing"},me={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},ve={class:"panel br-6 p-0"},be={class:"panel-body"},fe={class:"row"},he={class:"form-group col-md-1"},xe={class:"form-group col-md-3"},_e={class:"form-group col-md-3"},ye={class:"form-group col-md-5"},ke={class:"table-responsive"},we={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},Pe={role:"rowgroup"},Ve={role:"row"},Ce={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},Me={role:"rowgroup"},Ne={key:0,"aria-colindex":"0",class:"handle"},Ie={"aria-colindex":"1",role:"cell"},Le={"aria-colindex":"2",role:"cell"},Se={"aria-colindex":"3",role:"cell"},De={"aria-colindex":"4",role:"cell"},Te={key:0,class:"badge badge-success inv-status"},Be={key:1,class:"badge badge-danger inv-status"},Ee={"aria-colindex":"5",role:"cell"},Ue={"aria-colindex":"6",role:"cell",class:"text-center"},je=["onClick"],Oe={"aria-label":"Page navigation",style:{"margin-top":"20px"}},Fe={class:"pagination justify-content-center"},Ye={__name:"index",setup($e){const{getCategoryList:ze,categoryList:z,getMainCategoryList:A,categoryMainList:q,getSelectedCategoryList:H}=ue(),c=ee();d(c);const s=d(c.params.page?parseInt(c.params.page):1),S=d(0),Q=d(0),M=d(c.params.id?parseInt(c.params.id):1),N=d([]),_=d([]),{value:I}=P("perPage",null,{initialValue:"20"}),{value:D}=P("filter_category_id",null,{initialValue:""}),{value:y}=P("main_category",null,{initialValue:""}),{value:R}=P("search",null,{initialValue:""}),o=ae({perPage:I,filter_category_id:D,main_category:y,search:R}),L=async()=>{try{o.main_category!=""&&o.search==""&&(o.perPage=1e4);const l=await F.get("/api/get-categories",{params:{page:s.value,per_page:o.perPage,category_id:M.value,mainCategory:o.main_category.id,search:o.search,filter_category_id:o.filter_category_id&&o.filter_category_id.id||null}});S.value=l.data.categories.total,Q.value=l.data.categories.data.length,N.value=l.data.categories.data}catch(l){console.error(l)}},g=B(()=>Math.ceil(S.value/I.value)),u=d([]),W=()=>{s.value>1&&s.value--},T=()=>{s.value<g.value&&s.value++},X=l=>{s.value=l},k=()=>{u.value=N.value.slice(0,0+I.value)},G=l=>Number.isInteger(l),J=B(()=>{const l=[];s.value>1&&l.push("Prev");let r=Math.max(1,s.value-Math.floor(5/2)),t=Math.min(r+5-1,g.value);t-r<5-1&&(r=Math.max(1,t-5+1));for(let b=r;b<=t;b++)l.push(b);return s.value<g.value&&l.push("Next"),l}),w=(l,a)=>`/admin/categories/page/${a}`;te(()=>{L(),A()}),m(s,L),m(y,l=>{if(y){const a=o.main_category.id;o.filter_category_id=null,H(a)}}),m(o,k),m(y,k),m(D,k),m(N,k),le(()=>{const l=c.params;c.query,l.id!==""&&M!==l.id&&(s.value=1,M.value=l.id?parseInt(l.id):1,l.page!==""&&s!==l.page&&(s.value=l.page?parseInt(l.page):1),L())});const K=async l=>{try{const a=await F.post("/api/categories-update-order",{data:l})}catch(a){console.error("Error saving data:",a)}},Y=()=>{u.value.forEach(l=>{l.order=null})},Z=l=>{const a=u.value.map(r=>r.id);K(a),u.value.forEach(r=>{const t=a.indexOf(r.id);r.order=t+1})};return(l,a)=>{const r=oe("router-link");return i(),n("div",pe,[(i(),E(se,{to:"#breadcrumb"},[a[5]||(a[5]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Categories")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Categories")])])])])])],-1))])),e("div",ge,[e("div",me,[e("div",ve,[a[24]||(a[24]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"View Categories")])])])],-1)),e("div",be,[e("div",fe,[e("div",he,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),U(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>o.perPage=t),id:"perpage",class:"form-control form-select select"},a[6]||(a[6]=[ie('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6)]),512),[[re,o.perPage]])]),e("div",xe,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),p(f($),{modelValue:o.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>o.main_category=t),options:f(q),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",_e,[a[9]||(a[9]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),p(f($),{modelValue:o.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>o.filter_category_id=t),options:f(z),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",ye,[a[10]||(a[10]=e("label",{for:"post-name"},"Search",-1)),U(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>o.search=t),id:"post-name",type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[ne,o.search]])])]),e("div",ke,[e("table",we,[e("thead",Pe,[e("tr",Ve,[o.main_category!==""?(i(),n("th",Ce,a[11]||(a[11]=[e("div",null,null,-1)]))):h("",!0),a[12]||(a[12]=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")],-1)),a[13]||(a[13]=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Description")],-1)),a[14]||(a[14]=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Parent Category")],-1)),a[15]||(a[15]=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Status")],-1)),a[16]||(a[16]=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Created At")],-1)),a[17]||(a[17]=e("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1))])]),e("tbody",Me,[p(f(ce),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=t=>u.value=t),animation:200,onStart:Y,onEnd:Z},{default:v(()=>[(i(!0),n(j,null,O(u.value,t=>(i(),n("tr",{key:t.id,role:"row",class:""},[o.main_category!==""?(i(),n("td",Ne,a[18]||(a[18]=[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1)]))):h("",!0),e("td",Ie,x(t.name),1),e("td",Le,x(t.description),1),e("td",Se,x(t.parent?t.parent.name:"----"),1),e("td",De,[t.is_published===1?(i(),n("span",Te,"Published")):h("",!0),t.is_published!==1?(i(),n("span",Be,"Not Published")):h("",!0)]),e("td",Ee,x(t.created_at),1),e("td",Ue,[p(r,{to:{name:"categories.edit",params:{id:t.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:v(()=>a[19]||(a[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e("a",{href:"javascript:;",onClick:de(b=>l.deleteCategory(t.id),["prevent"]),class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top"},a[20]||(a[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,je)])]))),128))]),_:1},8,["modelValue"])])])]),e("nav",Oe,[e("ul",Fe,[e("li",{class:V(["page-item",{disabled:s.value===1}])},[p(r,{class:"page-link page-link-prev",to:w(_.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:W},{default:v(()=>a[21]||(a[21]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),C(" Prev ")])),_:1},8,["to"])],2),(i(!0),n(j,null,O(J.value,t=>(i(),n("li",{class:V(["page-item",{active:t===s.value}]),key:t},[G(t)?(i(),E(r,{key:0,class:"page-link",to:w(_.value.id,t),onClick:b=>X(t)},{default:v(()=>[C(x(t),1)]),_:2},1032,["to","onClick"])):h("",!0)],2))),128)),e("li",{class:V(["page-item",{disabled:s.value===g.value}])},[p(r,{class:"page-link page-link-next",to:w(_.value.id,g.value),"aria-label":"Next",onClick:T},{default:v(()=>a[22]||(a[22]=[C(" Last "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e("li",{class:V(["page-item",{disabled:s.value===g.value}])},[p(r,{class:"page-link page-link-next",to:w(_.value.id,s.value+1),"aria-label":"Next",onClick:T},{default:v(()=>a[23]||(a[23]=[C(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{Ye as default};
