import{c2 as le,r as m,a as se,c as J,o as re,w as A,af as ie,bO as W,bG as n,bH as d,bW as z,bI as e,aV as ne,W as G,cc as de,c4 as ce,e as v,am as _,c5 as ue,bN as k,bT as h,bK as N,ac as K,bP as R,cf as pe,bM as w,a4 as ge,ag as S}from"./index.060ba720.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as me}from"./vue-draggable-next.esm-bundler.16310b4a.js";import"./use-meta.4a607ab9.js";import{a as D}from"./vee-validate.e2f2a269.js";import{u as ve}from"./categories.f01e170c.js";import"./_commonjsHelpers.f037b798.js";import"./Modal.70dc512b.js";const be=F=>{const u=new Date(F),L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$=["January","February","March","April","May","June","July","August","September","October","November","December"],T=L[u.getDay()],P=u.getDate(),I=$[u.getMonth()],B=u.getFullYear(),p=c=>{if(c>3&&c<21)return"th";switch(c%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},s=u.getHours(),b=u.getMinutes(),O=b<10?`0${b}`:b,y=s>=12?"PM":"AM",x=s%12||12;return`${T}, ${P}${p(P)} ${I} ${B}, ${x}:${O} ${y}`};const fe={class:"layout-px-spacing"},he={class:"row layout-top-spacing"},ye={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},xe={class:"panel br-6 p-0"},_e={class:"panel-body"},ke={class:"row d-flex align-items-center justify-content-between"},we={class:"form-group col-md-1"},Pe={class:"form-group col-md-3"},Ve={class:"form-group col-md-3"},Ce={class:"form-group col-md-4"},Me={class:"table-responsive"},Ne={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},Se={role:"rowgroup"},De={role:"row"},Le={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},$e={role:"rowgroup"},Te={key:0,"aria-colindex":"0",class:"handle"},Ie={"aria-colindex":"1",role:"cell"},Be={"aria-colindex":"2",role:"cell"},Oe={"aria-colindex":"3",role:"cell"},je={"aria-colindex":"4",role:"cell"},Ee={key:0,class:"badge badge-success inv-status"},Ae={key:1,class:"badge badge-danger inv-status"},Fe={"aria-colindex":"5",role:"cell"},Ue={"aria-colindex":"6",role:"cell",class:"text-center"},He=["onClick"],Je={"aria-label":"Page navigation",style:{"margin-top":"20px"}},We={class:"pagination justify-content-center"},aa={__name:"index",setup(F){const{getCategoryList:u,categoryList:L,getMainCategoryList:$,categoryMainList:T,getSelectedCategoryList:P,deleteCategory:I,updateDatabaseOrder:B}=ve(),p=le(),s=m(p.params.page?M(p.params.page):1),b=m(0),O=m(0),y=m(p.params.id?M(p.params.id):1),x=m([]),c=m([]),{value:j}=D("perPage",null,{initialValue:"20"}),{value:U}=D("filter_category_id",null,{initialValue:""}),{value:V}=D("main_category",null,{initialValue:""}),{value:Y}=D("search",null,{initialValue:""}),l=se({perPage:j,filter_category_id:U,main_category:V,search:Y}),E=async()=>{var o;try{l.main_category!=""&&l.search==""&&(l.perPage=1e4);const a=await pe.get("/api/get-categories",{params:{page:s.value,per_page:l.perPage,category_id:y.value,mainCategory:l.main_category.id,search:l.search,filter_category_id:((o=l.filter_category_id)==null?void 0:o.id)||null}});b.value=a.data.categories.total,O.value=a.data.categories.data.length,x.value=a.data.categories.data}catch(a){console.error(a)}},f=J(()=>Math.ceil(b.value/j.value)),g=m([]),q=()=>{s.value>1&&s.value--},H=()=>{s.value<f.value&&s.value++},Q=o=>{s.value=o},X=()=>{g.value=x.value.slice(0,0+j.value)},Z=o=>Number.isInteger(o),ee=J(()=>{const o=[];s.value>1&&o.push("Prev");let r=Math.max(1,s.value-Math.floor(5/2)),i=Math.min(r+5-1,f.value);i-r<5-1&&(r=Math.max(1,i-5+1));for(let t=r;t<=i;t++)o.push(t);return s.value<f.value&&o.push("Next"),o}),C=(o,a)=>`/admin/categories/page/${a}`;re(()=>{E(),$()}),A([s,l],E),A(V,o=>{if(V){const a=l.main_category.id;l.filter_category_id=null,P(a)}}),A([l,V,U,x],X);const M=o=>{const a=o===""?null:parseInt(o);return isNaN(a)?null:a};ie(()=>{const o=p.params;o.id!==""&&y.value!==M(o.id)&&(s.value=1,y.value=M(o.id),E())});const ae=()=>{g.value.forEach(o=>{o.order=null})},te=o=>{const a=g.value.map(r=>r.id);B(a),g.value.forEach(r=>{const i=a.indexOf(r.id);r.order=i+1})};return(o,a)=>{const r=W("multiselect"),i=W("router-link");return n(),d("div",fe,[(n(),z(ne,{to:"#breadcrumb"},[a[5]||(a[5]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Categories")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Categories")])])])])])],-1))])),e("div",he,[e("div",ye,[e("div",xe,[a[24]||(a[24]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"View Categories")])])])],-1)),e("div",_e,[e("div",ke,[e("div",we,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),G(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.perPage=t),id:"perpage",class:"form-control form-select select"},a[6]||(a[6]=[ce('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6)]),512),[[de,l.perPage]])]),e("div",Pe,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),v(r,{modelValue:l.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>l.main_category=t),options:_(T),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ve,[a[9]||(a[9]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),v(r,{modelValue:l.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>l.filter_category_id=t),options:_(L),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Ce,[a[10]||(a[10]=e("label",{for:"post-name"},"Search",-1)),G(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>l.search=t),id:"post-name",type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[ue,l.search]])])]),e("div",Me,[e("table",Ne,[e("thead",Se,[e("tr",De,[l.main_category!==""?(n(),d("th",Le,a[11]||(a[11]=[e("div",null,null,-1)]))):k("",!0),a[12]||(a[12]=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")],-1)),a[13]||(a[13]=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Description")],-1)),a[14]||(a[14]=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Parent Category")],-1)),a[15]||(a[15]=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Status")],-1)),a[16]||(a[16]=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Created At")],-1)),a[17]||(a[17]=e("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1))])]),e("tbody",$e,[v(_(me),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=t=>g.value=t),animation:200,onStart:ae,onEnd:te},{default:h(()=>[(n(!0),d(K,null,R(g.value,t=>(n(),d("tr",{key:t.id,role:"row",class:""},[l.main_category!==""?(n(),d("td",Te,a[18]||(a[18]=[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1)]))):k("",!0),e("td",Ie,w(t.name),1),e("td",Be,w(t.description),1),e("td",Oe,w(t.parent?t.parent.name:"----"),1),e("td",je,[t.is_published===1?(n(),d("span",Ee,"Published")):k("",!0),t.is_published!==1?(n(),d("span",Ae,"Not Published")):k("",!0)]),e("td",Fe,w(_(be)(t.created_at)),1),e("td",Ue,[v(i,{to:{name:"categories.edit",params:{id:t.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:h(()=>a[19]||(a[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e("a",{href:"javascript:;",onClick:ge(oe=>_(I)(t.id),["prevent"]),class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top"},a[20]||(a[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,He)])]))),128))]),_:1},8,["modelValue"])])])]),e("nav",Je,[e("ul",We,[e("li",{class:N(["page-item",{disabled:s.value===1}])},[v(i,{class:"page-link page-link-prev",to:C(c.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:q},{default:h(()=>a[21]||(a[21]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),S(" Prev ")])),_:1},8,["to"])],2),(n(!0),d(K,null,R(ee.value,t=>(n(),d("li",{class:N(["page-item",{active:t===s.value}]),key:t},[Z(t)?(n(),z(i,{key:0,class:"page-link",to:C(c.value.id,t),onClick:oe=>Q(t)},{default:h(()=>[S(w(t),1)]),_:2},1032,["to","onClick"])):k("",!0)],2))),128)),e("li",{class:N(["page-item",{disabled:s.value===f.value}])},[v(i,{class:"page-link page-link-next",to:C(c.value.id,f.value),"aria-label":"Next",onClick:H},{default:h(()=>a[22]||(a[22]=[S(" Last "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e("li",{class:N(["page-item",{disabled:s.value===f.value}])},[v(i,{class:"page-link page-link-next",to:C(c.value.id,s.value+1),"aria-label":"Next",onClick:H},{default:h(()=>a[23]||(a[23]=[S(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{aa as default};
