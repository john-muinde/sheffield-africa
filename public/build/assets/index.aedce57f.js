import{V as Te,G as Pe,$ as y,o as Fe,i as Ae}from"./Modal.ef1a34ae.js";import{aa as we,ae as Z,B as f,aB as $e,ad as _,b$ as Be,ac as Ne,b_ as V,I as x,Q as ee,d as O,o as Re,A as Ie,e as m,L as h,T as Me,b1 as ne,aF as Se,ao as Oe,aD as Ee,aE as De,K as W,au as q,bA as Ve,c0 as je,c1 as Le,c as j,bz as ze,b9 as He,w as G,am as Qe,ah as Ke}from"./index.51e7cafa.js";function te(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=e;if(Array.isArray(e)&&(s=we(e)[0]),!s)return null;const a=Z(s,n,o);return a.props=r?f(f({},a.props),n):a.props,$e(typeof a.props.class!="object"),a}function on(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e.map(o=>te(o,n,r))}function J(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Array.isArray(e))return e.map(s=>J(s,n,r,o));{if(!_(e))return e;const s=te(e,n,r,o);return Array.isArray(s.children)&&(s.children=J(s.children)),s}}function We(e,n,r){V(Z(e,f({},n)),r)}const oe=e=>(e||[]).some(n=>_(n)?!(n.type===Be||n.type===Ne&&!oe(n.children)):!0)?e:null;function ln(e,n,r,o){var s;const a=(s=e[n])===null||s===void 0?void 0:s.call(e,r);return oe(a)?a:o==null?void 0:o()}const qe=()=>{const e=x(!1);return ee(()=>{e.value=!0}),e},Ge=qe,Je={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Me(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function U(e){return!!(e&&e.then)}const X=O({compatConfig:{MODE:3},name:"ActionButton",props:Je,setup(e,n){let{slots:r}=n;const o=x(!1),s=x(),a=x(!1);let C;const v=Ge();Re(()=>{e.autofocus&&(C=setTimeout(()=>{var t,u;return(u=(t=Ie(s.value))===null||t===void 0?void 0:t.focus)===null||u===void 0?void 0:u.call(t)}))}),ee(()=>{clearTimeout(C)});const g=function(){for(var t,u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];(t=e.close)===null||t===void 0||t.call(e,...l)},c=t=>{!U(t)||(a.value=!0,t.then(function(){v.value||(a.value=!1),g(...arguments),o.value=!1},u=>(v.value||(a.value=!1),o.value=!1,Promise.reject(u))))},i=t=>{const{actionFn:u}=e;if(o.value)return;if(o.value=!0,!u){g();return}let l;if(e.emitEvent){if(l=u(t),e.quitOnNullishReturnValue&&!U(l)){o.value=!1,g(t);return}}else if(u.length)l=u(e.close),o.value=!1;else if(l=u(),!l){g();return}c(l)};return()=>{const{type:t,prefixCls:u,buttonProps:l}=e;return m(Pe,h(h(h({},Te(t)),{},{onClick:i,loading:a.value,prefixCls:u},l),{},{ref:s}),r)}}});function P(e){return typeof e=="function"?e():e}const le=O({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,n){let{attrs:r}=n;const[o]=ne("Modal");return()=>{const{icon:s,onCancel:a,onOk:C,close:v,okText:g,closable:c=!1,zIndex:i,afterClose:t,keyboard:u,centered:l,getContainer:d,maskStyle:b,okButtonProps:F,cancelButtonProps:L,okCancel:N,width:p=416,mask:A=!0,maskClosable:T=!1,type:R,open:I,title:z,content:fe,direction:de,closeIcon:me,modalRender:ve,focusTriggerAfterClose:Ce,rootPrefixCls:M,bodyStyle:ge,wrapClassName:pe,footer:H}=e;let w=s;if(!s&&s!==null)switch(R){case"info":w=m(De,null,null);break;case"success":w=m(Ee,null,null);break;case"error":w=m(Oe,null,null);break;default:w=m(Se,null,null)}const ye=e.okType||"primary",E=e.prefixCls||"ant-modal",$=`${E}-confirm`,xe=r.style||{},Q=N!=null?N:R==="confirm",K=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",S=`${E}-confirm`,he=W(S,`${S}-${e.type}`,{[`${S}-rtl`]:de==="rtl"},r.class),D=o.value,be=Q&&m(X,{actionFn:a,close:v,autofocus:K==="cancel",buttonProps:L,prefixCls:`${M}-btn`},{default:()=>[P(e.cancelText)||D.cancelText]});return m(y,{prefixCls:E,class:he,wrapClassName:W({[`${S}-centered`]:!!l},pe),onCancel:ke=>v==null?void 0:v({triggerCancel:!0},ke),open:I,title:"",footer:"",transitionName:q(M,"zoom",e.transitionName),maskTransitionName:q(M,"fade",e.maskTransitionName),mask:A,maskClosable:T,maskStyle:b,style:xe,bodyStyle:ge,width:p,zIndex:i,afterClose:t,keyboard:u,centered:l,getContainer:d,closable:c,closeIcon:me,modalRender:ve,focusTriggerAfterClose:Ce},{default:()=>[m("div",{class:`${$}-body-wrapper`},[m("div",{class:`${$}-body`},[P(w),z===void 0?null:m("span",{class:`${$}-title`},[P(z)]),m("div",{class:`${$}-content`},[P(fe)])]),H!==void 0?P(H):m("div",{class:`${$}-btns`},[be,m(X,{type:ye,actionFn:C,close:v,autofocus:K==="ok",buttonProps:F,prefixCls:`${M}-btn`},{default:()=>[P(g)||(Q?D.okText:D.justOkText)]})])])]})}}}),Ue=[],k=Ue,Xe=e=>{const n=document.createDocumentFragment();let r=f(f({},Fe(e,["parentContext","appContext"])),{close:a,open:!0}),o=null;function s(){o&&(V(null,n),o=null);for(var c=arguments.length,i=new Array(c),t=0;t<c;t++)i[t]=arguments[t];const u=i.some(l=>l&&l.triggerCancel);e.onCancel&&u&&e.onCancel(()=>{},...i.slice(1));for(let l=0;l<k.length;l++)if(k[l]===a){k.splice(l,1);break}}function a(){for(var c=arguments.length,i=new Array(c),t=0;t<c;t++)i[t]=arguments[t];r=f(f({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),s.apply(this,i)}}),r.visible&&delete r.visible,C(r)}function C(c){typeof c=="function"?r=c(r):r=f(f({},r),c),o&&We(o,r,n)}const v=c=>{const i=je,t=i.prefixCls,u=c.prefixCls||`${t}-modal`,l=i.iconPrefixCls,d=Le();return m(Ve,h(h({},i),{},{prefixCls:t}),{default:()=>[m(le,h(h({},c),{},{rootPrefixCls:t,prefixCls:u,iconPrefixCls:l,locale:d,cancelText:c.cancelText||d.cancelText}),null)]})};function g(c){const i=m(v,f({},c));return i.appContext=e.parentContext||e.appContext||i.appContext,V(i,n),i}return o=g(r),k.push(a),{destroy:a,update:C}},B=Xe;function re(e){return f(f({},e),{type:"warning"})}function ae(e){return f(f({},e),{type:"info"})}function se(e){return f(f({},e),{type:"success"})}function ue(e){return f(f({},e),{type:"error"})}function ie(e){return f(f({},e),{type:"confirm"})}const Ye=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),Ze=O({name:"HookModal",inheritAttrs:!1,props:Ae(Ye(),{config:{width:520,okType:"primary"}}),setup(e,n){let{expose:r}=n;var o;const s=j(()=>e.open),a=j(()=>e.config),{direction:C,getPrefixCls:v}=ze(),g=v("modal"),c=v(),i=()=>{var d,b;e==null||e.afterClose(),(b=(d=a.value).afterClose)===null||b===void 0||b.call(d)},t=function(){e.destroyAction(...arguments)};r({destroy:t});const u=(o=a.value.okCancel)!==null&&o!==void 0?o:a.value.type==="confirm",[l]=ne("Modal",He.Modal);return()=>m(le,h(h({prefixCls:g,rootPrefixCls:c},a.value),{},{close:t,open:s.value,afterClose:i,okText:a.value.okText||(u?l==null?void 0:l.value.okText:l==null?void 0:l.value.justOkText),direction:a.value.direction||C.value,cancelText:a.value.cancelText||(l==null?void 0:l.value.cancelText)}),null)}});let Y=0;const _e=O({name:"ElementsHolder",inheritAttrs:!1,setup(e,n){let{expose:r}=n;const o=x([]);return r({addModal:a=>(o.value.push(a),o.value=o.value.slice(),()=>{o.value=o.value.filter(C=>C!==a)})}),()=>o.value.map(a=>a())}});function en(){const e=x(null),n=x([]);G(n,()=>{n.value.length&&([...n.value].forEach(C=>{C()}),n.value=[])},{immediate:!0});const r=a=>function(v){var g;Y+=1;const c=x(!0),i=x(null),t=x(Qe(v)),u=x({});G(()=>v,p=>{F(f(f({},Ke(p)?p.value:p),u.value))});const l=function(){c.value=!1;for(var p=arguments.length,A=new Array(p),T=0;T<p;T++)A[T]=arguments[T];const R=A.some(I=>I&&I.triggerCancel);t.value.onCancel&&R&&t.value.onCancel(()=>{},...A.slice(1))};let d;const b=()=>m(Ze,{key:`modal-${Y}`,config:a(t.value),ref:i,open:c.value,destroyAction:l,afterClose:()=>{d==null||d()}},null);d=(g=e.value)===null||g===void 0?void 0:g.addModal(b),d&&k.push(d);const F=p=>{t.value=f(f({},t.value),p)};return{destroy:()=>{i.value?l():n.value=[...n.value,l]},update:p=>{u.value=p,i.value?F(p):n.value=[...n.value,()=>F(p)]}}},o=j(()=>({info:r(ae),success:r(se),error:r(ue),warning:r(re),confirm:r(ie)})),s=Symbol("modalHolderKey");return[o.value,()=>m(_e,{key:s,ref:e},null)]}function ce(e){return B(re(e))}y.useModal=en;y.info=function(n){return B(ae(n))};y.success=function(n){return B(se(n))};y.error=function(n){return B(ue(n))};y.warning=ce;y.warn=ce;y.confirm=function(n){return B(ie(n))};y.destroyAll=function(){for(;k.length;){const n=k.pop();n&&n()}};y.install=function(e){return e.component(y.name,y),e};export{X as A,ln as a,on as b,te as c,J as d,en as e,Ge as u};
