import{c2 as U,r as i,a as B,o as L,w as n,ae as q,bN as M,bF as p,bG as y,bW as O,bH as e,aU as F,V as j,cc as G,c4 as H,e as _,al as f,bS as R,ab as T,bO as W,bL as z}from"./index.fb9dc0c3.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as A}from"./vue-draggable-next.esm-bundler.a1024313.js";import"./use-meta.c39fc0d4.js";import{a as g}from"./vee-validate.e73f457b.js";import{u as J}from"./categories.ef9ba983.js";import"./Modal.7d2e7c36.js";const K={class:"layout-px-spacing"},Q={class:"row layout-top-spacing"},X={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},Y={class:"panel br-6 p-0"},Z={class:"panel-body"},$={class:"row"},ee={class:"form-group col-md-1"},ae={class:"form-group col-md-3",style:{display:"none"}},oe={class:"form-group col-md-3",style:{display:"none"}},te={class:"table-responsive"},le={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},se={role:"rowgroup"},re={"aria-colindex":"1",role:"cell"},ye={__name:"category-sequence",setup(ie){const{categoryList:w,categoryMainList:S,getSelectedCategoryList:C}=J(),s=U(),d=i(s.params.page?parseInt(s.params.page):1),P=i(s.params.id?parseInt(s.params.id):0),m=i(s.params.id?parseInt(s.params.id):1),v=i([]),I=i([]),{value:h}=g("perPage",null,{initialValue:"20"}),{value:V}=g("filter_category_id",null,{initialValue:""}),{value:c}=g("main_category",null,{initialValue:""}),{value:D}=g("search",null,{initialValue:""}),t=B({perPage:h,filter_category_id:V,main_category:c,search:D}),b=async()=>{try{t.main_category==""&&(t.perPage=1e4);const o=await axios.get("/api/get-solutions-categories",{params:{page:d.value,per_page:t.perPage,category_id:m.value,mainCategory:t.main_category.id,solution_id:P.value,search:t.search}});v.value=o.data.categories,I.value=o.data.the_solution}catch(o){console.error(o)}},r=i([]),u=()=>{r.value=v.value.slice(0,0+h.value)};L(()=>{b()}),n(d,b),n(c,()=>{if(c){const o=t.main_category.id;t.filter_category_id=null,C(o)}}),n(t,u),n(c,u),n(V,u),n(v,u),q(()=>{const o=s.params;o.id!==""&&m.value!==o.id&&(d.value=1,m.value=o.id?parseInt(o.id):1,o.page!==""&&d.value!==o.page&&(d.value=o.page?parseInt(o.page):1),b())});const k=async o=>{try{await axios.post("/api/solutions-categories-update-order",{data:o})}catch(a){console.error("Error saving data:",a)}},E=()=>{r.value.forEach(o=>{o.order=null})},N=()=>{const o=r.value.map(a=>a.id);k(o)};return(o,a)=>{const x=M("multiselect");return p(),y("div",K,[(p(),O(F,{to:"#breadcrumb"},[a[4]||(a[4]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e("div",Q,[e("div",X,[e("div",Y,[a[12]||(a[12]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1)),e("div",Z,[e("div",$,[e("div",ee,[a[6]||(a[6]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),j(e("select",{id:"perpage","onUpdate:modelValue":a[0]||(a[0]=l=>t.perPage=l),class:"form-control form-select select"},a[5]||(a[5]=[H('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[G,t.perPage]])]),e("div",ae,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),_(x,{modelValue:t.main_category,"onUpdate:modelValue":a[1]||(a[1]=l=>t.main_category=l),options:f(S),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",oe,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),_(x,{modelValue:t.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=l=>t.filter_category_id=l),options:f(w),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),a[9]||(a[9]=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e("div",te,[e("table",le,[a[11]||(a[11]=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1)),e("tbody",se,[_(f(A),{id:"left-lovehandles",modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:E,onEnd:N},{default:R(()=>[(p(!0),y(T,null,W(r.value,l=>(p(),y("tr",{key:l.id,role:"row",class:""},[a[10]||(a[10]=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1)),e("td",re,z(l.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])])}}};export{ye as default};
