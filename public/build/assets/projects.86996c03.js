import{s as d,a8 as P,a9 as v,ag as l}from"./app-setting.15ef9df9.js";function I(){const g=d([]),f=d([]),m=d({name:"",parent_id:"",description:"",is_published:""}),p=P(),i=d({}),c=d(!1),a=v("$swal"),h=async(t=1,o="",s="",r="",u="",e="created_at",n="desc")=>{l.get("/api/projects?page="+t+"&search_id="+o+"&search_title="+s+"&search_parent_id="+r+"&search_global="+u+"&order_column="+e+"&order_direction="+n).then(y=>{g.value=y.data})};return{projectList:f,projects:g,project:m,getProjects:h,getProjectList:async()=>{l.get("/api/project-list").then(t=>{f.value=t.data.data})},getProject:async t=>{l.get("/api/projects/"+t).then(o=>{m.value=o.data.data})},storeProject:async(t,o)=>{if(c.value)return;console.log(t),c.value=!0,i.value={};let s=new FormData;for(var r=0;r<o.length;r++){let e=o[r];s.append("project_gallery["+r+"]",e)}for(let e in t)t.hasOwnProperty(e)&&t.hasOwnProperty(e)&&s.append(e,t[e]);const u={headers:{"content-type":"multipart/form-data"}};console.log(s),l.post("/api/projects",s,u).then(e=>{p.push({name:"projects.create"}),t.name=null,t.client=null,t.content=null,t.is_published=null,t.main_image=null,t.project_gallery=null,a({icon:"success",title:"Project saved successfully"})}).catch(e=>{var n;(n=e.response)!=null&&n.data&&(i.value=e.response.data.errors)}).finally(()=>c.value=!1)},updateProject:async(t,o)=>{if(c.value)return;c.value=!0,i.value={};let s=new FormData;if(console.log(s),o.length>0)for(var r=0;r<o.length;r++){let e=o[r];s.append("project_gallery["+r+"]",e)}for(let e in t)if(t.hasOwnProperty(e)&&e!=="clients"){let n=t[e];n===null&&(e==="weight"||e==="length"||e==="height"||e==="width"||e==="quantity"||e==="cost_price"||e==="retail_price")&&(n=0),s.append(e,n)}const u={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put"),console.log(s),await l.post("/api/projects/"+t.id,s,u).then(e=>{p.push({name:"projects.index"}),a({icon:"success",title:"Project updated successfully"})}).catch(e=>{var n;(n=e.response)!=null&&n.data&&(i.value=e.response.data.errors)}).finally(()=>c.value=!1)},deleteProject:async t=>{a({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(o=>{o.isConfirmed&&l.delete("/api/projects/"+t).then(s=>{h(),p.push({name:"projects.index"}),a({icon:"success",title:"Project deleted successfully"})}).catch(s=>{a({icon:"error",title:"Something went wrong"})})})},deleteProjectImage:async t=>{a({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(o=>{o.isConfirmed&&l.delete("/api/project-images/"+t).then(s=>{h(),p.go(0),a({icon:"success",title:"Image deleted successfully"})}).catch(s=>{a({icon:"error",title:"Something went wrong"})})})},validationErrors:i,isLoading:c}}export{I as u};
