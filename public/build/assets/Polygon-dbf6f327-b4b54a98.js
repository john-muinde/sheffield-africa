import{c as w,y as m}from"./tools-b40e92cf-d03b1370.js";import{r}from"./gmaps-ca810647-315b513b.js";import{v as o}from"./index-516f1143.js";import"./_commonjsHelpers-23102255.js";const O=o.defineComponent({name:"GmapsPolygon",props:{draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,default:void 0},paths:{type:Object,default:void 0},visible:{type:Boolean,default:!0}},emits:{click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:t=>!0,dragend:t=>!0,dragstart:t=>!0,mounted:t=>!0,mousedown:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,mouseup:t=>!0,paths_changed:t=>!0,rightclick:t=>!0,unmounted:t=>!0},setup(t,{emit:l}){const c=o.inject("$getAPI"),v=o.inject("$getMap"),h=o.inject("$getThrottle"),b=o.inject("$handleError"),L=e=>b(e,"Polygon"),p=[];let a=null;const g=e=>e.getPaths().getArray().map(d=>d.getArray().map(u=>u.toJSON())),f=e=>{const d=google.maps.event,u=h();p.push(d.addListener(e,"drag",m(n=>{var i;return l("drag",((i=n.latLng)==null?void 0:i.toJSON())||null)},u)),d.addListener(e,"mousemove",m(n=>l("mousemove",r(n)),u)),d.addListener(e,"mouseover",m(n=>l("mouseover",r(n)),u)),d.addListener(e,"click",n=>l("click",r(n))),d.addListener(e,"contextmenu",n=>l("contextmenu",r(n))),d.addListener(e,"dblclick",n=>l("dblclick",r(n))),d.addListener(e,"dragend",n=>{var i;return l("dragend",((i=n.latLng)==null?void 0:i.toJSON())||null)}),d.addListener(e,"dragstart",n=>{var i;return l("dragstart",((i=n.latLng)==null?void 0:i.toJSON())||null)}),d.addListener(e,"mousedown",n=>l("mousedown",r(n))),d.addListener(e,"mouseout",n=>l("mouseout",r(n))),d.addListener(e,"mouseup",n=>l("mouseup",r(n))),d.addListener(e,"rightclick",n=>l("rightclick",r(n))),d.addListener(e,"dragend",n=>l("paths_changed",g(e))),d.addListener(e,"mouseup",n=>n.path!==void 0?l("paths_changed",g(e)):null),e.getPath().addListener("remove_at",()=>l("paths_changed",g(e))))},y=v(),k=c(),s={map:y,...t.options};return t.draggable&&(s.draggable=t.draggable),t.editable&&(s.editable=t.editable),t.paths&&(s.paths=t.paths),t.visible&&(s.visible=t.visible),a=new k.Polygon(s),a?(f(a),l("mounted",a)):L(new Error("There was a problem creating the shape.")),o.watch(()=>t.draggable,e=>e===void 0||e==(a==null?void 0:a.getDraggable())?null:a==null?void 0:a.setDraggable(e)),o.watch(()=>t.editable,e=>e===void 0||e==(a==null?void 0:a.getEditable())?null:a==null?void 0:a.setEditable(e)),o.watch(()=>t.paths,e=>e===void 0||w(e,a==null?void 0:a.getPaths())?null:a==null?void 0:a.setPaths(e),{deep:!0}),o.watch(()=>t.visible,e=>e===void 0||e==(a==null?void 0:a.getVisible())?null:a==null?void 0:a.setVisible(e)),o.onBeforeUnmount(()=>{a&&l("unmounted",a),p.forEach(e=>e.remove()),a&&a.setMap(null),a&&c().event.clearInstanceListeners(a)}),()=>{}}});export{O as default};
