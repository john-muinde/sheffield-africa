import{a as j,v as e}from"./index-0d6930bf.js";import{b as q}from"./use-meta-44934223.js";import H from"./ProductCard-dffe0e8c.js";import"./_commonjsHelpers-23102255.js";import"./_plugin-vue_export-helper-c27b6911.js";const R={class:"main"},U={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},G={class:"container d-flex align-items-center"},J={class:"breadcrumb"},K={class:"breadcrumb-item"},Q={class:"breadcrumb-item"},W={class:"breadcrumb-item active","aria-current":"page"},X={class:"page-content"},Y={class:"container"},ee={class:"row"},te={class:"col-lg-10"},oe={class:"toolbox"},ae={class:"toolbox-left"},le={class:"toolbox-info"},se={class:"toolbox-right"},ne={class:"toolbox-sort"},ie={class:"select-custom"},re={class:"products mb-3 products-section"},ce={class:"row"},de={"aria-label":"Page navigation"},ue={class:"pagination justify-content-center"},me={class:"page-item-total"},ve={class:"col-lg-2 order-lg-first"},pe={class:"sidebar sidebar-shop sidebar-shop-category"},_e={key:0,class:"widget widget-collapsible"},ge={id:"widget-1",class:"show"},he={class:"widget-body"},Ne={class:"filter-items filter-items-count"},Ve={class:"custom-control custom-checkbox"},fe=["id","value","onChange"],be=["for"],Ee={class:"item-count"},ke={class:"widget widget-collapsible"},xe={id:"widget-4",class:"show"},Ce={class:"widget-body"},we={class:"filter-items"},Pe={class:"custom-control custom-checkbox"},Be=["id","value","onChange"],Se=["for"],$e={__name:"ProductCategoryPromotional",setup(ye){const v=j(),s=e.ref(v.params.page?parseInt(v.params.page):1),k=e.ref(12),h=e.ref(0),N=e.ref([]),x=e.ref(0),r=e.ref(v.params.id?parseInt(v.params.id):1),V=e.ref([]),C=e.ref([]),i=e.ref([]),c=e.ref([]),d=e.ref([]),g=e.ref(""),f=async()=>{try{const a={[r.value]:c.value[r.value]||[]};c.value=a;const t={[r.value]:d.value[r.value]||[]};d.value=t;const l=await axios.get("/api/get-products",{params:{page:s.value,per_page:k.value,category_id:r.value,checkedCategories:c.value,checkedBrands:d.value,selectedSortOption:g.value}});N.value=l.data.products.data,h.value=l.data.products.total,x.value=l.data.products.per_page,V.value=l.data.categories,C.value=l.data.brands,i.value=l.data.the_category}catch(a){console.error(a)}};function L(a){let t=i.value.id;t in c.value||(c.value[t]=[]);const l=c.value[t];l.includes(a)?l.splice(l.indexOf(a),1):l.push(a)}function M(a){let t=i.value.id;t in d.value||(d.value[t]=[]);const l=d.value[t];l.includes(a)?l.splice(l.indexOf(a),1):l.push(a)}function A(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),c.value=[],d.value=[],g.value=null}const p=e.computed(()=>Math.ceil(h.value/k.value)),w=e.ref([]),F=()=>{s.value>1&&s.value--},$=()=>{s.value<p.value&&s.value++},O=a=>{s.value=a},b=(a,t,l)=>{if(t===void 0)return"/promotional-solutions";{let n=t.replace(/ /g,"-").replace(/\//g,"-");return n=n.replace(/-+/g,"-"),n=n.replace(/^-+|-+$/g,""),n=n.toLowerCase(),`/promotional-solutions/${a}/${n}/page/${l}`}},I=()=>{w.value=N.value},z=a=>Number.isInteger(a),Z=e.computed(()=>{const a=[];s.value>1&&a.push("Prev");let l=Math.max(1,s.value-Math.floor(5/2)),n=Math.min(l+5-1,p.value);n-l<5-1&&(l=Math.max(1,n-5+1));for(let u=l;u<=n;u++)a.push(u);return s.value<p.value&&a.push("Next"),a});e.onMounted(()=>{f()}),e.watch(s,f),e.watch(N,I),e.watchEffect(()=>{const a=v.params;a.id!==""&&r.value!==a.id&&(s.value=1,r.value=a.id?parseInt(a.id):1,a.page!==""&&s.value!==a.page&&(s.value=a.page?parseInt(a.page):1),f())});const P=e.ref("");return e.watch(()=>{var a;return(a=i.value)==null?void 0:a.name},(a,t)=>{a!==t&&(P.value=a)}),q({title:P.value+"All you can get Promotions"}),(a,t)=>{var n,u,B,S,y;const l=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("main",R,[e.createElementVNode("nav",U,[e.createElementVNode("div",G,[e.createElementVNode("ol",J,[e.createElementVNode("li",K,[e.createVNode(l,{to:"/"},{default:e.withCtx(()=>t[1]||(t[1]=[e.createTextVNode(" HOME ")])),_:1})]),e.createElementVNode("li",Q,[e.createVNode(l,{to:"/promotional-solutions"},{default:e.withCtx(()=>t[2]||(t[2]=[e.createTextVNode(" All Promotions ")])),_:1})]),e.createElementVNode("li",W,e.toDisplayString((n=i.value)==null?void 0:n.name),1)])])]),e.createElementVNode("div",X,[e.createElementVNode("div",Y,[e.createElementVNode("div",ee,[e.createElementVNode("div",te,[e.createElementVNode("div",oe,[e.createElementVNode("div",ae,[e.createElementVNode("div",le,[t[3]||(t[3]=e.createTextVNode(" Showing ")),e.createElementVNode("span",null,e.toDisplayString(x.value)+" of "+e.toDisplayString(h.value),1),t[4]||(t[4]=e.createTextVNode(" Products "))])]),e.createElementVNode("div",se,[e.createElementVNode("div",ne,[t[6]||(t[6]=e.createElementVNode("label",{for:"sortby"},"Sort by:",-1)),e.createElementVNode("div",ie,[e.withDirectives(e.createElementVNode("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),name:"sortby",class:"form-control"},t[5]||(t[5]=[e.createStaticVNode('<option value=""> Default </option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[e.vModelSelect,g.value]])])])])]),e.createElementVNode("div",re,[e.createElementVNode("div",ce,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o==null?void 0:o.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e.createVNode(H,{product:o},null,8,["product"])]))),128))])]),e.createElementVNode("nav",de,[e.createElementVNode("ul",ue,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===1}])},[e.createVNode(l,{class:"page-link page-link-prev",to:b((u=i.value)==null?void 0:u.id,(B=i.value)==null?void 0:B.name,s.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:F},{default:e.withCtx(()=>t[7]||(t[7]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Z.value,o=>{var m,_;return e.openBlock(),e.createElementBlock("li",{key:o,class:e.normalizeClass(["page-item",{active:o===s.value}])},[z(o)?(e.openBlock(),e.createBlock(l,{key:0,class:"page-link",to:b((m=i.value)==null?void 0:m.id,(_=i.value)==null?void 0:_.name,o),onClick:E=>O(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2)}),128)),e.createElementVNode("li",me," of "+e.toDisplayString(p.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===p.value}])},[e.createVNode(l,{class:"page-link page-link-next",to:b((S=i.value)==null?void 0:S.id,(y=i.value)==null?void 0:y.name,s.value+1),"aria-label":"Next",onClick:$},{default:e.withCtx(()=>t[8]||(t[8]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e.createElementVNode("aside",ve,[e.createElementVNode("div",pe,[e.createElementVNode("div",{class:"widget widget-clean"},[t[9]||(t[9]=e.createElementVNode("label",null,"Filters:",-1)),e.createElementVNode("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:A}," Clean All ")]),V.value.length?(e.openBlock(),e.createElementBlock("div",_e,[t[10]||(t[10]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e.createElementVNode("div",ge,[e.createElementVNode("div",he,[e.createElementVNode("div",Ne,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o==null?void 0:o.id,class:"filter-item"},[e.createElementVNode("div",Ve,[e.createElementVNode("input",{id:"cat-"+(o==null?void 0:o.id),type:"checkbox",class:"custom-control-input",value:o==null?void 0:o.id,onChange:m=>L(o==null?void 0:o.id)},null,40,fe),e.createElementVNode("label",{class:"custom-control-label",for:"cat-"+(o==null?void 0:o.id)},e.toDisplayString(o==null?void 0:o.name),9,be)]),e.createElementVNode("span",Ee,e.toDisplayString(o.category_products_count),1)]))),128))])])])])):e.createCommentVNode("",!0),e.createElementVNode("div",ke,[t[11]||(t[11]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e.createElementVNode("div",xe,[e.createElementVNode("div",Ce,[e.createElementVNode("div",we,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,o=>{var m,_,E,D;return e.openBlock(),e.createElementBlock("div",{key:o==null?void 0:o.id,class:"filter-item"},[e.createElementVNode("div",Pe,[e.createElementVNode("input",{id:"brand-"+((m=o.product_brand)==null?void 0:m.id),type:"checkbox",class:"custom-control-input",value:(_=o.product_brand)==null?void 0:_.id,onChange:De=>{var T;return M((T=o.product_brand)==null?void 0:T.id)}},null,40,Be),e.createElementVNode("label",{class:"custom-control-label",for:"brand-"+((E=o.product_brand)==null?void 0:E.id)},e.toDisplayString((D=o.product_brand)==null?void 0:D.name),9,Se)])])}),128))])])])])])])])])])])}}};export{$e as default};
