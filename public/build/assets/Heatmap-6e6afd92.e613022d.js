import{c as h}from"./tools-b40e92cf.4881bf31.js";import{d as f,l as e,w as g,o as b,q as M}from"./app-setting.bea91959.js";import"./_commonjsHelpers.f037b798.js";const E=f({name:"GmapsHeatmap",props:{data:{type:Object,default:void 0},options:{type:Object,default:void 0}},emits:{mounted:t=>!0,unmounted:t=>!0},setup(t,{emit:d}){const l=e("$getAPI"),y=e("$getMap"),w=e("$handleError"),s=a=>w(a,"Heatmap");let o=null;const n=a=>a.map(i=>({location:new google.maps.LatLng(i.lat,i.lng),weight:i.weight||1})),p=()=>{var a,i,u,r,m,v,c;return{map:y(),data:t.data?n(t.data):(a=t.options)!=null&&a.data?n(t.options.data):[],dissipating:((i=t.options)==null?void 0:i.dissipating)===void 0||(u=t.options)==null?void 0:u.dissipating,gradient:((r=t.options)==null?void 0:r.gradient)||void 0,maxIntensity:((m=t.options)==null?void 0:m.maxIntensity)||void 0,opacity:((v=t.options)==null?void 0:v.opacity)||void 0,radius:((c=t.options)==null?void 0:c.radius)||void 0}};return l().visualization?(g(()=>t.options,a=>a===void 0?null:o==null?void 0:o.setOptions(p()),{deep:!0}),g(()=>t.data,a=>a===void 0||h(a,o==null?void 0:o.getData())?null:o==null?void 0:o.setData(n(a)),{deep:!0}),b(()=>{try{o=new(l()).visualization.HeatmapLayer(p()),d("mounted",o)}catch{s(new Error("There was a problem creating the heatmap."))}}),M(()=>{o&&d("unmounted",o),o&&o.setMap(null)}),()=>{}):(s(new Error("Visualization library not included in initial setup (main.ts)")),()=>{})}});export{E as default};
