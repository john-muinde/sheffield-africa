import{r,c6 as v,cg as l}from"./index-f7b41895.js";import{a6 as f}from"./index-11adc5fa.js";function C(){const g=r([]),m=r([]),y=r({name:"",parent_id:"",description:"",is_published:""}),u=v(),s=r({}),a=r(!1),d=async(e=1,n="",o="",i="",c="",t="created_at",h="desc")=>{try{const p=await l("get",`/api/solutions?page=${e}&search_id=${n}&search_title=${o}&search_parent_id=${i}&search_global=${c}&order_column=${t}&order_direction=${h}`);g.value=p}catch(p){s.value=p}};return{solutionList:m,solutions:g,solution:y,getSolutions:d,getSolutionList:async()=>{try{const e=await l("get","/api/solution-list");m.value=e}catch(e){s.value=e}},getSolution:async e=>{try{const n=await l("get",`/api/solutions/${e}`);y.value=n}catch(n){s.value=n}},storeSolution:async(e,n)=>{if(a.value)return;a.value=!0,s.value={};let o=new FormData;const i=e.categories.map(t=>t.id);o.append("categories",i);for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&o.append(t,e[t]);const c={headers:{"content-type":"multipart/form-data"}};try{await l("post","/api/solutions",o,c),u.push({name:"solutions.index"}),e.name=null,e.solution_category=null,e.description=null,e.is_published=null,e.main_image=null,showToast("Solution saved successfully","success")}catch(t){s.value=t}finally{a.value=!1}},updateSolution:async(e,n)=>{if(a.value)return;a.value=!0,s.value={};let o=new FormData;const i=e.categories.map(t=>t.id);o.append("categories",i);for(let t in e)e.hasOwnProperty(t)&&t!=="categories"&&o.append(t,e[t]);const c={headers:{"Content-Type":"multipart/form-data"}};o.append("_method","put");try{await l("post",`/api/solutions/${e.id}`,o,c),u.push({name:"solutions.index"}),showToast("Solution updated successfully","success")}catch(t){s.value=t}finally{a.value=!1}},deleteSolution:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){l("delete",`/api/solutions/${e}`).then(()=>{d(),u.push({name:"solutions.index"}),showToast("Solution deleted successfully","success")})},onCancel(){console.log("Cancel")}})},deleteSolutionImage:async e=>{f.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){l("delete",`/api/solution-images/${e}`).then(()=>{d(),u.go(0),showToast("Image deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:s,isLoading:a}}export{C as u};
