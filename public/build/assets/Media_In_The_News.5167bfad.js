import{C as w}from"./ContentState.58d077a7.js";import{c2 as $,r as i,c as T,o as q,w as M,af as z,bO as F,bG as l,bH as c,bI as a,e as P,bT as _,bW as m,bN as g,ac as C,bP as V,bK as x,bM as B,ag as h}from"./index.2d25fe82.js";import"./use-meta.d1dfd7c5.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import"./transition.b7e001a5.js";import"./_commonjsHelpers.f037b798.js";const H={class:"main"},K={class:"page-content"},J={class:"container"},Q={class:"row"},U={class:"col-lg-10 offset-lg-1 in-the-news-section"},X={key:3,class:"row justify-content-left"},Y={class:"p-6 border rounded"},Z={class:"position-relative mb-2",style:{height:"216px"}},ee=["href"],ae=["src","alt"],te=["href"],se={class:"col-lg-12 blogs mt-3"},oe={"aria-label":"Page navigation"},le={class:"pagination justify-content-center"},ne={class:"page-item-total"},ie={__name:"Media_In_The_News",setup(re){const r=$(),t=i(r.params.page?parseInt(r.params.page):1),N=i(12),I=i(0),b=i([]),f=i(r.params.id?parseInt(r.params.id):1),S=i([]),u=i(!1),L=i(null),y=async()=>{u.value=!0;try{const e=await axios.get("/api/get-in-the-news",{params:{page:t.value,per_page:N.value,category_id:f.value}});b.value=e.data.data,I.value=e.data.total,u.value=!1}catch(e){u.value=!1,e.value=e,console.error(e)}},j=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},k=e=>`/media/in-the-news/page/${e}`,d=T(()=>Math.ceil(I.value/N.value)),p=i([]),A=()=>{t.value>1&&t.value--},D=()=>{t.value<d.value&&t.value++},E=e=>{t.value=e},O=()=>{p.value=b.value},R=e=>Number.isInteger(e),W=T(()=>{const e=[];t.value>1&&e.push("Prev");let n=Math.max(1,t.value-Math.floor(5/2)),s=Math.min(n+5-1,d.value);s-n<5-1&&(n=Math.max(1,s-5+1));for(let v=n;v<=s;v++)e.push(v);return t.value<d.value&&e.push("Next"),e});return q(()=>{y(),j()}),M(t,y),M(b,O),z(()=>{const e=r.params;r.query,e.id!==""&&f!==e.id&&(t.value=1,f.value=e.id?parseInt(e.id):1,e.page!==""&&t!==e.page&&(t.value=e.page?parseInt(e.page):1),y())}),(e,o)=>{const n=F("router-link");return l(),c("div",null,[a("main",H,[a("div",K,[a("div",J,[a("div",Q,[a("div",U,[o[4]||(o[4]=a("h2",{class:"about-us-title"},"In the News",-1)),P(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:_(()=>o[0]||(o[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),o[5]||(o[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),u.value?(l(),m(w,{key:0,type:"loading",contentType:"Articles In The News"})):g("",!0),!p.value.length&&!u.value?(l(),m(w,{key:1,type:"empty",contentType:"Our articles In The News"})):g("",!0),L.value?(l(),m(w,{key:2,type:"error",contentType:"Articles In The News"})):g("",!0),p.value.length?(l(),c("div",X,[(l(!0),c(C,null,V(p.value,s=>(l(),c("div",{class:"col-12 col-md-6 col-lg-4 mb-2 blog-item",key:s.id},[a("div",Y,[a("div",Z,[a("a",{target:"_blank",class:"float-center",href:s.url},[a("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:"/storage/"+s.main_image_path,alt:s.name},null,8,ae)],8,ee)]),a("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:s.url},o[1]||(o[1]=[h(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)]),8,te)])]))),128)),a("div",se,[a("nav",oe,[a("ul",le,[a("li",{class:x(["page-item",{disabled:t.value===1}])},[P(n,{class:"page-link page-link-prev",to:k(t.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:A},{default:_(()=>o[2]||(o[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),h(" Prev ")])),_:1},8,["to"])],2),(l(!0),c(C,null,V(W.value,s=>(l(),c("li",{class:x(["page-item",{active:s===t.value}]),key:s},[R(s)?(l(),m(n,{key:0,class:"page-link",to:k(s),onClick:v=>E(s)},{default:_(()=>[h(B(s),1)]),_:2},1032,["to","onClick"])):g("",!0)],2))),128)),a("li",ne," of "+B(d.value),1),a("li",{class:x(["page-item",{disabled:t.value===d.value}])},[P(n,{class:"page-link page-link-next",to:k(t.value+1),"aria-label":"Next",onClick:D},{default:_(()=>o[3]||(o[3]=[h(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):g("",!0)])])])])])])}}},_e=G(ie,[["__scopeId","data-v-35b75515"]]);export{_e as default};
