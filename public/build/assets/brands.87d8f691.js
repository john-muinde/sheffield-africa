import{q as c,aa as v,aQ as n}from"./app-setting.176c951c.js";import{M as m}from"./Modal.333891ea.js";function x(){const d=c([]),u=c([]),p=c({name:"",is_published:"",description:""}),l=v(),r=c({}),s=c(!1),f=async(e=1,a="",o="",t="",h="created_at",y="desc")=>{s.value=!0;try{const i=await n("get",`/api/brands?page=${e}&search_id=${a}&search_title=${o}&search_global=${t}&order_column=${h}&order_direction=${y}`);d.value=i}catch(i){r.value=i}finally{s.value=!1}};return{brandList:u,brands:d,brand:p,getBrands:f,getBrandList:async()=>{try{const e=await n("get","/api/brand-list");u.value=e.data}catch(e){r.value=e}},getBrand:async e=>{s.value=!0;try{const a=await n("get",`/api/brands/${e}`);p.value=a.data}catch(a){r.value=a}finally{s.value=!1}},storeBrand:async e=>{if(s.value)return;s.value=!0,r.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&a.append(t,e[t]);const o={headers:{"content-type":"multipart/form-data"}};try{await n("post","/api/brands",a,o),l.push({name:"brands.create"}),showToast("Brand created successfully","success"),e.name="",e.description="",e.main_image="",e.is_published=""}catch(t){r.value=t}finally{s.value=!1}},updateBrand:async e=>{if(s.value)return;s.value=!0,r.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&a.append(t,e[t]);const o={headers:{"content-type":"multipart/form-data"}};a.append("_method","put");try{await n("post",`/api/brands/${e.id}`,a,o),l.push({name:"brands.index"}),showToast("Brand updated successfully","success")}catch(t){r.value=t}finally{s.value=!1}},deleteBrand:async e=>{m.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){n("delete",`/api/brands/${e}`).then(()=>{f(),l.push({name:"brands.index"}),showToast("Brand deleted successfully","success")}).catch(a=>{r.value=a})},onCancel(){console.log("Cancel")}})},validationErrors:r,isLoading:s}}export{x as u};
