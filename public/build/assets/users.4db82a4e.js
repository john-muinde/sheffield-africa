import{z as c,cc as y,cv as o}from"./app-setting.867546d3.js";import{$ as h}from"./Modal.c9477867.js";function x(){const i=c([]),d=c({id:"",name:"",email:"",role:"",password:"",confirm_password:""}),n=y(),a=c({}),t=c(!1),p=async({page:e=1,search_id:s="",search_title:u="",search_global:r="",order_column:f="created_at",order_direction:v="desc"})=>{try{const l=await o("get",`/api/users?page=${e}&search_id=${s}&search_title=${u}&search_global=${r}&order_column=${f}&order_direction=${v}`);i.value=l}catch(l){a.value=l}};return{users:i,user:d,getUsers:p,getUser:async e=>{try{const s=await o("get",`/api/users/${e}`);d.value=s}catch(s){a.value=s}},storeUser:async e=>{if(t.value)return;t.value=!0,a.value={};let s=new FormData;for(let r in e)e.hasOwnProperty(r)&&s.append(r,e[r]);const u={headers:{"content-type":"multipart/form-data"}};try{await o("post","/api/users",s,u),n.push({name:"users.index"}),showToast("User saved successfully","success")}catch(r){a.value=r}finally{t.value=!1}},updateUser:async e=>{if(!t.value){t.value=!0,a.value={};try{await o("put",`/api/users/${e.id}`,e),n.push({name:"users.index"}),showToast("User updated successfully","success")}catch(s){a.value=s}finally{t.value=!1}}},deleteUser:async e=>{h.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/users/${e}`).then(()=>{p(),n.push({name:"users.index"}),showToast("User deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:t}}export{x as u};
