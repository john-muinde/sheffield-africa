import{v as a}from"./index-18a95f05.js";import{c as h}from"./tools-b40e92cf-d03b1370.js";import"./_commonjsHelpers-23102255.js";const b=a.defineComponent({name:"GmapsHeatmap",props:{data:{type:Object,default:void 0},options:{type:Object,default:void 0}},emits:{mounted:t=>!0,unmounted:t=>!0},setup(t,{emit:d}){const l=a.inject("$getAPI"),g=a.inject("$getMap"),y=a.inject("$handleError"),p=i=>y(i,"Heatmap");let o=null;const e=i=>i.map(n=>({location:new google.maps.LatLng(n.lat,n.lng),weight:n.weight||1})),s=()=>{var i,n,u,r,m,v,c;return{map:g(),data:t.data?e(t.data):(i=t.options)!=null&&i.data?e(t.options.data):[],dissipating:((n=t.options)==null?void 0:n.dissipating)===void 0||(u=t.options)==null?void 0:u.dissipating,gradient:((r=t.options)==null?void 0:r.gradient)||void 0,maxIntensity:((m=t.options)==null?void 0:m.maxIntensity)||void 0,opacity:((v=t.options)==null?void 0:v.opacity)||void 0,radius:((c=t.options)==null?void 0:c.radius)||void 0}};return l().visualization?(a.watch(()=>t.options,i=>i===void 0?null:o==null?void 0:o.setOptions(s()),{deep:!0}),a.watch(()=>t.data,i=>i===void 0||h(i,o==null?void 0:o.getData())?null:o==null?void 0:o.setData(e(i)),{deep:!0}),a.onMounted(()=>{try{o=new(l()).visualization.HeatmapLayer(s()),d("mounted",o)}catch{p(new Error("There was a problem creating the heatmap."))}}),a.onBeforeUnmount(()=>{o&&d("unmounted",o),o&&o.setMap(null)}),()=>{}):(p(new Error("Visualization library not included in initial setup (main.ts)")),()=>{})}});export{b as default};
