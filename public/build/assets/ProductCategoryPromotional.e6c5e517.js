import{c8 as U,z as i,h as T,o as W,w as N,W as X,cr as G,bx as J,bo as c,bp as r,bq as e,j as f,bC as k,bv as p,X as g,B as K,co as Q,c3 as Y,S as y,by as C,bt as M,bw as D,cs as ee,bT as te}from"./app-setting.b1b0c9b8.js";import"./_commonjsHelpers.f037b798.js";const ae={class:"main"},se={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},oe={class:"container d-flex align-items-center"},le={class:"breadcrumb"},ie={class:"breadcrumb-item"},ne={class:"breadcrumb-item"},ce={class:"breadcrumb-item active","aria-current":"page"},re={class:"page-content"},de={class:"container"},ue={class:"row"},ve={class:"col-lg-10"},pe={class:"toolbox"},ge={class:"toolbox-left"},_e={class:"toolbox-info"},me={class:"toolbox-right"},be={class:"toolbox-sort"},he={class:"select-custom"},fe={class:"products mb-3 products-section"},ke={class:"row"},xe={"aria-label":"Page navigation"},ye={class:"pagination justify-content-center"},Ce={class:"page-item-total"},Pe={class:"col-lg-2 order-lg-first"},we={class:"sidebar sidebar-shop sidebar-shop-category"},Ve={key:0,class:"widget widget-collapsible"},Be={class:"show",id:"widget-1"},Se={class:"widget-body"},Ne={class:"filter-items filter-items-count"},Me={class:"custom-control custom-checkbox"},Ae=["id","value","onChange"],Le=["for"],Oe={class:"item-count"},$e={class:"widget widget-collapsible"},Te={class:"show",id:"widget-4"},De={class:"widget-body"},Ee={class:"filter-items"},Fe={class:"custom-control custom-checkbox"},Ie=["id","value","onChange"],qe=["for"],He={__name:"ProductCategoryPromotional",setup(je){const _=U(),l=i(_.params.page?parseInt(_.params.page):1),P=i(12),w=i(0),x=i([]),A=i(0),d=i(_.params.id?parseInt(_.params.id):1),V=i([]),L=i([]),n=i([]),u=i([]),v=i([]),b=i(""),B=async()=>{try{const s={[d.value]:u.value[d.value]||[]};u.value=s;const t={[d.value]:v.value[d.value]||[]};v.value=t,console.log({page:l.value,per_page:P.value,category_id:d.value,checkedCategories:u.value,checkedBrands:v.value,selectedSortOption:b.value});const o=await axios.get("/api/get-products",{params:{page:l.value,per_page:P.value,category_id:d.value,checkedCategories:u.value,checkedBrands:v.value,selectedSortOption:b.value}});x.value=o.data.products.data,w.value=o.data.products.total,A.value=o.data.products.per_page,V.value=o.data.categories,L.value=o.data.brands,n.value=o.data.the_category}catch(s){console.error(s)}};function E(s){let t=n.value.id;t in u.value||(u.value[t]=[]);const o=u.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s)}function F(s){let t=n.value.id;t in v.value||(v.value[t]=[]);const o=v.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s)}function I(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),u.value=[],v.value=[],b.value=null}const h=T(()=>Math.ceil(w.value/P.value)),O=i([]),q=()=>{l.value>1&&l.value--},j=()=>{l.value<h.value&&l.value++},z=s=>{l.value=s},S=(s,t,o)=>{if(t===void 0)return"/promotional-solutions";{let a=t.replace(/ /g,"-").replace(/\//g,"-");return a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase(),`/promotional-solutions/${s}/${a}/page/${o}`}},Z=()=>{console.log(x),O.value=x.value},H=s=>Number.isInteger(s),R=T(()=>{const s=[];l.value>1&&s.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),a=Math.min(o+5-1,h.value);a-o<5-1&&(o=Math.max(1,a-5+1));for(let m=o;m<=a;m++)s.push(m);return l.value<h.value&&s.push("Next"),s});W(()=>{B()}),N(l,B),N(x,Z),X(()=>{const s=_.params;_.query,s.id!==""&&d!==s.id&&(l.value=1,d.value=s.id?parseInt(s.id):1,s.page!==""&&l!==s.page&&(l.value=s.page?parseInt(s.page):1),B())});const $=i("");return N(()=>n.value.name,(s,t)=>{console.log(s),console.log(t),s!==t&&(console.log("changing it"),$.value=s)}),G({title:$.value+"All you can get Promotions"}),(s,t)=>{const o=J("router-link");return c(),r("main",ae,[e("nav",se,[e("div",oe,[e("ol",le,[e("li",ie,[f(o,{to:"/"},{default:k(()=>t[1]||(t[1]=[g("HOME")])),_:1})]),e("li",ne,[f(o,{to:"/promotional-solutions"},{default:k(()=>t[2]||(t[2]=[g("All Promotions")])),_:1})]),e("li",ce,p(n.value.name),1)])])]),e("div",re,[e("div",de,[e("div",ue,[e("div",ve,[e("div",pe,[e("div",ge,[e("div",_e,[t[3]||(t[3]=g(" Showing ")),e("span",null,p(A.value)+" of "+p(w.value),1),t[4]||(t[4]=g(" Products "))])]),e("div",me,[e("div",be,[t[6]||(t[6]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",he,[K(e("select",{name:"sortby",id:"sortby",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>b.value=a)},t[5]||(t[5]=[Y('<option value="">Default</option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[Q,b.value]])])])])]),e("div",fe,[e("div",ke,[(c(!0),r(y,null,C(O.value,a=>(c(),r("div",{class:"col-6 col-md-3 col-lg-2 col-xl-2",key:a.id},[f(ee,{product:a},null,8,["product"])]))),128))])]),e("nav",xe,[e("ul",ye,[e("li",{class:M(["page-item",{disabled:l.value===1}])},[f(o,{class:"page-link page-link-prev",to:S(n.value.id,n.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:q},{default:k(()=>t[7]||(t[7]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),g(" Prev ")])),_:1},8,["to"])],2),(c(!0),r(y,null,C(R.value,a=>(c(),r("li",{class:M(["page-item",{active:a===l.value}]),key:a},[H(a)?(c(),te(o,{key:0,class:"page-link",to:S(n.value.id,n.value.name,a),onClick:m=>z(a)},{default:k(()=>[g(p(a),1)]),_:2},1032,["to","onClick"])):D("",!0)],2))),128)),e("li",Ce," of "+p(h.value),1),e("li",{class:M(["page-item",{disabled:l.value===h.value}])},[f(o,{class:"page-link page-link-next",to:S(n.value.id,n.value.name,l.value+1),"aria-label":"Next",onClick:j},{default:k(()=>t[8]||(t[8]=[g(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",Pe,[e("div",we,[e("div",{class:"widget widget-clean"},[t[9]||(t[9]=e("label",null,"Filters:",-1)),e("button",{onClick:I,class:"btn btn-primary btn-sm sidebar-filter-clear"}," Clean All ")]),V.value.length?(c(),r("div",Ve,[t[10]||(t[10]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",Be,[e("div",Se,[e("div",Ne,[(c(!0),r(y,null,C(V.value,a=>(c(),r("div",{class:"filter-item",key:a.id},[e("div",Me,[e("input",{type:"checkbox",class:"custom-control-input",id:"cat-"+a.id,value:a.id,onChange:m=>E(a.id)},null,40,Ae),e("label",{class:"custom-control-label",for:"cat-"+a.id},p(a.name),9,Le)]),e("span",Oe,p(a.category_products_count),1)]))),128))])])])])):D("",!0),e("div",$e,[t[11]||(t[11]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",Te,[e("div",De,[e("div",Ee,[(c(!0),r(y,null,C(L.value,a=>(c(),r("div",{key:a.id,class:"filter-item"},[e("div",Fe,[e("input",{type:"checkbox",class:"custom-control-input",id:"brand-"+a.product_brand.id,value:a.product_brand.id,onChange:m=>F(a.product_brand.id)},null,40,Ie),e("label",{class:"custom-control-label",for:"brand-"+a.product_brand.id},p(a.product_brand.name),9,qe)])]))),128))])])])])])])])])])])}}};export{He as default};
