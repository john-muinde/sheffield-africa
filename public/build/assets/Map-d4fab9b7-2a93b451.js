import{d as z,r as b,ad as M,H as v,o as J,w as i,L as C,bK as f,bB as p,bC as y,bS as k,bP as $,ab as B,bI as E,bJ as I,Q as j,Z as x,bD as Z,bF as S}from"./index-fb7a5e42.js";import{A}from"./v3-gmaps-e86baa73.js";import{c as D,a as H,y as g}from"./tools-b40e92cf-d03b1370.js";import"./_commonjsHelpers-de833af9.js";const L=(t,r)=>{const n=t.__vccOpts||t;for(const[s,c]of r)n[s]=c;return n},P={},V={class:"gmaps-error"};function F(t,r){return p(),y("span",V,[S(t.$slots,"default")])}const G=L(P,[["render",F]]),K={},Q={class:"gmaps-spinner"};function R(t,r){return p(),y("span",Q)}const U=L(K,[["render",R]]),q={center:{lat:0,lng:0},zoom:2},W=z({name:"GmapsMap",components:{MapSpinner:U,MapError:G},props:{center:{type:Object},clickableIcons:{type:Boolean},heading:{type:[String,Number]},mapTypeId:{type:[String,Object]},options:{type:Object,default:void 0},tilt:{type:[String,Number]},zoom:{type:[String,Number]},throttle:{type:[Number,String],default:100}},emits:{bounds_changed:t=>!0,center_changed:t=>!0,click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:()=>!0,dragend:()=>!0,dragstart:()=>!0,error:t=>!0,heading_changed:t=>!0,idle:()=>!0,isfractionalzoomenabled_changed:t=>!0,maptypeid_changed:t=>!0,mounted:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,projection_changed:()=>!0,renderingtype_changed:()=>!0,rightclick:t=>!0,tilesloaded:()=>!0,tilt_changed:t=>!0,unmounted:t=>!0,zoom_changed:t=>!0},setup(t,{emit:r}){let n=null,s=null;const c=[],h=b(),u=b(null),m=b(!1),{throttle:N}=M(t),_=H((e,o)=>{u.value=`[${o}]: ${e.message}`,r("error",u.value)},500),O=()=>{if(!s)throw new Error("vue3-gmaps :: getAPI() called before API loaded.");return s},w=()=>{if(!n)throw new Error("vue3-gmaps :: getMap() called before map loaded.");return n};v("$getAPI",O),v("$getMap",w),v("$getThrottle",()=>+t.throttle),v("$handleError",_);const T=e=>{const o=+N.value,a=google.maps.event;c.push(a.addListener(e,"bounds_changed",g(()=>{var l;return r("bounds_changed",((l=e.getBounds())==null?void 0:l.toJSON())||null)},o)),a.addListener(e,"center_changed",g(()=>{var l;return r("center_changed",((l=e.getCenter())==null?void 0:l.toJSON())||null)},o)),a.addListener(e,"drag",g(()=>r("drag"),o)),a.addListener(e,"mousemove",g(l=>{var d;return r("mousemove",((d=l.latLng)==null?void 0:d.toJSON())||null)},o)),a.addListener(e,"idle",g(()=>r("idle"),o)),a.addListener(e,"click",l=>{var d;return r("click",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"contextmenu",l=>{var d;return r("contextmenu",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"dblclick",l=>{var d;return r("dblclick",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"dragend",()=>r("dragend")),a.addListener(e,"dragstart",()=>r("dragstart")),a.addListener(e,"heading_changed",()=>r("heading_changed",e.getHeading()||null)),a.addListener(e,"isfractionalzoomenabled_changed",()=>r("isfractionalzoomenabled_changed",e.getZoom()||null)),a.addListener(e,"maptypeid_changed",()=>r("maptypeid_changed",e.getMapTypeId()||null)),a.addListener(e,"mouseout",l=>{var d;return r("mouseout",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"mouseover",l=>{var d;return r("mouseover",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"projection_changed",()=>r("projection_changed")),a.addListener(e,"renderingtype_changed",()=>r("renderingtype_changed")),a.addListener(e,"rightclick",l=>{var d;return r("rightclick",((d=l.latLng)==null?void 0:d.toJSON())||null)}),a.addListener(e,"tilesloaded",()=>r("tilesloaded")),a.addListener(e,"tilt_changed",()=>r("tilt_changed",e.getTilt()||null)),a.addListener(e,"zoom_changed",()=>r("zoom_changed",e.getZoom()||null)))};return J(()=>{A().then(e=>{s=e;const o={...q,...t.options};t.center&&(o.center=t.center),t.clickableIcons&&(o.clickableIcons=t.clickableIcons),t.heading&&(o.heading=t.heading),t.mapTypeId&&(o.mapTypeId=t.mapTypeId),t.tilt&&(o.tilt=t.tilt),t.zoom&&(o.zoom=t.zoom),n=new e.Map(h.value,o),n&&T(n),r("mounted",n),m.value=!0}).catch(e=>_(e,"Map"))}),i(()=>t.center,e=>{var o;return e===void 0||D(e,(o=n==null?void 0:n.getCenter())==null?void 0:o.toJSON())?null:n==null?void 0:n.setCenter(e)},{deep:!0}),i(()=>t.clickableIcons,e=>e===void 0||e==(n==null?void 0:n.getClickableIcons())?null:n==null?void 0:n.setClickableIcons(e)),i(()=>t.heading,e=>e===void 0||+e==(n==null?void 0:n.getHeading())?null:n==null?void 0:n.setHeading(+e)),i(()=>t.mapTypeId,e=>e===void 0||e==(n==null?void 0:n.getMapTypeId())?null:n==null?void 0:n.setMapTypeId(e)),i(()=>t.options,e=>e?n==null?void 0:n.setOptions(e):null),i(()=>t.tilt,e=>e===void 0||+e==(n==null?void 0:n.getTilt())?null:n==null?void 0:n.setTilt(+e)),i(()=>t.zoom,e=>e===void 0||+e==(n==null?void 0:n.getZoom())?null:n==null?void 0:n.setZoom(+e)),C(()=>{n&&r("unmounted",n),c.forEach(e=>e.remove()),n&&window.google.maps.event.clearInstanceListeners(n)}),{error:u,ready:m,mapEl:h}}}),X={style:{width:"100%",height:"100%"}},Y={ref:"mapEl",style:{width:"100%",height:"100%"}};function ee(t,r,n,s,c,h){const u=f("map-error"),m=f("map-spinner");return p(),y("div",X,[t.error?(p(),k(u,{key:0},{default:$(()=>[B(E(t.error),1)]),_:1})):t.ready?I("",!0):(p(),k(m,{key:1})),j(Z("div",Y,null,512),[[x,t.ready&&!t.error]]),t.ready&&!t.error?S(t.$slots,"default",{key:2}):I("",!0)])}const de=L(W,[["render",ee]]);export{de as default};
