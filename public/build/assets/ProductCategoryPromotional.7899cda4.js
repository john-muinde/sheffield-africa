import{ck as Q,c7 as Y,z as r,h as z,o as ee,w as M,W as te,co as ae,bx as se,C as oe,bo as c,bp as u,bq as e,j as h,bC as b,bv as v,X as p,B as E,cl as le,c2 as ie,S as y,by as P,bt as A,bw as F,bT as ne}from"./app-setting.0dc31b76.js";import"./_commonjsHelpers.f037b798.js";const re={class:"main"},ce={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},de={class:"container d-flex align-items-center"},ue={class:"breadcrumb"},ve={class:"breadcrumb-item"},pe={class:"breadcrumb-item"},ge={class:"breadcrumb-item active","aria-current":"page"},me={class:"page-content"},_e={class:"container"},be={class:"row"},he={class:"col-lg-10"},fe={class:"toolbox"},ke={class:"toolbox-left"},Ce={class:"toolbox-info"},xe={class:"toolbox-right"},we={class:"toolbox-sort"},ye={class:"select-custom"},Pe={class:"products mb-3 products-section"},$e={class:"row"},Ne={class:"product product-7 text-center"},Se={class:"product-media"},Be=["src"],Ve={class:"product-action"},Le=["onClick"],Me={class:"product-body"},Ae={class:"product-cat"},Te={class:"product-title"},Oe={"aria-label":"Page navigation"},De={class:"pagination justify-content-center"},Ie={class:"page-item-total"},ze={class:"col-lg-2 order-lg-first"},Ee={class:"sidebar sidebar-shop sidebar-shop-category"},Fe={key:0,class:"widget widget-collapsible"},qe={class:"show",id:"widget-1"},je={class:"widget-body"},Ze={class:"filter-items filter-items-count"},He={class:"custom-control custom-checkbox"},Re=["id","value","onChange"],Ue=["for"],We={class:"item-count"},Xe={class:"widget widget-collapsible"},Ge={class:"show",id:"widget-4"},Je={class:"widget-body"},Ke={class:"filter-items"},Qe={class:"custom-control custom-checkbox"},Ye=["id","value","onChange"],et=["for"],ot={__name:"ProductCategoryPromotional",setup(tt){const q=Q(),j=s=>{window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"}).fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}}),q.dispatch("cart/addToCart",s)},f=Y(),l=r(f.params.page?parseInt(f.params.page):1),$=r(12),N=r(0),w=r([]),T=r(0),g=r(f.params.id?parseInt(f.params.id):1),S=r([]),O=r([]),n=r([]),m=r([]),_=r([]),k=r(""),B=async()=>{try{const s={[g.value]:m.value[g.value]||[]};m.value=s;const t={[g.value]:_.value[g.value]||[]};_.value=t,console.log({page:l.value,per_page:$.value,category_id:g.value,checkedCategories:m.value,checkedBrands:_.value,selectedSortOption:k.value});const o=await axios.get("/api/get-products",{params:{page:l.value,per_page:$.value,category_id:g.value,checkedCategories:m.value,checkedBrands:_.value,selectedSortOption:k.value}});w.value=o.data.products.data,N.value=o.data.products.total,T.value=o.data.products.per_page,S.value=o.data.categories,O.value=o.data.brands,n.value=o.data.the_category}catch(s){console.error(s)}};function Z(s){let t=n.value.id;t in m.value||(m.value[t]=[]);const o=m.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s)}function H(s){let t=n.value.id;t in _.value||(_.value[t]=[]);const o=_.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s)}function R(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),m.value=[],_.value=[],k.value=null}const C=z(()=>Math.ceil(N.value/$.value)),D=r([]),U=()=>{l.value>1&&l.value--},W=()=>{l.value<C.value&&l.value++},X=s=>{l.value=s},V=(s,t,o,i)=>{let a=t.replace(/ /g,"-").replace(/\//g,"-");a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase();let d=i.replace(/ /g,"-").replace(/\//g,"-");d=d.replace(/-+/g,"-"),d=d.replace(/^-+|-+$/g,""),d=d.toLowerCase();let x=o.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return x=x.replace(/-+/g,"-"),x=x.replace(/^-+|-+$/g,""),`/promotional-solutions/product/${s}/${a}-${x}`},L=(s,t,o)=>{if(t===void 0)return"/promotional-solutions";{let i=t.replace(/ /g,"-").replace(/\//g,"-");return i=i.replace(/-+/g,"-"),i=i.replace(/^-+|-+$/g,""),i=i.toLowerCase(),`/promotional-solutions/${s}/${i}/page/${o}`}},G=()=>{console.log(w),D.value=w.value},J=s=>Number.isInteger(s),K=z(()=>{const s=[];l.value>1&&s.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),i=Math.min(o+5-1,C.value);i-o<5-1&&(o=Math.max(1,i-5+1));for(let a=o;a<=i;a++)s.push(a);return l.value<C.value&&s.push("Next"),s});ee(()=>{B()}),M(l,B),M(w,G),te(()=>{const s=f.params;f.query,s.id!==""&&g!==s.id&&(l.value=1,g.value=s.id?parseInt(s.id):1,s.page!==""&&l!==s.page&&(l.value=s.page?parseInt(s.page):1),B())});const I=r("");return M(()=>n.value.name,(s,t)=>{console.log(s),console.log(t),s!==t&&(console.log("changing it"),I.value=s)}),ae({title:I.value+"All you can get Promotions"}),(s,t)=>{const o=se("router-link"),i=oe("lazy");return c(),u("main",re,[e("nav",ce,[e("div",de,[e("ol",ue,[e("li",ve,[h(o,{to:"/"},{default:b(()=>t[1]||(t[1]=[p("HOME")])),_:1})]),e("li",pe,[h(o,{to:"/promotional-solutions"},{default:b(()=>t[2]||(t[2]=[p("All Promotions")])),_:1})]),e("li",ge,v(n.value.name),1)])])]),e("div",me,[e("div",_e,[e("div",be,[e("div",he,[e("div",fe,[e("div",ke,[e("div",Ce,[t[3]||(t[3]=p(" Showing ")),e("span",null,v(T.value)+" of "+v(N.value),1),t[4]||(t[4]=p(" Products "))])]),e("div",xe,[e("div",we,[t[6]||(t[6]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",ye,[E(e("select",{name:"sortby",id:"sortby",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a)},t[5]||(t[5]=[ie('<option value="">Default</option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[le,k.value]])])])])]),e("div",Pe,[e("div",$e,[(c(!0),u(y,null,P(D.value,a=>(c(),u("div",{class:"col-6 col-md-3 col-lg-2 col-xl-2",key:a.id},[e("div",Ne,[e("figure",Se,[h(o,{to:V(a.id,a.name,a.model_number,n.value.name)},{default:b(()=>[E(e("img",{src:"/storage/"+a.main_image_path,alt:"Product image",class:"product-image"},null,8,Be),[[i,"/storage/"+a.main_image_path,"src"]])]),_:2},1032,["to"]),t[8]||(t[8]=e("div",{class:"product-action-vertical"},null,-1)),e("div",Ve,[e("button",{type:"button",onClick:d=>j(a),class:"btn-product btn-cart"},t[7]||(t[7]=[e("span",null,"Add to Cart",-1)]),8,Le)])]),e("div",Me,[e("div",Ae,[h(o,{to:V(a.id,a.name,a.model_number,n.value.name)},{default:b(()=>[p(v(a.product_brand.name),1)]),_:2},1032,["to"])]),e("h3",Te,[h(o,{to:V(a.id,a.name,a.model_number,n.value.name)},{default:b(()=>[p(v(a.name),1)]),_:2},1032,["to"])]),t[9]||(t[9]=e("div",{class:"ratings-container"},null,-1))])])]))),128))])]),e("nav",Oe,[e("ul",De,[e("li",{class:A(["page-item",{disabled:l.value===1}])},[h(o,{class:"page-link page-link-prev",to:L(n.value.id,n.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:U},{default:b(()=>t[10]||(t[10]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),p(" Prev ")])),_:1},8,["to"])],2),(c(!0),u(y,null,P(K.value,a=>(c(),u("li",{class:A(["page-item",{active:a===l.value}]),key:a},[J(a)?(c(),ne(o,{key:0,class:"page-link",to:L(n.value.id,n.value.name,a),onClick:d=>X(a)},{default:b(()=>[p(v(a),1)]),_:2},1032,["to","onClick"])):F("",!0)],2))),128)),e("li",Ie," of "+v(C.value),1),e("li",{class:A(["page-item",{disabled:l.value===C.value}])},[h(o,{class:"page-link page-link-next",to:L(n.value.id,n.value.name,l.value+1),"aria-label":"Next",onClick:W},{default:b(()=>t[11]||(t[11]=[p(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",ze,[e("div",Ee,[e("div",{class:"widget widget-clean"},[t[12]||(t[12]=e("label",null,"Filters:",-1)),e("button",{onClick:R,class:"btn btn-primary btn-sm sidebar-filter-clear"}," Clean All ")]),S.value.length?(c(),u("div",Fe,[t[13]||(t[13]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",qe,[e("div",je,[e("div",Ze,[(c(!0),u(y,null,P(S.value,a=>(c(),u("div",{class:"filter-item",key:a.id},[e("div",He,[e("input",{type:"checkbox",class:"custom-control-input",id:"cat-"+a.id,value:a.id,onChange:d=>Z(a.id)},null,40,Re),e("label",{class:"custom-control-label",for:"cat-"+a.id},v(a.name),9,Ue)]),e("span",We,v(a.category_products_count),1)]))),128))])])])])):F("",!0),e("div",Xe,[t[14]||(t[14]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",Ge,[e("div",Je,[e("div",Ke,[(c(!0),u(y,null,P(O.value,a=>(c(),u("div",{key:a.id,class:"filter-item"},[e("div",Qe,[e("input",{type:"checkbox",class:"custom-control-input",id:"brand-"+a.product_brand.id,value:a.product_brand.id,onChange:d=>H(a.product_brand.id)},null,40,Ye),e("label",{class:"custom-control-label",for:"brand-"+a.product_brand.id},v(a.product_brand.name),9,et)])]))),128))])])])])])])])])])])}}};export{ot as default};
