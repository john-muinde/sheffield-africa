import{v as r,b as v,d as o}from"./index-0d6930bf.js";function B(){const d=r.ref([]),p=r.ref([]),f=r.ref({title:"",department:"",location:"",education:"",education:"",experience:"",deadline:"",description:"",responsibilities:"",requirements:"",is_published:""}),c=v(),i=r.ref({}),a=r.ref(!1),l=r.inject("$swal"),h=async(e=1,s="",t="",n="",u="created_at",m="desc")=>{o.get("/api/careers?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+n+"&order_column="+u+"&order_direction="+m).then(g=>{d.value=g.data})};return{careerList:p,careers:d,career:f,getCareers:h,getCareerList:async()=>{o.get("/api/career-list").then(e=>{p.value=e.data.data})},getCareer:async e=>{o.get("/api/careers/"+e).then(s=>{f.value=s.data.data})},storeCareer:async e=>{if(console.log(e),a.value)return;a.value=!0,i.value={};let s=new FormData;for(let n in e)e.hasOwnProperty(n)&&s.append(n,e[n]);const t={headers:{"content-type":"multipart/form-data"}};console.log(s),o.post("/api/careers",s,t).then(n=>{c.push({name:"careers.create"}),e.title=null,e.department=null,e.location=null,e.education=null,e.experience=null,e.deadline=null,e.description=null,e.responsibilities=null,e.requirements=null,e.is_published=null,l({icon:"success",title:"Career saved successfully"})}).catch(n=>{var u;(u=n.response)!=null&&u.data&&(i.value=n.response.data.errors)}).finally(()=>a.value=!1)},updateCareer:async e=>{if(console.log(e),a.value)return;a.value=!0,i.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);console.log(s),o.put("/api/careers/"+e.id,e).then(t=>{c.push({name:"careers.index"}),l({icon:"success",title:"Career updated successfully"})}).catch(t=>{var n;(n=t.response)!=null&&n.data&&(i.value=t.response.data.errors)}).finally(()=>a.value=!1)},deleteCareer:async e=>{l({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&o.delete("/api/careers/"+e).then(t=>{h(),c.push({name:"careers.index"}),l({icon:"success",title:"Career deleted successfully"})}).catch(t=>{l({icon:"error",title:"Something went wrong"})})})},validationErrors:i,isLoading:a}}export{B as u};
