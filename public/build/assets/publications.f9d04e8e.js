import{r,c8 as m,cg as i}from"./index.61f1fa09.js";import{$ as v}from"./Modal.c37ab4c9.js";function L(){const u=r([]),p=r([]),d=r({name:"",type:"",content:"",is_published:"",publication_file:null,thumbnail_path:null,main_image_path:null}),c=m(),s=r({}),o=r(!1),b=async(e=1,a="",n="",t="",h="",f="created_at",y="desc")=>{try{const l=await i("get",`/api/publications?page=${e}&search_id=${a}&search_title=${n}&search_parent_id=${t}&search_global=${h}&order_column=${f}&order_direction=${y}`);u.value=l}catch(l){s.value=l,console.error(error)}};return{publicationsList:p,publications:u,publication:d,getPublications:b,getPublicationList:async()=>{try{const e=await i("get","/api/publication-list");p.value=e}catch(e){s.value=e,console.error(e)}},getPublication:async e=>{try{const a=await i("get",`/api/publications/${e}`);d.value=a}catch(a){s.value=a,console.error(a)}},storePublication:async e=>{if(o.value)return;o.value=!0,s.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&a.append(t,e[t]);const n={headers:{"Content-Type":"multipart/form-data"}};try{await i("post","/api/publications",a,n),c.push({name:"publications.index"}),e.value={name:"",parent_id:"",description:"",is_published:""},showToast("Publication saved successfully","success")}catch(t){s.value=t,console.error(t)}finally{o.value=!1}},updatePublication:async e=>{if(o.value)return;o.value=!0,s.value={};let a=new FormData;for(let t in e)e.hasOwnProperty(t)&&a.append(t,e[t]);const n={headers:{"Content-Type":"multipart/form-data"}};try{await i("put",`/api/publications/${e.id}`,a,n),c.push({name:"publications.index"}),showToast("Publication updated successfully","success")}catch(t){s.value=t,console.error(t)}finally{o.value=!1}},deletePublication:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{await i("delete",`/api/publications/${e}`),b(),c.push({name:"publications.index"}),showToast("Publication deleted successfully","success")}})},validationErrors:s,isLoading:o}}export{L as u};
