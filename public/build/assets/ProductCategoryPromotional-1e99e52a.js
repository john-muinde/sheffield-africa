import{bT as se,r as n,c as G,o as ae,w as L,aa as oe,bK as le,bB as r,bC as c,bD as e,e as x,bP as w,bI as u,ab as m,Q as ie,ca as ne,bV as de,a7 as P,bL as V,bG as $,bJ as H,bS as re}from"./index-f7b41895.js";import{b as ce}from"./use-meta-21982589.js";import ue from"./ProductCard-0b2ac03f.js";import"./_commonjsHelpers-de833af9.js";import"./_plugin-vue_export-helper-c27b6911.js";const ve={class:"main"},pe={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},_e={class:"container d-flex align-items-center"},me={class:"breadcrumb"},be={class:"breadcrumb-item"},he={class:"breadcrumb-item"},ge={class:"breadcrumb-item active","aria-current":"page"},fe={class:"page-content"},ke={class:"container"},xe={class:"row"},we={class:"col-lg-10"},Ce={class:"toolbox"},Pe={class:"toolbox-left"},Ve={class:"toolbox-info"},Ne={class:"toolbox-right"},Be={class:"toolbox-sort"},Se={class:"select-custom"},Me={class:"products mb-3 products-section"},ye={class:"row"},Ae={"aria-label":"Page navigation"},Le={class:"pagination justify-content-center"},$e={class:"page-item-total"},Oe={class:"col-lg-2 order-lg-first"},Te={class:"sidebar sidebar-shop sidebar-shop-category"},De={key:0,class:"widget widget-collapsible"},Ie={id:"widget-1",class:"show"},Ee={class:"widget-body"},Fe={class:"filter-items filter-items-count"},Ze={class:"custom-control custom-checkbox"},je=["id","value","onChange"],qe=["for"],ze={class:"item-count"},Ge={class:"widget widget-collapsible"},He={id:"widget-4",class:"show"},Je={class:"widget-body"},Ke={class:"filter-items"},Qe={class:"custom-control custom-checkbox"},Re=["id","value","onChange"],Ue=["for"],ot={__name:"ProductCategoryPromotional",setup(We){const g=se(),l=n(g.params.page?parseInt(g.params.page):1),O=n(12),N=n(0),B=n([]),T=n(0),v=n(g.params.id?parseInt(g.params.id):1),S=n([]),D=n([]),d=n([]),p=n([]),_=n([]),C=n(""),J=window.axios,M=async()=>{try{const a={[v.value]:p.value[v.value]||[]};p.value=a;const t={[v.value]:_.value[v.value]||[]};_.value=t;const o=await J.get("/api/get-products",{params:{page:l.value,per_page:O.value,category_id:v.value,checkedCategories:p.value,checkedBrands:_.value,selectedSortOption:C.value}});B.value=o.data.products.data,N.value=o.data.products.total,T.value=o.data.products.per_page,S.value=o.data.categories,D.value=o.data.brands,d.value=o.data.the_category}catch(a){console.error(a)}};function K(a){let t=d.value.id;t in p.value||(p.value[t]=[]);const o=p.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function Q(a){let t=d.value.id;t in _.value||(_.value[t]=[]);const o=_.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function R(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),p.value=[],_.value=[],C.value=null}const f=G(()=>Math.ceil(N.value/O.value)),I=n([]),U=()=>{l.value>1&&l.value--},W=()=>{l.value<f.value&&l.value++},X=a=>{l.value=a},y=(a,t,o)=>{if(t===void 0)return"/promotional-solutions";{let i=t.replace(/ /g,"-").replace(/\//g,"-");return i=i.replace(/-+/g,"-"),i=i.replace(/^-+|-+$/g,""),i=i.toLowerCase(),`/promotional-solutions/${a}/${i}/page/${o}`}},Y=()=>{I.value=B.value},ee=a=>Number.isInteger(a),te=G(()=>{const a=[];l.value>1&&a.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),i=Math.min(o+5-1,f.value);i-o<5-1&&(o=Math.max(1,i-5+1));for(let b=o;b<=i;b++)a.push(b);return l.value<f.value&&a.push("Next"),a});ae(()=>{M()}),L(l,M),L(B,Y),oe(()=>{const a=g.params;a.id!==""&&v.value!==a.id&&(l.value=1,v.value=a.id?parseInt(a.id):1,a.page!==""&&l.value!==a.page&&(l.value=a.page?parseInt(a.page):1),M())});const E=n("");return L(()=>{var a;return(a=d.value)==null?void 0:a.name},(a,t)=>{a!==t&&(E.value=a)}),ce({title:E.value+"All you can get Promotions"}),(a,t)=>{var i,b,F,Z,j;const o=le("router-link");return r(),c("main",ve,[e("nav",pe,[e("div",_e,[e("ol",me,[e("li",be,[x(o,{to:"/"},{default:w(()=>t[1]||(t[1]=[m(" HOME ")])),_:1})]),e("li",he,[x(o,{to:"/promotional-solutions"},{default:w(()=>t[2]||(t[2]=[m(" All Promotions ")])),_:1})]),e("li",ge,u((i=d.value)==null?void 0:i.name),1)])])]),e("div",fe,[e("div",ke,[e("div",xe,[e("div",we,[e("div",Ce,[e("div",Pe,[e("div",Ve,[t[3]||(t[3]=m(" Showing ")),e("span",null,u(T.value)+" of "+u(N.value),1),t[4]||(t[4]=m(" Products "))])]),e("div",Ne,[e("div",Be,[t[6]||(t[6]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",Se,[ie(e("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),name:"sortby",class:"form-control"},t[5]||(t[5]=[de('<option value=""> Default </option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[ne,C.value]])])])])]),e("div",Me,[e("div",ye,[(r(!0),c(P,null,V(I.value,s=>(r(),c("div",{key:s==null?void 0:s.id,class:"col-6 col-md-4 col-lg-3 col-xl-2"},[x(ue,{product:s},null,8,["product"])]))),128))])]),e("nav",Ae,[e("ul",Le,[e("li",{class:$(["page-item",{disabled:l.value===1}])},[x(o,{class:"page-link page-link-prev",to:y((b=d.value)==null?void 0:b.id,(F=d.value)==null?void 0:F.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:U},{default:w(()=>t[7]||(t[7]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),m(" Prev ")])),_:1},8,["to"])],2),(r(!0),c(P,null,V(te.value,s=>{var h,k;return r(),c("li",{key:s,class:$(["page-item",{active:s===l.value}])},[ee(s)?(r(),re(o,{key:0,class:"page-link",to:y((h=d.value)==null?void 0:h.id,(k=d.value)==null?void 0:k.name,s),onClick:A=>X(s)},{default:w(()=>[m(u(s),1)]),_:2},1032,["to","onClick"])):H("",!0)],2)}),128)),e("li",$e," of "+u(f.value),1),e("li",{class:$(["page-item",{disabled:l.value===f.value}])},[x(o,{class:"page-link page-link-next",to:y((Z=d.value)==null?void 0:Z.id,(j=d.value)==null?void 0:j.name,l.value+1),"aria-label":"Next",onClick:W},{default:w(()=>t[8]||(t[8]=[m(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",Oe,[e("div",Te,[e("div",{class:"widget widget-clean"},[t[9]||(t[9]=e("label",null,"Filters:",-1)),e("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:R}," Clean All ")]),S.value.length?(r(),c("div",De,[t[10]||(t[10]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",Ie,[e("div",Ee,[e("div",Fe,[(r(!0),c(P,null,V(S.value,s=>(r(),c("div",{key:s==null?void 0:s.id,class:"filter-item"},[e("div",Ze,[e("input",{id:"cat-"+(s==null?void 0:s.id),type:"checkbox",class:"custom-control-input",value:s==null?void 0:s.id,onChange:h=>K(s==null?void 0:s.id)},null,40,je),e("label",{class:"custom-control-label",for:"cat-"+(s==null?void 0:s.id)},u(s==null?void 0:s.name),9,qe)]),e("span",ze,u(s.category_products_count),1)]))),128))])])])])):H("",!0),e("div",Ge,[t[11]||(t[11]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",He,[e("div",Je,[e("div",Ke,[(r(!0),c(P,null,V(D.value,s=>{var h,k,A,q;return r(),c("div",{key:s==null?void 0:s.id,class:"filter-item"},[e("div",Qe,[e("input",{id:"brand-"+((h=s.product_brand)==null?void 0:h.id),type:"checkbox",class:"custom-control-input",value:(k=s.product_brand)==null?void 0:k.id,onChange:Xe=>{var z;return Q((z=s.product_brand)==null?void 0:z.id)}},null,40,Re),e("label",{class:"custom-control-label",for:"brand-"+((A=s.product_brand)==null?void 0:A.id)},u((q=s.product_brand)==null?void 0:q.name),9,Ue)])])}),128))])])])])])])])])])])}}};export{ot as default};
