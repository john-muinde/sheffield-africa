import{r as c,c6 as m,cg as n}from"./index.b5cb60a8.js";import{$ as v}from"./Modal.e84f656d.js";function L(){const p=c([]),d=c([]),b=c({name:"",type:"",content:"",is_published:"",publication_file:null,thumbnail_path:null,main_image_path:null}),u=m(),s=c({}),o=c(!1),f=async(e=1,a="",i="",r="",t="",h="created_at",y="desc")=>{try{const l=await n("get",`/api/publications?page=${e}&search_id=${a}&search_title=${i}&search_parent_id=${r}&search_global=${t}&order_column=${h}&order_direction=${y}`);p.value=l}catch(l){s.value=l,console.error(l)}};return{publicationsList:d,publications:p,publication:b,getPublications:f,getPublicationList:async()=>{try{const e=await n("get","/api/publication-list");d.value=e}catch(e){s.value=e,console.error(e)}},getPublication:async e=>{try{const a=await n("get",`/api/publications/${e}`);b.value=a}catch(a){s.value=a,console.error(a)}},storePublication:async(e,a=!1)=>{if(o.value&&!a)return;o.value=!0,s.value={};let i=new FormData;for(let t in e)e.hasOwnProperty(t)&&i.append(t,e[t]);const r={headers:{"Content-Type":"multipart/form-data"}};try{await n("post","/api/publications",i,r),u.push({name:"publications.index"}),e.value={name:"",parent_id:"",description:"",is_published:""},showToast("Publication saved successfully","success")}catch(t){s.value=t,console.error(t)}finally{o.value=!1}},updatePublication:async(e,a=!1)=>{if(o.value&&!a)return;o.value=!0,s.value={};let i=new FormData;for(let t in e)e.hasOwnProperty(t)&&i.append(t,e[t]);const r={headers:{"Content-Type":"multipart/form-data"}};try{await n("put",`/api/publications/${e.id}`,i,r),u.push({name:"publications.index"}),showToast("Publication updated successfully","success")}catch(t){s.value=t,console.error(t)}finally{o.value=!1}},deletePublication:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk:async()=>{await n("delete",`/api/publications/${e}`),f(),u.push({name:"publications.index"}),showToast("Publication deleted successfully","success")}})},validationErrors:s,isLoading:o}}export{L as u};
