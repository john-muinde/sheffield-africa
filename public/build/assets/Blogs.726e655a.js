import{c7 as H,S as r,G as I,s as J,y as M,aa as K,f as O,V as Q,o as n,c,a,h as d,k as u,bJ as y,e as p,F as T,g as L,n as w,t as f,m as U,l as _}from"./app-setting.6eff956e.js";import"./use-meta.4b23cb29.js";import{C}from"./ContentState.fd313497.js";import{_ as W}from"./_plugin-vue_export-helper.cdc0426e.js";import"./_commonjsHelpers.f037b798.js";const X={class:"main"},Y={class:"page-content"},Z={class:"container"},ee={class:"row"},te={class:"col-lg-10 offset-lg-1"},ae={key:3,class:"row blogs-main-page-section"},se={class:"entry entry-grid"},oe={class:"entry-media entry-gallery"},le=["src"],ne={class:"entry-body"},re={class:"entry-title"},ie={class:"entry-content"},ce={class:"mb-2"},ue={key:4,class:"row"},ge={class:"col-md-12"},de={"aria-label":"Page navigation"},pe={class:"pagination justify-content-center"},me={class:"page-item-total"},ve={__name:"Blogs",setup(_e){const g=H(),o=r(g.params.page?parseInt(g.params.page):1),N=r(9),V=r(0),b=r([]),P=r(g.params.id?parseInt(g.params.id):1),D=r([]),h=r(!1),S=r(null),k=async()=>{h.value=!0;try{const e=await axios.get("/api/get-blogs",{params:{page:o.value,per_page:N.value,category_id:P.value}});b.value=e.data.data,V.value=e.data.total}catch(e){e.value=e,console.error(e)}finally{h.value=!1}},$=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});D.value=e.data.other_blogs}catch(e){console.error(e)}},x=(e,l)=>{let s=l.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/blogs/${e}/${s}`},B=e=>`/media/blogs/page/${e}`,m=I(()=>Math.ceil(V.value/N.value)),v=r([]),E=()=>{o.value>1&&o.value--},z=()=>{o.value<m.value&&o.value++},F=e=>{o.value=e},q=()=>{v.value=b.value},R=e=>Number.isInteger(e),j=I(()=>{const e=[];o.value>1&&e.push("Prev");let s=Math.max(1,o.value-Math.floor(5/2)),i=Math.min(s+5-1,m.value);i-s<5-1&&(s=Math.max(1,i-5+1));for(let t=s;t<=i;t++)e.push(t);return o.value<m.value&&e.push("Next"),e}),A=e=>{const l=document.createElement("div");l.innerHTML=e;const s=l.querySelectorAll("p");for(const i of s){const t=i.textContent.trim();if(t.length>50)return t.length>140?t.slice(0,144)+"...":t}return""},G=e=>e.length>5?e.length>35?e.slice(0,35)+"...":e:"";return J(()=>{k(),$()}),M(o,k),M(b,q),K(()=>{const e=g.params;g.query,e.id!==""&&P!==e.id&&(o.value=1,P.value=e.id?parseInt(e.id):1,e.page!==""&&o!==e.page&&(o.value=e.page?parseInt(e.page):1),k())}),(e,l)=>{const s=O("router-link"),i=Q("lazy");return n(),c("div",null,[a("main",X,[a("div",Y,[a("div",Z,[a("div",ee,[a("div",te,[l[4]||(l[4]=a("h2",{class:"about-us-title"},"Blogs",-1)),d(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:u(()=>l[0]||(l[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),l[5]||(l[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),h.value?(n(),y(C,{key:0,type:"loading",contentType:"Blog Posts"})):p("",!0),!v.value.length&&!h.value?(n(),y(C,{key:1,type:"empty",contentType:"Blog Posts"})):p("",!0),S.value?(n(),y(C,{key:2,type:"error",contentType:"Blog Posts"})):p("",!0),v.value.length?(n(),c("div",ae,[(n(!0),c(T,null,L(v.value,t=>(n(),c("div",{class:"entry-item col-sm-6 col-lg-4",key:t.id},[a("article",se,[a("figure",oe,[d(s,{to:x(t.id,t.name)},{default:u(()=>[U(a("img",{src:"/storage/"+t.main_image_path,alt:"image desc"},null,8,le),[[i,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"])]),a("div",ne,[a("h2",re,[d(s,{class:"text-primary",to:x(t.id,t.name)},{default:u(()=>[_(f(G(t.name)),1)]),_:2},1032,["to"])]),a("div",ie,[a("div",ce,f(A(t.excerpt)),1),d(s,{class:"btn btn-primary",to:x(t.id,t.name)},{default:u(()=>l[1]||(l[1]=[_(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)])),_:2},1032,["to"])])])])]))),128))])):p("",!0),v.value.length?(n(),c("div",ue,[a("div",ge,[a("nav",de,[a("ul",pe,[a("li",{class:w(["page-item",{disabled:o.value===1}])},[d(s,{class:"page-link page-link-prev",to:B(o.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:E},{default:u(()=>l[2]||(l[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(n(!0),c(T,null,L(j.value,t=>(n(),c("li",{class:w(["page-item",{active:t===o.value}]),key:t},[R(t)?(n(),y(s,{key:0,class:"page-link",to:B(t),onClick:he=>F(t)},{default:u(()=>[_(f(t),1)]),_:2},1032,["to","onClick"])):p("",!0)],2))),128)),a("li",me," of "+f(m.value),1),a("li",{class:w(["page-item",{disabled:o.value===m.value}])},[d(s,{class:"page-link page-link-next",to:B(o.value+1),"aria-label":"Next",onClick:z},{default:u(()=>l[3]||(l[3]=[_(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):p("",!0)])])])])])])}}},xe=W(ve,[["__scopeId","data-v-463cd852"]]);export{xe as default};
