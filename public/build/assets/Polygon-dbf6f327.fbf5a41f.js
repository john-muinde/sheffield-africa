import{y as p,c as w}from"./tools-b40e92cf.4881bf31.js";import{r as o}from"./gmaps-ca810647.822941de.js";import{q as $,a9 as u,x as g,Y as E}from"./app-setting.435ce9bf.js";import"./_commonjsHelpers.f037b798.js";const J=$({name:"GmapsPolygon",props:{draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,default:void 0},paths:{type:Object,default:void 0},visible:{type:Boolean,default:!0}},emits:{click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:t=>!0,dragend:t=>!0,dragstart:t=>!0,mounted:t=>!0,mousedown:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,mouseup:t=>!0,paths_changed:t=>!0,rightclick:t=>!0,unmounted:t=>!0},setup(t,{emit:n}){const c=u("$getAPI"),h=u("$getMap"),b=u("$getThrottle"),L=u("$handleError"),f=e=>L(e,"Polygon"),v=[];let a=null;const m=e=>e.getPaths().getArray().map(d=>d.getArray().map(i=>i.toJSON())),y=e=>{const d=google.maps.event,i=b();v.push(d.addListener(e,"drag",p(l=>{var r;return n("drag",((r=l.latLng)==null?void 0:r.toJSON())||null)},i)),d.addListener(e,"mousemove",p(l=>n("mousemove",o(l)),i)),d.addListener(e,"mouseover",p(l=>n("mouseover",o(l)),i)),d.addListener(e,"click",l=>n("click",o(l))),d.addListener(e,"contextmenu",l=>n("contextmenu",o(l))),d.addListener(e,"dblclick",l=>n("dblclick",o(l))),d.addListener(e,"dragend",l=>{var r;return n("dragend",((r=l.latLng)==null?void 0:r.toJSON())||null)}),d.addListener(e,"dragstart",l=>{var r;return n("dragstart",((r=l.latLng)==null?void 0:r.toJSON())||null)}),d.addListener(e,"mousedown",l=>n("mousedown",o(l))),d.addListener(e,"mouseout",l=>n("mouseout",o(l))),d.addListener(e,"mouseup",l=>n("mouseup",o(l))),d.addListener(e,"rightclick",l=>n("rightclick",o(l))),d.addListener(e,"dragend",l=>n("paths_changed",m(e))),d.addListener(e,"mouseup",l=>l.path!==void 0?n("paths_changed",m(e)):null),e.getPath().addListener("remove_at",()=>n("paths_changed",m(e))))},k=h(),P=c(),s={map:k,...t.options};return t.draggable&&(s.draggable=t.draggable),t.editable&&(s.editable=t.editable),t.paths&&(s.paths=t.paths),t.visible&&(s.visible=t.visible),a=new P.Polygon(s),a?(y(a),n("mounted",a)):f(new Error("There was a problem creating the shape.")),g(()=>t.draggable,e=>e===void 0||e==(a==null?void 0:a.getDraggable())?null:a==null?void 0:a.setDraggable(e)),g(()=>t.editable,e=>e===void 0||e==(a==null?void 0:a.getEditable())?null:a==null?void 0:a.setEditable(e)),g(()=>t.paths,e=>e===void 0||w(e,a==null?void 0:a.getPaths())?null:a==null?void 0:a.setPaths(e),{deep:!0}),g(()=>t.visible,e=>e===void 0||e==(a==null?void 0:a.getVisible())?null:a==null?void 0:a.setVisible(e)),E(()=>{a&&n("unmounted",a),v.forEach(e=>e.remove()),a&&a.setMap(null),a&&c().event.clearInstanceListeners(a)}),()=>{}}});export{J as default};
