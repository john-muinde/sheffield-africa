import{p as z,S as y,ac as M,K as p,s as J,y as i,O as C,o as u,c as f,b as I,f as _,bJ as k,k as $,l as E,t as B,e as S,m as j,v as x,a as A}from"./app-setting.23ccb41c.js";import{s as L}from"./_plugin-vue_export-helper-dad06003.469021ef.js";import{A as V}from"./v3-gmaps.b30f96cb.js";import{a as Z,y as c,c as D}from"./tools-b40e92cf.4881bf31.js";import"./_commonjsHelpers.f037b798.js";const H={},P={class:"gmaps-error"};function G(t,r){return u(),f("span",P,[I(t.$slots,"default")])}const K=L(H,[["render",G]]),R={},U={class:"gmaps-spinner"};function q(t,r){return u(),f("span",U)}const F=L(R,[["render",q]]),Q={center:{lat:0,lng:0},zoom:2},W=z({name:"GmapsMap",components:{MapSpinner:F,MapError:K},props:{center:{type:Object},clickableIcons:{type:Boolean},heading:{type:[String,Number]},mapTypeId:{type:[String,Object]},options:{type:Object,default:void 0},tilt:{type:[String,Number]},zoom:{type:[String,Number]},throttle:{type:[Number,String],default:100}},emits:{bounds_changed:t=>!0,center_changed:t=>!0,click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:()=>!0,dragend:()=>!0,dragstart:()=>!0,error:t=>!0,heading_changed:t=>!0,idle:()=>!0,isfractionalzoomenabled_changed:t=>!0,maptypeid_changed:t=>!0,mounted:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,projection_changed:()=>!0,renderingtype_changed:()=>!0,rightclick:t=>!0,tilesloaded:()=>!0,tilt_changed:t=>!0,unmounted:t=>!0,zoom_changed:t=>!0},setup(t,{emit:r}){let n=null,g=null;const v=[],h=y(),s=y(null),m=y(!1),{throttle:N}=M(t),b=Z((e,o)=>{s.value=`[${o}]: ${e.message}`,r("error",s.value)},500),O=()=>{if(!g)throw new Error("vue3-gmaps :: getAPI() called before API loaded.");return g},w=()=>{if(!n)throw new Error("vue3-gmaps :: getMap() called before map loaded.");return n};p("$getAPI",O),p("$getMap",w),p("$getThrottle",()=>+t.throttle),p("$handleError",b);const T=e=>{const o=+N.value,l=google.maps.event;v.push(l.addListener(e,"bounds_changed",c(()=>{var d;return r("bounds_changed",((d=e.getBounds())==null?void 0:d.toJSON())||null)},o)),l.addListener(e,"center_changed",c(()=>{var d;return r("center_changed",((d=e.getCenter())==null?void 0:d.toJSON())||null)},o)),l.addListener(e,"drag",c(()=>r("drag"),o)),l.addListener(e,"mousemove",c(d=>{var a;return r("mousemove",((a=d.latLng)==null?void 0:a.toJSON())||null)},o)),l.addListener(e,"idle",c(()=>r("idle"),o)),l.addListener(e,"click",d=>{var a;return r("click",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"contextmenu",d=>{var a;return r("contextmenu",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"dblclick",d=>{var a;return r("dblclick",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"dragend",()=>r("dragend")),l.addListener(e,"dragstart",()=>r("dragstart")),l.addListener(e,"heading_changed",()=>r("heading_changed",e.getHeading()||null)),l.addListener(e,"isfractionalzoomenabled_changed",()=>r("isfractionalzoomenabled_changed",e.getZoom()||null)),l.addListener(e,"maptypeid_changed",()=>r("maptypeid_changed",e.getMapTypeId()||null)),l.addListener(e,"mouseout",d=>{var a;return r("mouseout",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"mouseover",d=>{var a;return r("mouseover",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"projection_changed",()=>r("projection_changed")),l.addListener(e,"renderingtype_changed",()=>r("renderingtype_changed")),l.addListener(e,"rightclick",d=>{var a;return r("rightclick",((a=d.latLng)==null?void 0:a.toJSON())||null)}),l.addListener(e,"tilesloaded",()=>r("tilesloaded")),l.addListener(e,"tilt_changed",()=>r("tilt_changed",e.getTilt()||null)),l.addListener(e,"zoom_changed",()=>r("zoom_changed",e.getZoom()||null)))};return J(()=>{V().then(e=>{g=e;const o={...Q,...t.options};t.center&&(o.center=t.center),t.clickableIcons&&(o.clickableIcons=t.clickableIcons),t.heading&&(o.heading=t.heading),t.mapTypeId&&(o.mapTypeId=t.mapTypeId),t.tilt&&(o.tilt=t.tilt),t.zoom&&(o.zoom=t.zoom),n=new e.Map(h.value,o),n&&T(n),r("mounted",n),m.value=!0}).catch(e=>b(e,"Map"))}),i(()=>t.center,e=>{var o;return e===void 0||D(e,(o=n==null?void 0:n.getCenter())==null?void 0:o.toJSON())?null:n==null?void 0:n.setCenter(e)},{deep:!0}),i(()=>t.clickableIcons,e=>e===void 0||e==(n==null?void 0:n.getClickableIcons())?null:n==null?void 0:n.setClickableIcons(e)),i(()=>t.heading,e=>e===void 0||+e==(n==null?void 0:n.getHeading())?null:n==null?void 0:n.setHeading(+e)),i(()=>t.mapTypeId,e=>e===void 0||e==(n==null?void 0:n.getMapTypeId())?null:n==null?void 0:n.setMapTypeId(e)),i(()=>t.options,e=>e?n==null?void 0:n.setOptions(e):null),i(()=>t.tilt,e=>e===void 0||+e==(n==null?void 0:n.getTilt())?null:n==null?void 0:n.setTilt(+e)),i(()=>t.zoom,e=>e===void 0||+e==(n==null?void 0:n.getZoom())?null:n==null?void 0:n.setZoom(+e)),C(()=>{n&&r("unmounted",n),v.forEach(e=>e.remove()),n&&window.google.maps.event.clearInstanceListeners(n)}),{error:s,ready:m,mapEl:h}}}),X={style:{width:"100%",height:"100%"}},Y={ref:"mapEl",style:{width:"100%",height:"100%"}};function ee(t,r,n,g,v,h){const s=_("map-error"),m=_("map-spinner");return u(),f("div",X,[t.error?(u(),k(s,{key:0},{default:$(()=>[E(B(t.error),1)]),_:1})):t.ready?S("",!0):(u(),k(m,{key:1})),j(A("div",Y,null,512),[[x,t.ready&&!t.error]]),t.ready&&!t.error?I(t.$slots,"default",{key:2}):S("",!0)])}const de=L(W,[["render",ee]]);export{de as default};
