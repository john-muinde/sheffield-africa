import{bn as F,c8 as R,z as n,h as C,o as A,w as N,W as H,bx as W,C as X,bo as r,bp as c,bq as a,j as u,bC as d,X as p,S as I,by as M,bt as P,bv as v,B as G,bT as J,bw as K}from"./app-setting.59ebc727.js";import"./_commonjsHelpers.f037b798.js";const O={class:"main"},Q={class:"page-content"},U={class:"container"},Y={class:"row"},Z={class:"col-lg-10 offset-lg-1"},ee={key:0,class:"text-center w-100 my-4 text-green-600 font-semibold"},ae={key:1,class:"row blogs-main-page-section"},te={class:"entry entry-grid"},se={class:"entry-media entry-gallery"},oe=["src"],le={class:"entry-body"},ne={class:"entry-title"},re={class:"entry-content"},ie={class:"mb-2"},ce={class:"row"},de={class:"col-md-12"},ge={"aria-label":"Page navigation"},ue={class:"pagination justify-content-center"},pe={class:"page-item-total"},me={__name:"Blogs",setup(ve){const g=R(),l=n(g.params.page?parseInt(g.params.page):1),k=n(9),w=n(0),_=n([]),b=n(g.params.id?parseInt(g.params.id):1),V=n([]),f=n(!1),h=async()=>{f.value=!0;try{const e=await axios.get("/api/get-blogs",{params:{page:l.value,per_page:k.value,category_id:b.value}});_.value=e.data.data,w.value=e.data.total}catch(e){console.error(e)}finally{f.value=!1}},L=async()=>{try{const e=await axios.get("/api/get-blog-sidebar",{});V.value=e.data.other_blogs}catch(e){console.error(e)}},y=(e,o)=>{let s=o.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/blogs/${e}/${s}`},x=e=>`/media/blogs/page/${e}`,m=C(()=>Math.ceil(w.value/k.value)),B=n([]),T=()=>{l.value>1&&l.value--},D=()=>{l.value<m.value&&l.value++},$=e=>{l.value=e},z=()=>{B.value=_.value},E=e=>Number.isInteger(e),S=C(()=>{const e=[];l.value>1&&e.push("Prev");let s=Math.max(1,l.value-Math.floor(5/2)),i=Math.min(s+5-1,m.value);i-s<5-1&&(s=Math.max(1,i-5+1));for(let t=s;t<=i;t++)e.push(t);return l.value<m.value&&e.push("Next"),e}),q=e=>{const o=document.createElement("div");o.innerHTML=e;const s=o.querySelectorAll("p");for(const i of s){const t=i.textContent.trim();if(t.length>50)return t.length>140?t.slice(0,144)+"...":t}return""},j=e=>e.length>5?e.length>35?e.slice(0,35)+"...":e:"";return A(()=>{h(),L()}),N(l,h),N(_,z),H(()=>{const e=g.params;g.query,e.id!==""&&b!==e.id&&(l.value=1,b.value=e.id?parseInt(e.id):1,e.page!==""&&l!==e.page&&(l.value=e.page?parseInt(e.page):1),h())}),(e,o)=>{const s=W("router-link"),i=X("lazy");return r(),c("div",null,[a("main",O,[a("div",Q,[a("div",U,[a("div",Y,[a("div",Z,[o[5]||(o[5]=a("h2",{class:"about-us-title"},"Blogs",-1)),u(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:d(()=>o[0]||(o[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),o[6]||(o[6]=a("p",{class:"lead about-us-lead text-primary mb-3"}," In-Depth Insights ",-1)),f.value?(r(),c("div",ee,o[1]||(o[1]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1),p(" Loading blog posts... ")]))):(r(),c("div",ae,[(r(!0),c(I,null,M(B.value,t=>(r(),c("div",{class:"entry-item col-sm-6 col-lg-4",key:t.id},[a("article",te,[a("figure",se,[u(s,{to:y(t.id,t.name)},{default:d(()=>[G(a("img",{src:"/storage/"+t.main_image_path,alt:"image desc"},null,8,oe),[[i,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"])]),a("div",le,[a("h2",ne,[u(s,{class:"text-primary",to:y(t.id,t.name)},{default:d(()=>[p(v(j(t.name)),1)]),_:2},1032,["to"])]),a("div",re,[a("div",ie,v(q(t.excerpt)),1),u(s,{class:"btn btn-primary",to:y(t.id,t.name)},{default:d(()=>o[2]||(o[2]=[p(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)])),_:2},1032,["to"])])])])]))),128))])),a("div",ce,[a("div",de,[a("nav",ge,[a("ul",ue,[a("li",{class:P(["page-item",{disabled:l.value===1}])},[u(s,{class:"page-link page-link-prev",to:x(l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:T},{default:d(()=>o[3]||(o[3]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),p(" Prev ")])),_:1},8,["to"])],2),(r(!0),c(I,null,M(S.value,t=>(r(),c("li",{class:P(["page-item",{active:t===l.value}]),key:t},[E(t)?(r(),J(s,{key:0,class:"page-link",to:x(t),onClick:_e=>$(t)},{default:d(()=>[p(v(t),1)]),_:2},1032,["to","onClick"])):K("",!0)],2))),128)),a("li",pe," of "+v(m.value),1),a("li",{class:P(["page-item",{disabled:l.value===m.value}])},[u(s,{class:"page-link page-link-next",to:x(l.value+1),"aria-label":"Next",onClick:D},{default:d(()=>o[4]||(o[4]=[p(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])])])])}}},he=F(me,[["__scopeId","data-v-755ab6bb"]]);export{he as default};
