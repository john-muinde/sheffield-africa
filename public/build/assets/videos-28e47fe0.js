import{v as r,b as _,c as n}from"./index-363faad7.js";import{M as v}from"./index-743b42bd.js";function O(){const u=r.ref([]),d=r.ref([]),p=r.ref({name:"",type:"",content:"",is_published:"",shown_in_about_us:"",video_url:null,main_image_path:null,file_path:null}),i=_(),a=r.ref({}),o=r.ref(!1),f=async(e=1,s="",l="",t="",h="",y="created_at",m="desc")=>{try{const c=await n("get",`/api/videos?page=${e}&search_id=${s}&search_title=${l}&search_parent_id=${t}&search_global=${h}&order_column=${y}&order_direction=${m}`);u.value=c}catch(c){a.value=c}};return{videoList:d,videos:u,video:p,getVideos:f,getVideoList:async()=>{try{const e=await n("get","/api/video-list");d.value=e}catch(e){a.value=e}},getVideo:async e=>{try{const s=await n("get",`/api/videos/${e}`);p.value=s}catch(s){a.value=s}},storeVideo:async e=>{if(o.value)return;o.value=!0,a.value={};let s=new FormData;for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]!="null"&&e[t]!=null&&s.append(t,e[t]);const l={headers:{"content-type":"multipart/form-data"}};try{await n("post","/api/videos",s,l),i.push({name:"videos.index"}),e.name=null,e.content=null,e.type=null,e.is_published=null,e.shown_in_about_us=null,showToast("Video saved successfully","success")}catch(t){a.value=t}finally{o.value=!1}},updateVideo:async e=>{if(o.value)return;o.value=!0,a.value={};let s=new FormData;for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]!="null"&&e[t]!=null&&s.append(t,e[t]);const l={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put");try{await n("post",`/api/videos/${e.id}`,s,l),i.push({name:"videos.index"}),showToast("Video updated successfully","success")}catch(t){a.value=t}finally{o.value=!1}},deleteVideo:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){n("delete",`/api/videos/${e}`).then(()=>{f(),i.push({name:"videos.index"}),showToast("Video deleted successfully","success")})},onCancel(){}})},validationErrors:a,isLoading:o}}export{O as u};
