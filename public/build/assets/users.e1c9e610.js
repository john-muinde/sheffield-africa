import{x as i,a7 as m,a8 as U,ah as o}from"./app-setting.46400ad2.js";function B(){const l=i([]),d=i({name:""}),c=m(),a=i({}),r=i(!1),n=U("$swal"),p=async(s=1,t="",e="",u="",f="created_at",h="desc")=>{o.get("/api/users?page="+s+"&search_id="+t+"&search_title="+e+"&search_global="+u+"&order_column="+f+"&order_direction="+h).then(v=>{l.value=v.data})};return{users:l,user:d,getUsers:p,getUser:async s=>{o.get("/api/users/"+s).then(t=>{d.value=t.data.data})},storeUser:async s=>{if(r.value)return;r.value=!0,a.value={};let t=new FormData;for(let e in s)s.hasOwnProperty(e)&&t.append(e,s[e]);o.post("/api/users",t).then(e=>{c.push({name:"users.index"}),n({icon:"success",title:"User saved successfully"})}).catch(e=>{var u;(u=e.response)!=null&&u.data&&(a.value=e.response.data.errors)}).finally(()=>r.value=!1)},updateUser:async s=>{r.value||(r.value=!0,a.value={},o.put("/api/users/"+s.id,s).then(t=>{c.push({name:"users.index"}),n({icon:"success",title:"User updated successfully"})}).catch(t=>{var e;(e=t.response)!=null&&e.data&&(a.value=t.response.data.errors)}).finally(()=>r.value=!1))},deleteUser:async s=>{n({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(t=>{t.isConfirmed&&o.delete("/api/users/"+s).then(e=>{p(),c.push({name:"users.index"}),n({icon:"success",title:"User deleted successfully"})}).catch(e=>{n({icon:"error",title:"Something went wrong"})})})},validationErrors:a,isLoading:r}}export{B as u};
