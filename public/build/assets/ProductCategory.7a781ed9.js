import{a3 as q,x as i,Q as M,y as Q,z as T,a4 as R,f as Y,a5 as Z,o as c,c as n,a as e,m as _,t as r,F as h,g as b,n as $,i as m,l as g,e as B,Y as G,ag as H,p as J,a2 as K}from"./app-setting.27140836.js";import"./_commonjsHelpers.f037b798.js";const O={class:"main"},U={class:"page-content mt-4"},W={class:"container"},X={class:"row"},ee={class:"col-lg-9"},te={class:"toolbox"},ae={class:"toolbox-left"},se={class:"toolbox-info"},oe=G('<div class="toolbox-right"><div class="toolbox-sort"><label for="sortby">Sort by:</label><div class="select-custom"><select name="sortby" id="sortby" class="form-control"><option value="name"> Name A - Z </option><option value="date">Date</option></select></div></div></div>',1),le={class:"products mb-3"},ie={class:"row"},ce={class:"product product-7 text-center"},ne={class:"product-media"},re=["src"],de=e("div",{class:"product-action-vertical"},null,-1),ue={class:"product-action"},_e=["onClick"],ge=e("span",null,"Add to Cart",-1),ve=[ge],pe={class:"product-body"},me={class:"product-cat"},he={class:"product-title"},be=e("div",{class:"ratings-container"},null,-1),fe={"aria-label":"Page navigation"},xe={class:"pagination justify-content-center"},ye=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),we={class:"page-item-total"},ke=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),Pe={class:"col-lg-3 order-lg-first"},Ce={class:"sidebar sidebar-shop"},Ne=e("div",{class:"widget widget-clean"},[e("label",null,"Filters:"),e("a",{href:"#",class:"sidebar-filter-clear"},"Clean All")],-1),$e={key:0,class:"widget widget-collapsible"},Ve=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1),Ie={class:"show",id:"widget-1"},Le={class:"widget-body"},Me={class:"filter-items filter-items-count"},Te={class:"custom-control custom-checkbox"},Be=["id"],De=["for"],ze={class:"item-count"},Se={class:"widget widget-collapsible"},Ae=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1),Fe={class:"show",id:"widget-4"},Ee={class:"widget-body"},je={class:"filter-items"},qe={class:"custom-control custom-checkbox"},Qe=["id"],Re=["for"],He={__name:"ProductCategory",setup(Ye){const u=q();i(u);const o=i(u.params.page?parseInt(u.params.page):1),f=i(12),x=i(0),y=i([]),V=i(0),w=i(u.params.id?parseInt(u.params.id):1),k=i([]),I=i([]),d=i([]),P=async()=>{try{const a=await axios.get("/api/get-products",{params:{page:o.value,per_page:f.value,category_id:w.value}});y.value=a.data.products.data,x.value=a.data.products.total,V.value=a.data.products.data.length,k.value=a.data.categories,I.value=a.data.brands,d.value=a.data.the_category,H({title:d.value.name+" | Category"})}catch(a){console.error(a)}},v=M(()=>Math.ceil(x.value/f.value)),L=i([]),D=()=>{o.value>1&&o.value--},z=()=>{o.value<v.value&&o.value++},S=a=>{o.value=a},C=(a,p,l)=>{let s=p.replace(/ /g,"-").replace(/\//g,"-");s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase();let t=l.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),`/product/${a}/${s}-${t}`},N=(a,p,l)=>{let s=p.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/category/${a}/${s}/page/${l}`},A=()=>{L.value=y.value.slice(0,0+f.value)},F=a=>Number.isInteger(a),E=M(()=>{const a=[];o.value>1&&a.push("Prev");let l=Math.max(1,o.value-Math.floor(5/2)),s=Math.min(l+5-1,v.value);s-l<5-1&&(l=Math.max(1,s-5+1));for(let t=l;t<=s;t++)a.push(t);return o.value<v.value&&a.push("Next"),a});return Q(()=>{P()}),T(o,P),T(y,A),R(()=>{const a=u.params;u.query,a.id!==""&&w!==a.id&&(o.value=1,w.value=a.id?parseInt(a.id):1,a.page!==""&&o!==a.page&&(o.value=a.page?parseInt(a.page):1),P())}),(a,p)=>{const l=Y("router-link"),s=Z("lazy");return c(),n("main",O,[e("div",U,[e("div",W,[e("div",X,[e("div",ee,[e("div",te,[e("div",ae,[e("div",se,[_(" Showing "),e("span",null,r(V.value)+" of "+r(x.value),1),_(" Products ")])]),oe]),e("div",le,[e("div",ie,[(c(!0),n(h,null,b(L.value,t=>(c(),n("div",{class:"col-6 col-md-3 col-lg-3 col-xl-3",key:t.id},[e("div",ce,[e("figure",ne,[m(l,{to:C(t.id,t.name,t.model_number)},{default:g(()=>[J(e("img",{src:"/storage/"+t.main_image_path,alt:"Product image",class:"product-image"},null,8,re),[[s,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"]),de,e("div",ue,[e("button",{type:"button",onClick:j=>a.addToCart(t),class:"btn-product btn-cart"},ve,8,_e)])]),e("div",pe,[e("div",me,[m(l,{to:C(t.id,t.name,t.model_number)},{default:g(()=>[_(r(t.product_brand.name),1)]),_:2},1032,["to"])]),e("h3",he,[m(l,{to:C(t.id,t.name,t.model_number)},{default:g(()=>[_(r(t.name),1)]),_:2},1032,["to"])]),be])])]))),128))])]),e("nav",fe,[e("ul",xe,[e("li",{class:$(["page-item",{disabled:o.value===1}])},[m(l,{class:"page-link page-link-prev",to:N(d.value.id,d.value.name,o.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:D},{default:g(()=>[ye,_(" Prev ")]),_:1},8,["to"])],2),(c(!0),n(h,null,b(E.value,t=>(c(),n("li",{class:$(["page-item",{active:t===o.value}]),key:t},[F(t)?(c(),K(l,{key:0,class:"page-link",to:N(d.value.id,d.value.name,t),onClick:j=>S(t)},{default:g(()=>[_(r(t),1)]),_:2},1032,["to","onClick"])):B("",!0)],2))),128)),e("li",we," of "+r(v.value),1),e("li",{class:$(["page-item",{disabled:o.value===v.value}])},[m(l,{class:"page-link page-link-next",to:N(d.value.id,d.value.name,o.value+1),"aria-label":"Next",onClick:z},{default:g(()=>[_(" Next "),ke]),_:1},8,["to"])],2)])])]),e("aside",Pe,[e("div",Ce,[Ne,k.value.length?(c(),n("div",$e,[Ve,e("div",Ie,[e("div",Le,[e("div",Me,[(c(!0),n(h,null,b(k.value,t=>(c(),n("div",{class:"filter-item",key:t.id},[e("div",Te,[e("input",{type:"checkbox",class:"custom-control-input",id:"cat-"+t.id},null,8,Be),e("label",{class:"custom-control-label",for:"cat-"+t.id},r(t.name),9,De)]),e("span",ze,r(t.category_products_count),1)]))),128))])])])])):B("",!0),e("div",Se,[Ae,e("div",Fe,[e("div",Ee,[e("div",je,[(c(!0),n(h,null,b(I.value,t=>(c(),n("div",{key:t.id,class:"filter-item"},[e("div",qe,[e("input",{type:"checkbox",class:"custom-control-input",id:"brand-"+t.product_brand},null,8,Qe),e("label",{class:"custom-control-label",for:"brand-"+t.product_brand},r(t.product_brand.name),9,Re)])]))),128))])])])])])])])])])])}}};export{He as default};
