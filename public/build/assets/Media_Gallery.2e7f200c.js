import{r as n,c as E,w as M,bG as u,bH as v,bI as t,ag as A,bM as w,ac as S,bP as I,bK as L,W as R,ca as G,bN as g,c2 as O,c8 as U,o as q,af as J,bO as W,X as H,e as P,bT as D,bW as F,c6 as K,a4 as X}from"./index.d485d88a.js";import"./use-meta.52e673cf.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as B}from"./ContentState.f0c596f4.js";import"./_commonjsHelpers.f037b798.js";import"./transition.ceadba66.js";const Q={key:0,class:"filter-container"},Y={class:"filter-heading"},Z=["value"],ee={class:"filter-content"},te={class:"checkbox-wrapper"},ae={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"checkmark"},se={class:"filter-label"},le={key:0,class:"filter-count"},re={__name:"DynamicFilters",props:{items:{type:Array,required:!0},filterColumn:{type:String,required:!0},filters:{type:Array,required:!1,default:[]},selectedFilters:{type:Array,required:!1,default:[]},showNumbers:{type:Boolean,default:!1},searchTerm:{type:String,default:""},classes:{type:String,default:""}},emits:["update:displayedProducts"],setup(T,{emit:y}){const k=y,e=T,d=n(e.selectedFilters),C=n(e.showNumbers),_=n(e.items),m=n(e.searchTerm),p=n([]),h=n([]);e.filters.length>0&&(typeof e.filters[0]=="object"?(p.value=e.filters.map(a=>Object.keys(a)[0]),h.value=e.filters.map(a=>Object.values(a)[0])):(p.value=e.filters,h.value=e.filters)),E(()=>{var a,l;if(p.value.length)return p.value;if(!((a=e.items)!=null&&a.length)&&!(p!=null&&p.length)&&!e.filterColumn)return[];if(!((l=e.items)!=null&&l.length)||!e.filterColumn)return[];p.value=[...new Set(e.items.map(c=>c[e.filterColumn]).filter(Boolean))].sort(),h.value=p.value});const $=a=>e.items.filter(l=>l[e.filterColumn]===a).length,b=a=>a.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),x=()=>{d.value.length===0?_.value=e.items:_.value=e.items.filter(a=>d.value.includes(a[e.filterColumn])),m.value&&(_.value=_.value.filter(a=>{var l,c,f;return((l=a.name)==null?void 0:l.toLowerCase().includes(m.value.toLowerCase()))||((c=a.description)==null?void 0:c.toLowerCase().includes(m.value.toLowerCase()))||((f=a.tags)==null?void 0:f.toLowerCase().includes(m.value.toLowerCase()))||a[e.filterColumn].toLowerCase().includes(m.value.toLowerCase())})),k("update:displayedProducts",{filteredData:_.value,selectedFilters:d.value})};return M(()=>e.searchTerm,a=>{m.value=a,x()}),M(()=>e.items,a=>{if(_.value=a,d.value.length>0){const l=a.filter(c=>d.value.includes(c[e.filterColumn]));k("update:displayedProducts",{filteredData:l,selectedFilters:d.value})}else k("update:displayedProducts",{filteredData:a,selectedFilters:[]})},{deep:!0}),(a,l)=>p.value.length?(u(),v("div",Q,[t("h4",Y,[l[1]||(l[1]=t("span",{class:"filter-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})])],-1)),A(" "+w(b(T.filterColumn)),1)]),t("div",{class:L(["filter-options-container",e.classes])},[(u(!0),v(S,null,I(p.value,(c,f)=>(u(),v("label",{key:c,class:L(["filter-card",{"filter-card-selected":d.value.includes(c)}])},[R(t("input",{type:"checkbox",value:c,"onUpdate:modelValue":l[0]||(l[0]=N=>d.value=N),onChange:x,class:"filter-checkbox"},null,40,Z),[[G,d.value]]),t("div",ee,[t("div",te,[t("div",{class:L(["custom-checkbox",{checked:d.value.includes(c)}])},[d.value.includes(c)?(u(),v("svg",ae,l[2]||(l[2]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):g("",!0)],2),t("span",se,w(h.value[f]),1)]),C.value?(u(),v("span",le,w($(c)),1)):g("",!0)])],2))),128))],2)])):g("",!0)}},oe=j(re,[["__scopeId","data-v-884b9cdb"]]);const ne={class:"main"},ie={class:"page-content"},ce={class:"container"},ue={class:"row"},de={class:"col-lg-10 offset-lg-1 gallery-main-page-section"},pe={key:3,class:"row mt-2"},ve={class:"entry entry-mask"},me={class:"entry-media entry-gallery"},_e=["src"],fe={class:"entry-body"},ge={class:"entry-title"},ye={class:"entry-cats mt-1"},he={style:{"background-color":"#c02434",padding:"5px"}},be={class:"col-lg-12 mt-3"},Ce={"aria-label":"Page navigation"},we={class:"pagination justify-content-center"},ke=["onClick"],xe={__name:"Media_Gallery",setup(T){const y=O(),k=U(),e=n(y.params.page?parseInt(y.params.page):1);n(12);const d=n(0),C=n([]),_=n(y.params.id?parseInt(y.params.id):1),m=n([]),p=n([]),h=n({}),$=n(["CSR","EVENT","PROJECT"]),b=n(!1),x=n(null),a=async(o=null)=>{b.value=!0,typeof o=="string"&&o.includes("http")&&(o=o.split("/api/").pop());try{const s=(await K.get(o||"/api/get-media-center-galleries",{params:{page:e.value,category_id:_.value,gallery_type:p.value}})).data;C.value=s.data,d.value=s.total,h.value={next_page_url:s.next_page_url,prev_page_url:s.prev_page_url,links:s.links},b.value=!1,f(C.value)}catch(r){r.value=r,console.error(r)}finally{b.value=!1}},l=(o,r)=>{let s=r.replace(/ /g,"-").replace(/\//g,"-");return s=s.replace(/-+/g,"-"),s=s.replace(/^-+|-+$/g,""),s=s.toLowerCase(),`/media/gallery/${o}/${s}`},c=o=>{if(o){const s=new URLSearchParams(o.split("?")[1]).get("page");s&&(e.value=parseInt(s),k.push(`/media/gallery/page/${e.value}`))}},f=o=>{m.value=o},N=({filteredData:o,selectedFilters:r})=>{f(o),r.value=r};return q(()=>{a()}),M(C,f),J(()=>{const o=y.params,r=o.id?parseInt(o.id):1,s=o.page?parseInt(o.page):1;(_.value!==r||e.value!==s)&&(_.value=r,e.value=s,a())}),(o,r)=>{var V;const s=W("router-link"),z=H("lazy");return u(),v("div",null,[t("main",ne,[t("div",ie,[t("div",ce,[t("div",ue,[t("div",de,[r[2]||(r[2]=t("h2",{class:"about-us-title"},"Gallery",-1)),P(s,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:D(()=>r[0]||(r[0]=[t("i",{class:"icon-long-arrow-left"},null,-1),t("span",null,"Back to Media Center",-1)])),_:1}),r[3]||(r[3]=t("p",{class:"lead about-us-lead text-primary mb-3"},"Journey Through the Lens: Our Story in Pictures",-1)),P(oe,{items:C.value,"filter-column":"gallery_type","onUpdate:displayedProducts":N,filters:$.value},null,8,["items","filters"]),b.value?(u(),F(B,{key:0,type:"loading",contentType:"gallery"})):g("",!0),!m.value.length&&!b.value?(u(),F(B,{key:1,type:"empty",contentType:"gallery"})):g("",!0),x.value?(u(),F(B,{key:2,type:"error",contentType:"gallery"})):g("",!0),m.value.length?(u(),v("div",pe,[(u(!0),v(S,null,I(m.value,i=>(u(),v("div",{class:"entry-item col-sm-6 col-lg-4",key:i.id},[t("article",ve,[t("figure",me,[P(s,{to:l(i.id,i.name)},{default:D(()=>[R(t("img",{src:"/storage/"+i.main_image_path,alt:"image desc"},null,8,_e),[[z,"/storage/"+i.main_image_path,"src"]])]),_:2},1032,["to"])]),t("div",fe,[r[1]||(r[1]=t("div",{class:"entry-meta"},[t("span",{class:"meta-separator"},"|")],-1)),t("h2",ge,[P(s,{to:l(i.id,i.name)},{default:D(()=>[A(w(i.name),1)]),_:2},1032,["to"])]),t("div",ye,[t("b",he,w(i.gallery_type),1)])])])]))),128)),t("div",be,[t("nav",Ce,[t("ul",we,[(u(!0),v(S,null,I((V=h.value)==null?void 0:V.links,(i,Pe)=>(u(),v("li",{class:L(["page-item",{active:i.active}]),key:i.label},[i.url&&Number.isInteger(Number(i.label))?(u(),v("a",{key:0,class:"page-link",onClick:X(Le=>c(i.url),["prevent"])},w(i.label),9,ke)):g("",!0)],2))),128))])])])])):g("",!0)])])])])])])}}},Me=j(xe,[["__scopeId","data-v-3b1badd0"]]);export{Me as default};
