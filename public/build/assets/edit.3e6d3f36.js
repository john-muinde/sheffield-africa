import{aa as I,ab as D,ac as v,P as G,x as T,a3 as X,y as A,a4 as w,o,c as i,a2 as R,a as e,W,p as h,X as Z,t as r,u as a,F as d,g as u,i as x,al as z,v as $,m as k,aq as H,d as J,ad as K,ae as O}from"./app-setting.27140836.js";import{u as Q}from"./blogs.7f0a0b74.js";import{u as Y}from"./blogCategories.177d3476.js";/* empty css                                     */import{F as b}from"./file-upload-with-preview.esm.fbf56fa2.js";import{M as ee}from"./vue3-multiselect.umd.min.7157806b.js";/* empty css                         */import{q as se}from"./vue3-quill.56b93786.js";import"./_commonjsHelpers.f037b798.js";const te={class:"container"},ae=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Blogs")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Edit Blog")])])])])])],-1),le={class:"container"},oe={class:"row"},ie={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},ne={class:"statbox panel box box-shadow"},ce=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"Edit Blog")])])])],-1),re={class:"panel-body"},de=["onSubmit"],ue={class:"row"},me={class:"form-group col-md-12"},_e=e("label",{for:"post-name"},"Blog Name",-1),ge={class:"text-danger mt-1"},pe={class:"text-danger mt-1"},ve={class:"form-group"},he=e("label",{for:"post-category",class:"form-label"},"Select Blog Category",-1),be={class:"text-danger mt-1"},fe={class:"text-danger mt-1"},ye={class:"form-group"},Be=e("label",{for:"post-content"},"Blog Content",-1),Ie={class:"custom-file-container","data-upload-id":"myFirstImage"},we=e("label",null,[k("Upload Main Blog Image "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),xe={class:"custom-file-container__custom-file",for:"main_image"},ke=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),Ce=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),Ee=e("div",{class:"custom-file-container__image-preview"},null,-1),Fe={class:"custom-file-container","data-upload-id":"myBlogGallery"},Se=e("label",null,[k("Blog Gallery (multiple images allowed) "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),Ve={class:"custom-file-container__custom-file",for:"blog_gallery"},Me={type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",ref:"blog_gallery",multiple:"",id:"blog_gallery"},Pe=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),qe=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),Le={class:"custom-file-container__image-preview"},Ue=["onClick"],Ne=e("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"\xD7",-1),je=[Ne],De={class:"form-group col-md-4"},Ge=e("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1),Te=e("option",{value:""}," Select Publishing Status ... ",-1),Xe=e("option",{selected:"",value:"1"}," Published ",-1),Ae=e("option",{value:"0"}," Not Published ",-1),Re=[Te,Xe,Ae],We={class:"text-danger mt-1"},Ze={class:"text-danger mt-1"},ze=["disabled"],$e={class:""},He={key:0},Je={key:1},ds={__name:"edit",setup(Ke){I("required",K),I("min",O);const C={name:"required|min:3",content:"required",is_published:"required"},{validate:E,errors:m,resetForm:Oe}=D({validationSchema:C}),{blog:n,getBlog:F,updateBlog:f,validationErrors:_,isLoading:g,getBlogList:Qe,blogList:Ye,deleteBlogImage:S}=Q(),{getBlogCategoryList:V,blogCategoryList:M}=Y(),{value:P}=v("name",null,{initialValue:""}),{value:q}=v("content",null,{initialValue:""}),{value:L}=v("is_published",null,{initialValue:""}),t=G({name:P,content:q,categories:"",is_published:L,main_image:"",blog_gallery:""}),U=T({modules:{}}),N=X();function j(){E().then(p=>{if(p.valid){const c=document.getElementById("blog_gallery").files;c.length>0?f(t,c):f(t,[])}})}return A(()=>{V(),F(N.params.id),w(()=>{if(n.value&&n.value.main_image_path){const c={images:{baseImage:"/storage/"+n.value.main_image_path,backgroundImage:""}};new b("myFirstImage",c)}else new b("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new b("myBlogGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),w(()=>{t.id=n.value.id,t.name=n.value.name,t.content=n.value.content,t.categories=n.value.categories_json,t.is_published=n.value.is_published,t.blog_images=n.value.blog_images,console.log(n.value)}),(p,l)=>{var c,y,B;return o(),i("div",te,[(o(),R(H,{to:"#breadcrumb"},[ae])),e("div",le,[e("div",oe,[e("div",ie,[e("div",ne,[ce,e("div",re,[e("form",{onSubmit:W(j,["prevent"])},[e("div",ue,[e("div",me,[_e,h(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.name=s),id:"post-name",type:"text",class:"form-control",placeholder:"Enter Blog Name ..."},null,512),[[Z,t.name]]),e("div",ge,r(a(m).name),1),e("div",pe,[(o(!0),i(d,null,u((c=a(_))==null?void 0:c.name,s=>(o(),i("div",null,r(s),1))),256))])]),e("div",ve,[he,x(a(ee),{modelValue:t.categories,"onUpdate:modelValue":l[1]||(l[1]=s=>t.categories=s),options:a(M),reduce:s=>s.id,multiple:!0,taggable:!0,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Blog Category ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"]),e("div",be,r(a(m).categories),1),e("div",fe,[(o(!0),i(d,null,u((y=a(_))==null?void 0:y.categories,s=>(o(),i("div",null,r(s),1))),256))])]),e("div",ye,[Be,x(a(se),{value:t.content,"onUpdate:value":l[2]||(l[2]=s=>t.content=s),options:U.value,placeholder:"Enter Blog Content ..."},null,8,["value","options"])]),e("div",Ie,[we,e("label",xe,[e("input",{type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:l[3]||(l[3]=s=>t.main_image=s.target.files[0]),id:"main_image"},null,32),ke,Ce]),Ee]),e("div",Fe,[Se,e("label",Ve,[e("input",Me,null,512),Pe,qe]),e("div",Le,[(o(!0),i(d,null,u(t.blog_images,s=>(o(),i("div",{key:s.id,class:"custom-file-container__image-multi-preview",style:J("background-image: url(/storage/"+s.name+")")},[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:es=>a(S)(s.id)},je,8,Ue)],4))),128))])]),e("div",De,[Ge,e("div",null,[h(e("select",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.is_published=s),id:"is_published",class:"form-select"},Re,512),[[z,t.is_published]])]),e("div",We,r(a(m).is_published),1),e("div",Ze,[(o(!0),i(d,null,u((B=a(_))==null?void 0:B.is_published,s=>(o(),i("div",null,r(s),1))),256))])])]),e("button",{disabled:a(g),class:"btn btn-primary mt-3"},[h(e("div",$e,null,512),[[$,a(g)]]),a(g)?(o(),i("span",He,"Processing...")):(o(),i("span",Je,"Update"))],8,ze)],40,de)])])])])])])}}};export{ds as default};
