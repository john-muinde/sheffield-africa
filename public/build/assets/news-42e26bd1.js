import{r as l,c6 as m,cg as o}from"./index-355e7185.js";import{a6 as y}from"./index-801472e7.js";function b(){const u=l([]),p=l([]),d=l({name:"",type:"",content:"",is_published:"",main_image_path:"",file_path:"",url:""}),c=m(),a=l({}),n=l(!1),w=async(e=1,t="",r="",s="",h="created_at",f="desc")=>{try{const i=await o("get",`/api/news?page=${e}
                &search_id=${t}
                &search_title=${r}
                &search_global=${s}
                &order_column=${h}
                &order_direction=${f}`);u.value=i}catch(i){a.value=i}};return{newsList:p,allNews:u,news:d,getNews:w,getNewsList:async()=>{try{const e=await o("get","/api/news-list");p.value=e}catch(e){a.value=e}},getSingleNews:async e=>{try{const t=await o("get",`/api/news/${e}`);d.value=t}catch(t){a.value=t}},storeNews:async e=>{if(n.value)return;n.value=!0,a.value={};let t=new FormData;for(let s in e)e.hasOwnProperty(s)&&t.append(s,e[s]);const r={headers:{"Content-Type":"multipart/form-data"}};try{await o("post","/api/news",t,r),c.push({name:"news.index"}),e.name=null,e.description=null,e.main_image_path=null,e.is_published=null,e.video=null,showToast("News saved successfully","success")}catch(s){a.value=s}finally{n.value=!1}},updateNews:async e=>{if(n.value)return;n.value=!0,a.value={};let t=new FormData;for(let s in e)e.hasOwnProperty(s)&&t.append(s,e[s]);const r={headers:{"Content-Type":"multipart/form-data"}};t.append("_method","put");try{await o("post",`/api/news/${e.id}`,t,r),c.push({name:"news.index"}),showToast("News updated successfully","success")}catch(s){a.value=s}finally{n.value=!1}},deleteNews:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/news/${e}`).then(()=>{w(),c.push({name:"news.index"}),showToast("News deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:n}}export{b as u};
