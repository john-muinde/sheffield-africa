import{z as l,cc as m,cv as o}from"./app-setting.4dfaedfa.js";import{$ as y}from"./Modal.b8d333e6.js";function x(){const u=l([]),p=l([]),d=l({name:"",type:"",content:"",is_published:"",main_image_path:"",file_path:"",url:""}),c=m(),a=l({}),n=l(!1),w=async(e=1,s="",r="",t="",h="created_at",f="desc")=>{try{const i=await o("get",`/api/news?page=${e}
                &search_id=${s}
                &search_title=${r}
                &search_global=${t}
                &order_column=${h}
                &order_direction=${f}`);u.value=i}catch(i){a.value=i}};return{newsList:p,allNews:u,news:d,getNews:w,getNewsList:async()=>{try{const e=await o("get","/api/news-list");p.value=e}catch(e){a.value=e}},getSingleNews:async e=>{try{const s=await o("get",`/api/news/${e}`);d.value=s}catch(s){a.value=s}},storeNews:async e=>{if(n.value)return;n.value=!0,a.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const r={headers:{"content-type":"multipart/form-data"}};try{await o("post","/api/news",s,r),c.push({name:"news.create"}),e.name=null,e.description=null,e.main_image_path=null,e.is_published=null,e.video=null,showToast("News saved successfully","success")}catch(t){a.value=t}finally{n.value=!1}},updateNews:async e=>{if(n.value)return;n.value=!0,a.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const r={headers:{"Content-Type":"multipart/form-data"}};s.append("_method","put");try{await o("post",`/api/news/${e.id}`,s,r),c.push({name:"news.index"}),showToast("News updated successfully","success")}catch(t){a.value=t}finally{n.value=!1}},deleteNews:async e=>{y.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/news/${e}`).then(()=>{w(),c.push({name:"news.index"}),showToast("News deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:n}}export{x as u};
