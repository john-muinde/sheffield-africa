import{c0 as ae,r as c,a as te,c as j,o as oe,w as v,ad as le,bM as B,bE as n,bF as d,bU as U,bG as e,aT as se,U as O,ca as re,c2 as ie,e as g,ak as P,c3 as ne,bL as x,bR as b,bI as w,aa as A,bN as F,cj as de,bK as f,a2 as ce,ae as V}from"./index.27be70b8.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as ue}from"./vue-draggable-next.esm-bundler.6a2c01e4.js";/* empty css                        */import"./use-meta.354dbb45.js";import{a as C}from"./vee-validate.d1351e7e.js";import{u as pe}from"./categories.8e475b14.js";import{u as ge}from"./products.654009ef.js";import"./_commonjsHelpers.f037b798.js";import"./Modal.093f7e91.js";const me={class:"layout-px-spacing"},ve={class:"row layout-top-spacing"},be={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},fe={class:"panel br-6 p-0"},xe={class:"panel-body"},ye={class:"row"},he={class:"form-group col-md-1"},_e={class:"form-group col-md-3"},ke={class:"form-group col-md-3"},Pe={class:"form-group col-md-5"},we={class:"table-responsive"},Ve={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},Ce={role:"rowgroup"},Me={role:"row"},Ne={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},Ie={role:"rowgroup"},Le={key:0,"aria-colindex":"0",class:"handle"},Se={"aria-colindex":"1",role:"cell"},De=["src"],Ee={"aria-colindex":"1",role:"cell"},Te={"aria-colindex":"2",role:"cell"},je={"aria-colindex":"3",role:"cell"},Be={"aria-colindex":"4",role:"cell"},Ue={"aria-colindex":"4",role:"cell"},Oe={key:0,class:"badge badge-success inv-status"},Ae={key:1,class:"badge badge-danger inv-status"},Fe={"aria-colindex":"5",role:"cell"},$e={"aria-colindex":"6",role:"cell",class:"text-center"},ze=["onClick"],Re={"aria-label":"Page navigation",style:{"margin-top":"20px"}},qe={class:"pagination justify-content-center"},ra={__name:"index",setup(Ge){const{getCategoryList:He,categoryList:$,getMainCategoryList:z,categoryMainList:R,getSelectedCategoryList:q}=pe(),{deleteProduct:G}=ge(),u=ae();c(u);const s=c(u.params.page?parseInt(u.params.page):1),D=c(0),H=c(0),M=c(u.params.id?parseInt(u.params.id):1),N=c([]),y=c([]),{value:I}=C("perPage",null,{initialValue:"20"}),{value:E}=C("filter_category_id",null,{initialValue:""}),{value:h}=C("main_category",null,{initialValue:""}),{value:K}=C("search",null,{initialValue:""}),l=te({perPage:I,filter_category_id:E,main_category:h,search:K}),L=async()=>{try{l.main_category!=""&&l.search==""&&(l.perPage=1e4);const o=await de.get("/api/get-products-admin",{params:{page:s.value,per_page:l.perPage,category_id:M.value,mainCategory:l.main_category.id,search:l.search,filter_category_id:l.filter_category_id&&l.filter_category_id.id||null}});D.value=o.data.categories.total,H.value=o.data.categories.data.length,N.value=o.data.categories.data}catch(o){console.error(o)}},m=j(()=>Math.ceil(D.value/I.value)),p=c([]),J=()=>{s.value>1&&s.value--},T=()=>{s.value<m.value&&s.value++},Q=o=>{s.value=o},_=()=>{p.value=N.value.slice(0,0+I.value)},W=o=>Number.isInteger(o),X=j(()=>{const o=[];s.value>1&&o.push("Prev");let r=Math.max(1,s.value-Math.floor(5/2)),i=Math.min(r+5-1,m.value);i-r<5-1&&(r=Math.max(1,i-5+1));for(let t=r;t<=i;t++)o.push(t);return s.value<m.value&&o.push("Next"),o}),k=(o,a)=>`/admin/products/page/${a}`;oe(()=>{L(),z()}),v(s,L),v(h,o=>{if(h){const a=l.main_category.id;l.filter_category_id=null,q(a)}}),v(l,_),v(h,_),v(E,_),v(N,_),le(()=>{const o=u.params;u.query,o.id!==""&&M.value!==o.id&&(s.value=1,M.value=o.id?parseInt(o.id):1,o.page!==""&&s.value!==o.page&&(s.value=o.page?parseInt(o.page):1),L())});const Y=async o=>{try{const a=await axios.post("/api/products-update-order",{data:o})}catch(a){console.error("Error saving data:",a)}},Z=()=>{p.value.forEach(o=>{o.order=null})},ee=o=>{const a=p.value.map(r=>r.id);Y(a),p.value.forEach(r=>{const i=a.indexOf(r.id);r.order=i+1})};return(o,a)=>{const r=B("multiselect"),i=B("router-link");return n(),d("div",me,[(n(),U(se,{to:"#breadcrumb"},[a[5]||(a[5]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Products")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"View Products")])])])])])],-1))])),e("div",ve,[e("div",be,[e("div",fe,[a[26]||(a[26]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"flex justify-between items-center"},[e("h3",{class:"text-lg font-bold"}," View Products "),e("button",{class:"bg-blue-500 text-white font-semibold py-2 px-4 rounded hover:bg-blue-600"}," Add Product ")])],-1)),e("div",xe,[e("div",ye,[e("div",he,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),O(e("select",{id:"perpage","onUpdate:modelValue":a[0]||(a[0]=t=>l.perPage=t),class:"form-control form-select select"},a[6]||(a[6]=[ie('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[re,l.perPage]])]),e("div",_e,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),g(r,{modelValue:l.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>l.main_category=t),options:P(R),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",ke,[a[9]||(a[9]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),g(r,{modelValue:l.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>l.filter_category_id=t),options:P($),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",Pe,[a[10]||(a[10]=e("label",{for:"post-name"},"Search",-1)),O(e("input",{id:"post-name","onUpdate:modelValue":a[3]||(a[3]=t=>l.search=t),type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[ne,l.search]])])]),e("div",we,[e("table",Ve,[e("thead",Ce,[e("tr",Me,[l.main_category!==""?(n(),d("th",Ne,a[11]||(a[11]=[e("div",null,null,-1)]))):x("",!0),a[12]||(a[12]=e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Image")],-1)),a[13]||(a[13]=e("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e("div",null,"Name")],-1)),a[14]||(a[14]=e("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e("div",null,"Make")],-1)),a[15]||(a[15]=e("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e("div",null,"Model Number")],-1)),a[16]||(a[16]=e("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e("div",null,"Sku")],-1)),a[17]||(a[17]=e("th",{role:"columnheader",scope:"col","aria-colindex":"6"},[e("div",null,"Is Published")],-1)),a[18]||(a[18]=e("th",{role:"columnheader",scope:"col","aria-colindex":"7"},[e("div",null,"Created At")],-1)),a[19]||(a[19]=e("th",{role:"columnheader",scope:"col","aria-colindex":"8","aria-label":"Action",class:"text-center"},[e("div",null,"action")],-1))])]),e("tbody",Ie,[g(P(ue),{id:"left-lovehandles",modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:Z,onEnd:ee},{default:b(()=>[(n(!0),d(A,null,F(p.value,t=>{var S;return n(),d("tr",{key:t.id,role:"row",class:""},[l.main_category!==""?(n(),d("td",Le,a[20]||(a[20]=[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])],-1)]))):x("",!0),e("td",Se,[e("img",{style:{width:"80px"},src:"/storage/"+t.main_image_path,class:"rounded profile-img",alt:"avatar"},null,8,De)]),e("td",Ee,f(t==null?void 0:t.name),1),e("td",Te,f((S=t.product_brand)==null?void 0:S.name),1),e("td",je,f(t.model_number),1),e("td",Be,f(t.sku),1),e("td",Ue,[t.is_published===1?(n(),d("span",Oe,"Published")):x("",!0),t.is_published!==1?(n(),d("span",Ae,"Not Published")):x("",!0)]),e("td",Fe,f(t.created_at),1),e("td",$e,[g(i,{to:{name:"products.edit",params:{id:t.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:b(()=>a[21]||(a[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e("a",{href:"javascript:;",class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",onClick:ce(Ke=>P(G)(t.id),["prevent"])},a[22]||(a[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,ze)])])}),128))]),_:1},8,["modelValue"])])])]),e("nav",Re,[e("ul",qe,[e("li",{class:w(["page-item",{disabled:s.value===1}])},[g(i,{class:"page-link page-link-prev",to:k(y.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:J},{default:b(()=>a[23]||(a[23]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),V(" Prev ")])),_:1},8,["to"])],2),(n(!0),d(A,null,F(X.value,t=>(n(),d("li",{key:t,class:w(["page-item",{active:t===s.value}])},[W(t)?(n(),U(i,{key:0,class:"page-link",to:k(y.value.id,t),onClick:S=>Q(t)},{default:b(()=>[V(f(t),1)]),_:2},1032,["to","onClick"])):x("",!0)],2))),128)),e("li",{class:w(["page-item",{disabled:s.value===m.value}])},[g(i,{class:"page-link page-link-next",to:k(y.value.id,m.value),"aria-label":"Next",onClick:T},{default:b(()=>a[24]||(a[24]=[V(" Last "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e("li",{class:w(["page-item",{disabled:s.value===m.value}])},[g(i,{class:"page-link page-link-next",to:k(y.value.id,s.value+1),"aria-label":"Next",onClick:T},{default:b(()=>a[25]||(a[25]=[V(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{ra as default};
