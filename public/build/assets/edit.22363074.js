import{aa as w,ab as D,ac as c,P as T,x as j,a3 as G,y as X,a4 as x,o as l,c as n,a2 as A,a as e,W,p,X as Z,t as d,u as o,F as v,g,i as h,ao as z,v as $,m as E,at as H,d as J,ad as K,ae as O}from"./app-setting.08d4c509.js";import{u as Q}from"./csrs.082bc9d2.js";/* empty css                                     */import{F as f}from"./file-upload-with-preview.esm.fbf56fa2.js";import"./vue3-multiselect.umd.min.0791a17f.js";/* empty css                         */import{q as b}from"./vue3-quill.2d7baed8.js";import"./_commonjsHelpers.f037b798.js";const Y={class:"container"},ee=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"CSRs")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Edit CSR")])])])])])],-1),se={class:"container"},ae={class:"row"},ie={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},te={class:"statbox panel box box-shadow"},oe=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null,"Edit CSR")])])])],-1),le={class:"panel-body"},ne=["onSubmit"],re={class:"row"},ce={class:"form-group col-md-12"},de=e("label",{for:"post-name"},"CSR Name",-1),_e={class:"text-danger mt-1"},ue={class:"text-danger mt-1"},me={class:"form-group"},pe=e("label",{for:"csr_introduction"},"CSR Introduction",-1),ve={class:"form-group"},ge=e("label",{for:"post_description"},"Company company_involvement",-1),he={class:"form-group"},fe=e("label",{for:"post_description"},"Collaborations and collaborations_and_partnerships",-1),be={class:"custom-file-container","data-upload-id":"myFirstImage"},ye=e("label",null,[E("Upload Main CSR Image "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),Ie={class:"custom-file-container__custom-file",for:"main_image"},Ce=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),Se=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),we=e("div",{class:"custom-file-container__image-preview"},null,-1),xe={class:"custom-file-container","data-upload-id":"myCsrGallery"},Ee=e("label",null,[E("CSR Gallery (multiple images allowed) "),e("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1),ke={class:"custom-file-container__custom-file",for:"csr_gallery"},Fe={type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",ref:"csr_gallery",multiple:"",id:"csr_gallery"},Re=e("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1),Ve=e("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1),qe={class:"custom-file-container__image-preview"},Pe=["onClick"],Ue=e("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"\xD7",-1),Me=[Ue],Le={class:"form-group col-md-4"},Ne=e("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1),Be=e("option",{value:""}," Select Publishing Status ... ",-1),De=e("option",{selected:"",value:"1"}," Published ",-1),Te=e("option",{value:"0"}," Not Published ",-1),je=[Be,De,Te],Ge={class:"text-danger mt-1"},Xe={class:"text-danger mt-1"},Ae=["disabled"],We={class:""},Ze={key:0},ze={key:1},ls={__name:"edit",setup($e){w("required",K),w("min",O);const k={name:"required|min:3",csr_introduction:"required",company_involvement:"required",collaborations_and_partnership:"required|min:3",is_published:"required"},{validate:F,errors:y,resetForm:He}=D({validationSchema:k}),{csr:t,getCsr:R,updateCsr:I,validationErrors:C,isLoading:_,getCsrList:Je,csrList:Ke,deleteCsrImage:V}=Q(),{value:q}=c("name",null,{initialValue:""}),{value:P}=c("csr_introduction",null,{initialValue:""}),{value:U}=c("company_involvement",null,{initialValue:""}),{value:M}=c("collaborations_and_partnership",null,{initialValue:""}),{value:L}=c("is_published",null,{initialValue:""}),s=T({name:q,csr_introduction:P,company_involvement:U,collaborations_and_partnership:M,is_published:L,main_image:"",csr_gallery:""}),u=j({modules:{}}),N=G();function B(){F().then(m=>{if(m.valid){const r=document.getElementById("csr_gallery").files;r.length>0?I(s,r):I(s,[])}})}return X(()=>{R(N.params.id),x(()=>{if(t.value&&t.value.main_image_path){const r={images:{baseImage:"/storage/"+t.value.main_image_path,backgroundImage:""}};new f("myFirstImage",r)}else new f("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new f("myCsrGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),x(()=>{s.id=t.value.id,s.name=t.value.name,s.csr_introduction=t.value.csr_introduction,s.company_involvement=t.value.company_involvement,s.collaborations_and_partnership=t.value.collaborations_and_partnership,s.is_published=t.value.is_published,s.csr_images=t.value.csr_images,console.log(t.value)}),(m,i)=>{var r,S;return l(),n("div",Y,[(l(),A(H,{to:"#breadcrumb"},[ee])),e("div",se,[e("div",ae,[e("div",ie,[e("div",te,[oe,e("div",le,[e("form",{onSubmit:W(B,["prevent"])},[e("div",re,[e("div",ce,[de,p(e("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.name=a),id:"post-name",type:"text",class:"form-control",placeholder:"Enter CSR Name ..."},null,512),[[Z,s.name]]),e("div",_e,d(o(y).name),1),e("div",ue,[(l(!0),n(v,null,g((r=o(C))==null?void 0:r.name,a=>(l(),n("div",null,d(a),1))),256))])]),e("div",me,[pe,h(o(b),{value:s.csr_introduction,"onUpdate:value":i[1]||(i[1]=a=>s.csr_introduction=a),id:"csr_introduction",options:u.value,placeholder:"Enter Short Description ..."},null,8,["value","options"])]),e("div",ve,[ge,h(o(b),{value:s.company_involvement,"onUpdate:value":i[2]||(i[2]=a=>s.company_involvement=a),options:u.value,placeholder:"Enter Description ..."},null,8,["value","options"])]),e("div",he,[fe,h(o(b),{value:s.collaborations_and_partnership,"onUpdate:value":i[3]||(i[3]=a=>s.collaborations_and_partnership=a),options:u.value,placeholder:"Enter Technical Specification ..."},null,8,["value","options"])]),e("div",be,[ye,e("label",Ie,[e("input",{type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:i[4]||(i[4]=a=>s.main_image=a.target.files[0]),id:"main_image"},null,32),Ce,Se]),we]),e("div",xe,[Ee,e("label",ke,[e("input",Fe,null,512),Re,Ve]),e("div",qe,[(l(!0),n(v,null,g(s.csr_images,a=>(l(),n("div",{key:a.id,class:"custom-file-container__image-multi-preview",style:J("background-image: url(/storage/"+a.name+")")},[e("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:Oe=>o(V)(a.id)},Me,8,Pe)],4))),128))])]),e("div",Le,[Ne,e("div",null,[p(e("select",{"onUpdate:modelValue":i[5]||(i[5]=a=>s.is_published=a),id:"is_published",class:"form-select"},je,512),[[z,s.is_published]])]),e("div",Ge,d(o(y).is_published),1),e("div",Xe,[(l(!0),n(v,null,g((S=o(C))==null?void 0:S.is_published,a=>(l(),n("div",null,d(a),1))),256))])])]),e("button",{disabled:o(_),class:"btn btn-primary mt-3"},[p(e("div",We,null,512),[[$,o(_)]]),o(_)?(l(),n("span",Ze,"Processing...")):(l(),n("span",ze,"Update"))],8,Ae)],40,ne)])])])])])])}}};export{ls as default};
