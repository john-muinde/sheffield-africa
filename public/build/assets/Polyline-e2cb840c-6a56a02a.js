import{c as w,y as c}from"./tools-b40e92cf-d03b1370.js";import{r}from"./gmaps-ca810647-315b513b.js";import{v as i}from"./index-2f855d2c.js";import"./_commonjsHelpers-23102255.js";const O=i.defineComponent({name:"GmapsPolyline",props:{draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,default:void 0},path:{type:Object,default:void 0},visible:{type:Boolean,default:!0}},emits:{click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:t=>!0,dragend:t=>!0,dragstart:t=>!0,mounted:t=>!0,mousedown:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,mouseup:t=>!0,path_changed:t=>!0,rightclick:t=>!0,unmounted:t=>!0},setup(t,{emit:d}){const m=i.inject("$getAPI"),p=i.inject("$getMap"),h=i.inject("$getThrottle"),b=i.inject("$handleError"),L=e=>b(e,"Polyline"),v=[];let n=null;const s=e=>e.getPath().getArray().map(l=>l.toJSON()),f=e=>{const l=google.maps.event,g=h();v.push(l.addListener(e,"drag",c(a=>{var o;return d("drag",((o=a.latLng)==null?void 0:o.toJSON())||null)},g)),l.addListener(e,"mousemove",c(a=>d("mousemove",r(a)),g)),l.addListener(e,"mouseover",c(a=>d("mouseover",r(a)),g)),l.addListener(e,"click",a=>d("click",r(a))),l.addListener(e,"contextmenu",a=>d("contextmenu",r(a))),l.addListener(e,"dblclick",a=>d("dblclick",r(a))),l.addListener(e,"dragend",a=>{var o;return d("dragend",((o=a.latLng)==null?void 0:o.toJSON())||null)}),l.addListener(e,"dragstart",a=>{var o;return d("dragstart",((o=a.latLng)==null?void 0:o.toJSON())||null)}),l.addListener(e,"mousedown",a=>d("mousedown",r(a))),l.addListener(e,"mouseout",a=>d("mouseout",r(a))),l.addListener(e,"mouseup",a=>d("mouseup",r(a))),l.addListener(e,"rightclick",a=>d("rightclick",r(a))),l.addListener(e,"dragend",a=>d("path_changed",s(e))),l.addListener(e,"mouseup",a=>a.vertex!==void 0||a.edge!==void 0?d("path_changed",s(e)):null),e.getPath().addListener("remove_at",()=>d("path_changed",s(e))))},y=p(),k=m(),u={map:y,...t.options};return t.draggable&&(u.draggable=t.draggable),t.editable&&(u.editable=t.editable),t.path&&(u.path=t.path),t.visible&&(u.visible=t.visible),n=new k.Polyline(u),n?(f(n),d("mounted",n)):L(new Error("There was a problem creating the shape.")),i.watch(()=>t.draggable,e=>e===void 0||e==(n==null?void 0:n.getDraggable())?null:n==null?void 0:n.setDraggable(e)),i.watch(()=>t.editable,e=>e===void 0||e==(n==null?void 0:n.getEditable())?null:n==null?void 0:n.setEditable(e)),i.watch(()=>t.path,e=>e===void 0||w(e,n==null?void 0:n.getPath())?null:n==null?void 0:n.setPath(e),{deep:!0}),i.watch(()=>t.visible,e=>e===void 0||e==(n==null?void 0:n.getVisible())?null:n==null?void 0:n.setVisible(e)),i.onBeforeUnmount(()=>{n&&d("unmounted",n),v.forEach(e=>e.remove()),n&&n.setMap(null),n&&m().event.clearInstanceListeners(n)}),()=>{}}});export{O as default};
