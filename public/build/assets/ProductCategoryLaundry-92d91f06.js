import{e as O,a as I,v as e}from"./index-363faad7.js";import{b as z}from"./use-meta-76e4dbce.js";import"./_commonjsHelpers-23102255.js";const R={class:"main"},q={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},U={class:"container d-flex align-items-center"},Z={class:"breadcrumb"},j={class:"breadcrumb-item"},G={class:"breadcrumb-item"},H={class:"breadcrumb-item active","aria-current":"page"},Y={class:"page-content"},J={class:"container"},K={class:"row"},Q={class:"col-lg-10"},W={class:"toolbox"},X={class:"toolbox-left"},ee={class:"toolbox-info"},te={class:"toolbox-right"},ae={class:"toolbox-sort"},oe={class:"select-custom"},le={class:"products mb-3 products-section"},se={class:"row"},ne={class:"product product-7 text-center"},re={class:"product-media"},ce=["src"],ie={class:"product-action"},de=["onClick"],ue={class:"product-body"},me={class:"product-cat"},ve={class:"product-title"},pe={"aria-label":"Page navigation"},ge={class:"pagination justify-content-center"},_e={class:"page-item-total"},Ne={class:"col-lg-2 order-lg-first"},he={class:"sidebar sidebar-shop sidebar-shop-category"},Ve={key:0,class:"widget widget-collapsible"},fe={id:"widget-1",class:"show"},be={class:"widget-body"},Ee={class:"filter-items filter-items-count"},ke={class:"custom-control custom-checkbox"},xe=["id","value","onChange"],Ce=["for"],ye={class:"item-count"},we={class:"widget widget-collapsible"},Pe={id:"widget-4",class:"show"},Be={class:"widget-body"},Le={class:"filter-items"},Se={class:"custom-control custom-checkbox"},De=["id","value","onChange"],Te=["for"],Oe={__name:"ProductCategoryLaundry",setup($e){const w=O(),P=o=>{window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"}).fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}}),w.dispatch("cart/addToCart",o)},i=I();e.ref(i);const s=e.ref(i.params.page?parseInt(i.params.page):1),E=e.ref(12),_=e.ref(0),N=e.ref([]),k=e.ref(0),d=e.ref(i.params.id?parseInt(i.params.id):1),h=e.ref([]),x=e.ref([]),r=e.ref([]),u=e.ref([]);e.ref([]);const m=e.ref([]),g=e.ref(""),V=async()=>{try{const o={[d.value]:u.value[d.value]||[]};u.value=o;const t={[d.value]:m.value[d.value]||[]};m.value=t;const l=await axios.get("/api/get-products",{params:{page:s.value,per_page:E.value,category_id:d.value,checkedCategories:u.value,checkedBrands:m.value,selectedSortOption:g.value}});N.value=l.data.products.data,_.value=l.data.products.total,k.value=l.data.products.per_page,h.value=l.data.categories,x.value=l.data.brands,r.value=l.data.the_category}catch(o){console.error(o)}};function B(o){let t=r.value.id;t in u.value||(u.value[t]=[]);const l=u.value[t];l.includes(o)?l.splice(l.indexOf(o),1):l.push(o)}function L(o){let t=r.value.id;t in m.value||(m.value[t]=[]);const l=m.value[t];l.includes(o)?l.splice(l.indexOf(o),1):l.push(o)}function S(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),u.value=[],m.value=[],g.value=null}const v=e.computed(()=>Math.ceil(_.value/E.value)),C=e.ref([]),D=()=>{s.value>1&&s.value--},T=()=>{s.value<v.value&&s.value++},$=o=>{s.value=o},f=(o,t,l,n)=>{let a=t.replace(/ /g,"-").replace(/\//g,"-");a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),a=a.toLowerCase();let c=n.replace(/ /g,"-").replace(/\//g,"-");c=c.replace(/-+/g,"-"),c=c.replace(/^-+|-+$/g,""),c=c.toLowerCase();let p=l.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return p=p.replace(/-+/g,"-"),p=p.replace(/^-+|-+$/g,""),`/laundry/product/${o}/${a}-${p}`},b=(o,t,l)=>{if(t===void 0)return"/laundry";{let n=t.replace(/ /g,"-").replace(/\//g,"-");return n=n.replace(/-+/g,"-"),n=n.replace(/^-+|-+$/g,""),n=n.toLowerCase(),`/laundry/${o}/${n}/page/${l}`}},M=()=>{C.value=N.value},A=o=>Number.isInteger(o),F=e.computed(()=>{const o=[];s.value>1&&o.push("Prev");let l=Math.max(1,s.value-Math.floor(5/2)),n=Math.min(l+5-1,v.value);n-l<5-1&&(l=Math.max(1,n-5+1));for(let a=l;a<=n;a++)o.push(a);return s.value<v.value&&o.push("Next"),o});e.onMounted(()=>{V()}),e.watch(s,V),e.watch(N,M),e.watchEffect(()=>{const o=i.params;i.query,o.id!==""&&d.value!==o.id&&(s.value=1,d.value=o.id?parseInt(o.id):1,o.page!==""&&s.value!==o.page&&(s.value=o.page?parseInt(o.page):1),V())});const y=e.ref("");return e.watch(()=>r.value.name,(o,t)=>{o!==t&&(y.value=o)}),z({title:y.value+"Laundry & Floor Cleaning"}),(o,t)=>{const l=e.resolveComponent("router-link"),n=e.resolveDirective("lazy");return e.openBlock(),e.createElementBlock("main",R,[e.createElementVNode("nav",q,[e.createElementVNode("div",U,[e.createElementVNode("ol",Z,[e.createElementVNode("li",j,[e.createVNode(l,{to:"/"},{default:e.withCtx(()=>t[1]||(t[1]=[e.createTextVNode(" HOME ")])),_:1})]),e.createElementVNode("li",G,[e.createVNode(l,{to:"/laundry"},{default:e.withCtx(()=>t[2]||(t[2]=[e.createTextVNode(" LAUNDRY & FLOOR CLEANING ")])),_:1})]),e.createElementVNode("li",H,e.toDisplayString(r.value.name),1)])])]),e.createElementVNode("div",Y,[e.createElementVNode("div",J,[e.createElementVNode("div",K,[e.createElementVNode("div",Q,[e.createElementVNode("div",W,[e.createElementVNode("div",X,[e.createElementVNode("div",ee,[t[3]||(t[3]=e.createTextVNode(" Showing ")),e.createElementVNode("span",null,e.toDisplayString(k.value)+" of "+e.toDisplayString(_.value),1),t[4]||(t[4]=e.createTextVNode(" Products "))])]),e.createElementVNode("div",te,[e.createElementVNode("div",ae,[t[6]||(t[6]=e.createElementVNode("label",{for:"sortby"},"Sort by:",-1)),e.createElementVNode("div",oe,[e.withDirectives(e.createElementVNode("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),name:"sortby",class:"form-control"},t[5]||(t[5]=[e.createStaticVNode('<option value=""> Default </option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5)]),512),[[e.vModelSelect,g.value]])])])])]),e.createElementVNode("div",le,[e.createElementVNode("div",se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e.createElementVNode("div",ne,[e.createElementVNode("figure",re,[e.createVNode(l,{to:f(a.id,a.name,a.model_number,r.value.name)},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("img",{src:"/storage/"+a.main_image_path,alt:"Product image",class:"product-image"},null,8,ce),[[n,"/storage/"+a.main_image_path,"src"]])]),_:2},1032,["to"]),t[8]||(t[8]=e.createElementVNode("div",{class:"product-action-vertical"},null,-1)),e.createElementVNode("div",ie,[e.createElementVNode("button",{type:"button",class:"btn-product btn-cart",onClick:c=>P(a)},t[7]||(t[7]=[e.createElementVNode("span",null,"Add to Cart",-1)]),8,de)])]),e.createElementVNode("div",ue,[e.createElementVNode("div",me,[e.createVNode(l,{to:f(a.id,a.name,a.model_number,r.value.name)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.product_brand.name),1)]),_:2},1032,["to"])]),e.createElementVNode("h3",ve,[e.createVNode(l,{to:f(a.id,a.name,a.model_number,r.value.name)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.name),1)]),_:2},1032,["to"])]),t[9]||(t[9]=e.createElementVNode("div",{class:"ratings-container"},null,-1))])])]))),128))])]),e.createElementVNode("nav",pe,[e.createElementVNode("ul",ge,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===1}])},[e.createVNode(l,{class:"page-link page-link-prev",to:b(r.value.id,r.value.name,s.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:D},{default:e.withCtx(()=>t[10]||(t[10]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(F.value,a=>(e.openBlock(),e.createElementBlock("li",{key:a,class:e.normalizeClass(["page-item",{active:a===s.value}])},[A(a)?(e.openBlock(),e.createBlock(l,{key:0,class:"page-link",to:b(r.value.id,r.value.name,a),onClick:c=>$(a)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",_e," of "+e.toDisplayString(v.value),1),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:s.value===v.value}])},[e.createVNode(l,{class:"page-link page-link-next",to:b(r.value.id,r.value.name,s.value+1),"aria-label":"Next",onClick:T},{default:e.withCtx(()=>t[11]||(t[11]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e.createElementVNode("aside",Ne,[e.createElementVNode("div",he,[e.createElementVNode("div",{class:"widget widget-clean"},[t[12]||(t[12]=e.createElementVNode("label",null,"Filters:",-1)),e.createElementVNode("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:S}," Clean All ")]),h.value.length?(e.openBlock(),e.createElementBlock("div",Ve,[t[13]||(t[13]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e.createElementVNode("div",fe,[e.createElementVNode("div",be,[e.createElementVNode("div",Ee,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.id,class:"filter-item"},[e.createElementVNode("div",ke,[e.createElementVNode("input",{id:"cat-"+a.id,type:"checkbox",class:"custom-control-input",value:a.id,onChange:c=>B(a.id)},null,40,xe),e.createElementVNode("label",{class:"custom-control-label",for:"cat-"+a.id},e.toDisplayString(a.name),9,Ce)]),e.createElementVNode("span",ye,e.toDisplayString(a.category_products_count),1)]))),128))])])])])):e.createCommentVNode("",!0),e.createElementVNode("div",we,[t[14]||(t[14]=e.createElementVNode("h3",{class:"widget-title"},[e.createElementVNode("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e.createElementVNode("div",Pe,[e.createElementVNode("div",Be,[e.createElementVNode("div",Le,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.id,class:"filter-item"},[e.createElementVNode("div",Se,[e.createElementVNode("input",{id:"brand-"+a.product_brand.id,type:"checkbox",class:"custom-control-input",value:a.product_brand.id,onChange:c=>L(a.product_brand.id)},null,40,De),e.createElementVNode("label",{class:"custom-control-label",for:"brand-"+a.product_brand.id},e.toDisplayString(a.product_brand.name),9,Te)])]))),128))])])])])])])])])])])}}};export{Oe as default};
