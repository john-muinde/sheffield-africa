import{a3 as q,s as r,ad as g,P as B,Q as U,u as F,x as d,a4 as O,o as m,c as h,a0 as j,a as e,ap as Q,p as R,ak as T,X as W,i as x,W as c,l as X,F as z,g as A,t as G}from"./app-setting.32868441.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as H}from"./vue-draggable-next.esm-bundler.66fea5fd.js";/* empty css                        */import{u as J}from"./categories.099c7811.js";import{M as C}from"./vue3-multiselect.umd.min.0c5f5a60.js";/* empty css                         */import"./_commonjsHelpers.f037b798.js";const K={class:"layout-px-spacing"},Y={class:"row layout-top-spacing"},Z={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},$={class:"panel br-6 p-0"},ee={class:"panel-body"},ae={class:"row"},oe={class:"form-group col-md-1"},te={class:"form-group col-md-3",style:{display:"none"}},le={class:"form-group col-md-3",style:{display:"none"}},se={class:"table-responsive"},re={role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered",id:"__BVID__415"},ie={role:"rowgroup"},ne={"aria-colindex":"1",role:"cell"},Ve={__name:"category-sequence",setup(de){const{getCategoryList:ce,categoryList:S,getMainCategoryList:ue,categoryMainList:M,getSelectedCategoryList:I}=J(),s=q();r(s);const i=r(s.params.page?parseInt(s.params.page):1),V=r(s.params.id?parseInt(s.params.id):0);r(0),r(0);const v=r(s.params.id?parseInt(s.params.id):1),y=r([]),k=r([]),{value:P}=g("perPage",null,{initialValue:"20"}),{value:w}=g("filter_category_id",null,{initialValue:""}),{value:u}=g("main_category",null,{initialValue:""}),{value:D}=g("search",null,{initialValue:""}),l=B({perPage:P,filter_category_id:w,main_category:u,search:D}),b=async()=>{try{l.main_category==""&&(l.perPage=1e4),console.log(V);const o=await axios.get("/api/get-solutions-categories",{params:{page:i.value,per_page:l.perPage,category_id:v.value,mainCategory:l.main_category.id,solution_id:V.value,search:l.search}});y.value=o.data.categories,k.value=o.data.the_solution}catch(o){console.error(o)}},n=r([]),p=()=>{n.value=y.value.slice(0,0+P.value)};U(()=>{const o=[];i.value>1&&o.push("Prev");let t=Math.max(1,i.value-Math.floor(5/2)),f=Math.min(t+5-1,totalPages.value);f-t<5-1&&(t=Math.max(1,f-5+1));for(let _=t;_<=f;_++)o.push(_);return i.value<totalPages.value&&o.push("Next"),o}),F(()=>{b()}),d(i,b),d(u,o=>{if(u){const a=l.main_category.id;l.filter_category_id=null,I(a)}}),d(l,p),d(u,p),d(w,p),d(y,p),O(()=>{const o=s.params;s.query,o.id!==""&&v!==o.id&&(i.value=1,v.value=o.id?parseInt(o.id):1,o.page!==""&&i!==o.page&&(i.value=o.page?parseInt(o.page):1),b())});const L=async o=>{try{const a=await axios.post("/api/solutions-categories-update-order",{data:o})}catch(a){console.error("Error saving data:",a)}},E=()=>{n.value.forEach(o=>{o.order=null})},N=o=>{const a=n.value.map(t=>t.id);console.log(a),L(a)};return(o,a)=>(m(),h("div",K,[(m(),j(Q,{to:"#breadcrumb"},[a[4]||(a[4]=e("ul",{class:"navbar-nav flex-row"},[e("li",null,[e("div",{class:"page-header"},[e("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},"Solutions")]),e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e("div",Y,[e("div",Z,[e("div",$,[a[12]||(a[12]=e("div",{class:"panel-heading pb-0"},[e("div",{class:"row"},[e("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e("h3",null,[e("b",null," View Category Sequence ")])])])],-1)),e("div",ee,[e("div",ae,[e("div",oe,[a[6]||(a[6]=e("label",{for:"post-category",class:"form-label"},"Per Page",-1)),R(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.perPage=t),id:"perpage",class:"form-control form-select select"},a[5]||(a[5]=[W('<option selected value="20">20</option><option value="60">60</option><option value="100">100</option><option value="500">500</option><option value="1000">1000</option><option value="10000">10000</option>',6)]),512),[[T,l.perPage]])]),e("div",te,[a[7]||(a[7]=e("label",{for:"post-category",class:"form-label"},"Segment",-1)),x(c(C),{modelValue:l.main_category,"onUpdate:modelValue":a[1]||(a[1]=t=>l.main_category=t),options:c(M),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e("div",le,[a[8]||(a[8]=e("label",{for:"post-category",class:"form-label"},"Main Category",-1)),x(c(C),{modelValue:l.filter_category_id,"onUpdate:modelValue":a[2]||(a[2]=t=>l.filter_category_id=t),options:c(S),reduce:t=>t.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),a[9]||(a[9]=e("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e("div",se,[e("table",re,[a[11]||(a[11]=e("thead",{role:"rowgroup"},[e("tr",{role:"row"},[e("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e("div")]),e("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e("div",null,"Name")])])],-1)),e("tbody",ie,[x(c(H),{id:"left-lovehandles",class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=t=>n.value=t),animation:200,onStart:E,onEnd:N},{default:X(()=>[(m(!0),h(z,null,A(n.value,t=>(m(),h("tr",{key:l.id,role:"row",class:""},[a[10]||(a[10]=e("td",{"aria-colindex":"0",class:"handle"},[e("div",null,[e("span",null,[e("i",{class:"far fa-clone"})])])],-1)),e("td",ne,G(t.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])]))}};export{Ve as default};
