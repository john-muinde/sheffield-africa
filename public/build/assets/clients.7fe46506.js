import{r as l,c8 as y,ch as i}from"./index.d485d88a.js";import{$ as v}from"./Modal.c3314901.js";function b(){const u=l([]),d=l([]),p=l({name:"",phone:"",email:"",address:"",is_published:"",main_image_path:"",description:""}),r=y(),a=l({}),n=l(!1),h=async(e=1,s="",o="",t="",f="created_at",m="desc")=>{try{const c=await i("get",`/api/clients?page=${e}&search_id=${s}&search_title=${o}&search_global=${t}&order_column=${f}&order_direction=${m}`);u.value=c}catch(c){a.value=c}};return{clientList:d,clients:u,client:p,getClients:h,getClientList:async()=>{try{const e=await i("get","/api/client-list");d.value=e}catch(e){a.value=e}},getClient:async e=>{try{const s=await i("get",`/api/clients/${e}`);p.value=s}catch(s){a.value=s}},storeClient:async e=>{if(n.value)return;n.value=!0,a.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const o={headers:{"Content-Type":"multipart/form-data"}};try{await i("post","/api/clients",s,o),r.push({name:"clients.index"}),e.value={name:"",phone:"",email:"",address:"",is_published:"",description:""},showToast("Client saved successfully","success")}catch(t){a.value=t}finally{n.value=!1}},updateClient:async e=>{if(n.value)return;n.value=!0,a.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const o={headers:{"Content-Type":"multipart/form-data"}};try{await i("put",`/api/clients/${e.id}`,s,o),r.push({name:"clients.index"}),showToast("Client updated successfully","success")}catch(t){a.value=t}finally{n.value=!1}},deleteClient:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){i("delete",`/api/clients/${e}`).then(()=>{h(),r.push({name:"clients.index"}),showToast("Client deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:n}}export{b as u};
