import{a as S,v as e}from"./index-516f1143.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as C}from"./vue-draggable-next.esm-bundler-06953a20.js";import"./use-meta-de5a1737.js";import{a as i}from"./vee-validate-5edd3903.js";import{u as P}from"./categories-5c6da6cd.js";import"./_commonjsHelpers-23102255.js";import"./index-2a9e1aab.js";const k={class:"layout-px-spacing"},I={class:"row layout-top-spacing"},B={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},D={class:"panel br-6 p-0"},U={class:"panel-body"},q={class:"row"},L={class:"form-group col-md-1"},M={class:"form-group col-md-3",style:{display:"none"}},O={class:"form-group col-md-3",style:{display:"none"}},F={class:"table-responsive"},j={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},R={role:"rowgroup"},T={"aria-colindex":"1",role:"cell"},$={__name:"category-sequence",setup(z){const{categoryList:f,categoryMainList:y,getSelectedCategoryList:E}=P(),r=S(),n=e.ref(r.params.page?parseInt(r.params.page):1),b=e.ref(r.params.id?parseInt(r.params.id):0),u=e.ref(r.params.id?parseInt(r.params.id):1),m=e.ref([]),N=e.ref([]),{value:g}=i("perPage",null,{initialValue:"20"}),{value:V}=i("filter_category_id",null,{initialValue:""}),{value:c}=i("main_category",null,{initialValue:""}),{value:_}=i("search",null,{initialValue:""}),o=e.reactive({perPage:g,filter_category_id:V,main_category:c,search:_}),p=async()=>{try{o.main_category==""&&(o.perPage=1e4);const a=await axios.get("/api/get-solutions-categories",{params:{page:n.value,per_page:o.perPage,category_id:u.value,mainCategory:o.main_category.id,solution_id:b.value,search:o.search}});m.value=a.data.categories,N.value=a.data.the_solution}catch(a){console.error(a)}},s=e.ref([]),d=()=>{s.value=m.value.slice(0,0+g.value)};e.onMounted(()=>{p()}),e.watch(n,p),e.watch(c,()=>{if(c){const a=o.main_category.id;o.filter_category_id=null,E(a)}}),e.watch(o,d),e.watch(c,d),e.watch(V,d),e.watch(m,d),e.watchEffect(()=>{const a=r.params;a.id!==""&&u.value!==a.id&&(n.value=1,u.value=a.id?parseInt(a.id):1,a.page!==""&&n.value!==a.page&&(n.value=a.page?parseInt(a.page):1),p())});const h=async a=>{try{await axios.post("/api/solutions-categories-update-order",{data:a})}catch(t){console.error("Error saving data:",t)}},w=()=>{s.value.forEach(a=>{a.order=null})},x=()=>{const a=s.value.map(t=>t.id);h(a)};return(a,t)=>{const v=e.resolveComponent("multiselect");return e.openBlock(),e.createElementBlock("div",k,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[4]||(t[4]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Solutions")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"Update Solution Category Sequence")])])])])])],-1))])),e.createElementVNode("div",I,[e.createElementVNode("div",B,[e.createElementVNode("div",D,[t[12]||(t[12]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null," View Category Sequence ")])])])],-1)),e.createElementVNode("div",U,[e.createElementVNode("div",q,[e.createElementVNode("div",L,[t[6]||(t[6]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Per Page",-1)),e.withDirectives(e.createElementVNode("select",{id:"perpage","onUpdate:modelValue":t[0]||(t[0]=l=>o.perPage=l),class:"form-control form-select select"},t[5]||(t[5]=[e.createStaticVNode('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[e.vModelSelect,o.perPage]])]),e.createElementVNode("div",M,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Segment",-1)),e.createVNode(v,{modelValue:o.main_category,"onUpdate:modelValue":t[1]||(t[1]=l=>o.main_category=l),options:e.unref(y),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",O,[t[8]||(t[8]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Main Category",-1)),e.createVNode(v,{modelValue:o.filter_category_id,"onUpdate:modelValue":t[2]||(t[2]=l=>o.filter_category_id=l),options:e.unref(f),reduce:l=>l.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),t[9]||(t[9]=e.createElementVNode("div",{class:"form-group offset-md-6 col-md-5"},null,-1))]),e.createElementVNode("div",F,[e.createElementVNode("table",j,[t[11]||(t[11]=e.createElementVNode("thead",{role:"rowgroup"},[e.createElementVNode("tr",{role:"row"},[e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"0"},[e.createElementVNode("div")]),e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e.createElementVNode("div",null,"Name")])])],-1)),e.createElementVNode("tbody",R,[e.createVNode(e.unref(C),{id:"left-lovehandles",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=l=>s.value=l),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:w,onEnd:x},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createElementBlock("tr",{key:l.id,role:"row",class:""},[t[10]||(t[10]=e.createElementVNode("td",{"aria-colindex":"0",class:"handle"},[e.createElementVNode("div",null,[e.createElementVNode("span",null,[e.createElementVNode("i",{class:"far fa-clone"})])])],-1)),e.createElementVNode("td",T,e.toDisplayString(l.category.name),1)]))),128))]),_:1},8,["modelValue"])])])])])])])])])}}};export{$ as default};
