import{q as T,x as y,aD as M,aw as p,y as J,aE as C,z as i,a1 as E,o as u,c as L,b as S,f as b,a2 as k,l as $,m as x,t as B,e as I,p as j,v as A,a as D}from"./app-setting.08d4c509.js";import{s as f}from"./_plugin-vue_export-helper-dad06003.469021ef.js";import{a as V,y as c,c as Z}from"./tools-b40e92cf.4881bf31.js";import"./_commonjsHelpers.f037b798.js";const H={},P={class:"gmaps-error"};function q(t,a){return u(),L("span",P,[S(t.$slots,"default")])}const G=f(H,[["render",q]]),R={},U={class:"gmaps-spinner"};function F(t,a){return u(),L("span",U)}const K=f(R,[["render",F]]),Q={center:{lat:0,lng:0},zoom:2},W=T({name:"GmapsMap",components:{MapSpinner:K,MapError:G},props:{center:{type:Object},clickableIcons:{type:Boolean},heading:{type:[String,Number]},mapTypeId:{type:[String,Object]},options:{type:Object,default:void 0},tilt:{type:[String,Number]},zoom:{type:[String,Number]},throttle:{type:[Number,String],default:100}},emits:{bounds_changed:t=>!0,center_changed:t=>!0,click:t=>!0,contextmenu:t=>!0,dblclick:t=>!0,drag:()=>!0,dragend:()=>!0,dragstart:()=>!0,error:t=>!0,heading_changed:t=>!0,idle:()=>!0,isfractionalzoomenabled_changed:t=>!0,maptypeid_changed:t=>!0,mounted:t=>!0,mousemove:t=>!0,mouseout:t=>!0,mouseover:t=>!0,projection_changed:()=>!0,renderingtype_changed:()=>!0,rightclick:t=>!0,tilesloaded:()=>!0,tilt_changed:t=>!0,unmounted:t=>!0,zoom_changed:t=>!0},setup(t,{emit:a}){let n=null,g=null;const v=[],h=y(),s=y(null),m=y(!1),{throttle:N}=M(t),_=V((e,o)=>{s.value=`[${o}]: ${e.message}`,a("error",s.value)},500),O=()=>{if(!g)throw new Error("vue3-gmaps :: getAPI() called before API loaded.");return g},w=()=>{if(!n)throw new Error("vue3-gmaps :: getMap() called before map loaded.");return n};p("$getAPI",O),p("$getMap",w),p("$getThrottle",()=>+t.throttle),p("$handleError",_);const z=e=>{const o=+N.value,l=google.maps.event;v.push(l.addListener(e,"bounds_changed",c(()=>{var d;return a("bounds_changed",((d=e.getBounds())==null?void 0:d.toJSON())||null)},o)),l.addListener(e,"center_changed",c(()=>{var d;return a("center_changed",((d=e.getCenter())==null?void 0:d.toJSON())||null)},o)),l.addListener(e,"drag",c(()=>a("drag"),o)),l.addListener(e,"mousemove",c(d=>{var r;return a("mousemove",((r=d.latLng)==null?void 0:r.toJSON())||null)},o)),l.addListener(e,"idle",c(()=>a("idle"),o)),l.addListener(e,"click",d=>{var r;return a("click",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"contextmenu",d=>{var r;return a("contextmenu",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"dblclick",d=>{var r;return a("dblclick",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"dragend",()=>a("dragend")),l.addListener(e,"dragstart",()=>a("dragstart")),l.addListener(e,"heading_changed",()=>a("heading_changed",e.getHeading()||null)),l.addListener(e,"isfractionalzoomenabled_changed",()=>a("isfractionalzoomenabled_changed",e.getZoom()||null)),l.addListener(e,"maptypeid_changed",()=>a("maptypeid_changed",e.getMapTypeId()||null)),l.addListener(e,"mouseout",d=>{var r;return a("mouseout",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"mouseover",d=>{var r;return a("mouseover",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"projection_changed",()=>a("projection_changed")),l.addListener(e,"renderingtype_changed",()=>a("renderingtype_changed")),l.addListener(e,"rightclick",d=>{var r;return a("rightclick",((r=d.latLng)==null?void 0:r.toJSON())||null)}),l.addListener(e,"tilesloaded",()=>a("tilesloaded")),l.addListener(e,"tilt_changed",()=>a("tilt_changed",e.getTilt()||null)),l.addListener(e,"zoom_changed",()=>a("zoom_changed",e.getZoom()||null)))};return J(()=>{C().then(e=>{g=e;const o={...Q,...t.options};t.center&&(o.center=t.center),t.clickableIcons&&(o.clickableIcons=t.clickableIcons),t.heading&&(o.heading=t.heading),t.mapTypeId&&(o.mapTypeId=t.mapTypeId),t.tilt&&(o.tilt=t.tilt),t.zoom&&(o.zoom=t.zoom),n=new e.Map(h.value,o),n&&z(n),a("mounted",n),m.value=!0}).catch(e=>_(e,"Map"))}),i(()=>t.center,e=>{var o;return e===void 0||Z(e,(o=n==null?void 0:n.getCenter())==null?void 0:o.toJSON())?null:n==null?void 0:n.setCenter(e)},{deep:!0}),i(()=>t.clickableIcons,e=>e===void 0||e==(n==null?void 0:n.getClickableIcons())?null:n==null?void 0:n.setClickableIcons(e)),i(()=>t.heading,e=>e===void 0||+e==(n==null?void 0:n.getHeading())?null:n==null?void 0:n.setHeading(+e)),i(()=>t.mapTypeId,e=>e===void 0||e==(n==null?void 0:n.getMapTypeId())?null:n==null?void 0:n.setMapTypeId(e)),i(()=>t.options,e=>e?n==null?void 0:n.setOptions(e):null),i(()=>t.tilt,e=>e===void 0||+e==(n==null?void 0:n.getTilt())?null:n==null?void 0:n.setTilt(+e)),i(()=>t.zoom,e=>e===void 0||+e==(n==null?void 0:n.getZoom())?null:n==null?void 0:n.setZoom(+e)),E(()=>{n&&a("unmounted",n),v.forEach(e=>e.remove()),n&&window.google.maps.event.clearInstanceListeners(n)}),{error:s,ready:m,mapEl:h}}}),X={style:{width:"100%",height:"100%"}},Y={ref:"mapEl",style:{width:"100%",height:"100%"}};function ee(t,a,n,g,v,h){const s=b("map-error"),m=b("map-spinner");return u(),L("div",X,[t.error?(u(),k(s,{key:0},{default:$(()=>[x(B(t.error),1)]),_:1})):t.ready?I("",!0):(u(),k(m,{key:1})),j(D("div",Y,null,512),[[A,t.ready&&!t.error]]),t.ready&&!t.error?S(t.$slots,"default",{key:2}):I("",!0)])}const re=f(W,[["render",ee]]);export{re as default};
