import{an as W,a3 as X,x as i,Q as F,y as ee,z as B,a4 as te,as as ae,f as se,a5 as oe,o as d,c as u,a as e,i as f,l as g,t as _,m as v,p as I,ao as le,F as w,g as y,n as M,e as z,a2 as ie,Y as ce}from"./app-setting.08d4c509.js";import"./_commonjsHelpers.f037b798.js";const ne={class:"main"},de={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},re={class:"container d-flex align-items-center"},ue={class:"breadcrumb"},_e={class:"breadcrumb-item"},ve={class:"breadcrumb-item"},ge={class:"breadcrumb-item active","aria-current":"page"},pe={class:"page-content"},he={class:"container"},me={class:"row"},be={class:"col-lg-10"},fe={class:"toolbox"},Ce={class:"toolbox-left"},ke={class:"toolbox-info"},xe={class:"toolbox-right"},we={class:"toolbox-sort"},ye=e("label",{for:"sortby"},"Sort by:",-1),Pe={class:"select-custom"},$e=ce('<option value="">Default</option><option value="name_asc"> Name A - Z </option><option value="name_desc"> Name Z - A </option><option value="created_at_asc"> Latest First </option><option value="created_at_desc"> Oldest First </option>',5),Ne=[$e],Se={class:"products mb-3 products-section"},Ve={class:"row"},Le={class:"product product-7 text-center"},Be={class:"product-media"},Me=["src"],Ae=e("div",{class:"product-action-vertical"},null,-1),Oe={class:"product-action"},Te=["onClick"],De=e("span",null,"Add to Cart",-1),Ee=[De],Fe={class:"product-body"},Ie={class:"product-cat"},ze={class:"product-title"},Re=e("div",{class:"ratings-container"},null,-1),qe={"aria-label":"Page navigation"},Ze={class:"pagination justify-content-center"},je=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),Ge={class:"page-item-total"},He=e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1),Qe={class:"col-lg-2 order-lg-first"},Ue={class:"sidebar sidebar-shop sidebar-shop-category"},Ye=e("label",null,"Filters:",-1),Je={key:0,class:"widget widget-collapsible"},Ke=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1),We={class:"show",id:"widget-1"},Xe={class:"widget-body"},et={class:"filter-items filter-items-count"},tt={class:"custom-control custom-checkbox"},at=["id","value","onChange"],st=["for"],ot={class:"item-count"},lt={class:"widget widget-collapsible"},it=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1),ct={class:"show",id:"widget-4"},nt={class:"widget-body"},dt={class:"filter-items"},rt={class:"custom-control custom-checkbox"},ut=["id","value","onChange"],_t=["for"],ht={__name:"ProductCategoryColdRoom",setup(vt){const R=W(),q=a=>{window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"}).fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}}),R.dispatch("cart/addToCart",a)},p=X();i(p);const l=i(p.params.page?parseInt(p.params.page):1),A=i(12),P=i(0),$=i([]),O=i(0),h=i(p.params.id?parseInt(p.params.id):1),N=i([]),T=i([]),n=i([]),m=i([]);i([]);const b=i([]),x=i(""),S=async()=>{try{const a={[h.value]:m.value[h.value]||[]};m.value=a;const o={[h.value]:b.value[h.value]||[]};b.value=o;const s=await axios.get("/api/get-products",{params:{page:l.value,per_page:A.value,category_id:h.value,checkedCategories:m.value,checkedBrands:b.value,selectedSortOption:x.value}});$.value=s.data.products.data,P.value=s.data.products.total,O.value=s.data.products.per_page,N.value=s.data.categories,T.value=s.data.brands,n.value=s.data.the_category}catch(a){console.error(a)}};function Z(a){let o=n.value.id;o in m.value||(m.value[o]=[]);const s=m.value[o];s.includes(a)?s.splice(s.indexOf(a),1):s.push(a)}function j(a){let o=n.value.id;o in b.value||(b.value[o]=[]);const s=b.value[o];s.includes(a)?s.splice(s.indexOf(a),1):s.push(a)}function G(){document.querySelectorAll('input[type="checkbox"]').forEach(o=>{o.checked=!1}),m.value=[],b.value=[],x.value=null}const C=F(()=>Math.ceil(P.value/A.value)),D=i([]),H=()=>{l.value>1&&l.value--},Q=()=>{l.value<C.value&&l.value++},U=a=>{l.value=a},V=(a,o,s,c)=>{let t=o.replace(/ /g,"-").replace(/\//g,"-");t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),t=t.toLowerCase();let r=c.replace(/ /g,"-").replace(/\//g,"-");r=r.replace(/-+/g,"-"),r=r.replace(/^-+|-+$/g,""),r=r.toLowerCase();let k=s.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return k=k.replace(/-+/g,"-"),k=k.replace(/^-+|-+$/g,""),`/cold-storage/product/${a}/${t}-${k}`},L=(a,o,s)=>{if(o===void 0)return"/cold-storage";{let c=o.replace(/ /g,"-").replace(/\//g,"-");return c=c.replace(/-+/g,"-"),c=c.replace(/^-+|-+$/g,""),c=c.toLowerCase(),`/cold-storage/${a}/${c}/page/${s}`}},Y=()=>{D.value=$.value},J=a=>Number.isInteger(a),K=F(()=>{const a=[];l.value>1&&a.push("Prev");let s=Math.max(1,l.value-Math.floor(5/2)),c=Math.min(s+5-1,C.value);c-s<5-1&&(s=Math.max(1,c-5+1));for(let t=s;t<=c;t++)a.push(t);return l.value<C.value&&a.push("Next"),a});ee(()=>{S()}),B(l,S),B($,Y),te(()=>{const a=p.params;p.query,a.id!==""&&h!==a.id&&(l.value=1,h.value=a.id?parseInt(a.id):1,a.page!==""&&l!==a.page&&(l.value=a.page?parseInt(a.page):1),S())});const E=i("");return B(()=>n.value.name,(a,o)=>{console.log(a),console.log(o),a!==o&&(console.log("changing it"),E.value=a)}),ae({title:E.value+"Cold Storage"}),(a,o)=>{const s=se("router-link"),c=oe("lazy");return d(),u("main",ne,[e("nav",de,[e("div",re,[e("ol",ue,[e("li",_e,[f(s,{to:"/"},{default:g(()=>[v("HOME")]),_:1})]),e("li",ve,[f(s,{to:"/cold-storage"},{default:g(()=>[v("COLD STORAGE")]),_:1})]),e("li",ge,_(n.value.name),1)])])]),e("div",pe,[e("div",he,[e("div",me,[e("div",be,[e("div",fe,[e("div",Ce,[e("div",ke,[v(" Showing "),e("span",null,_(O.value)+" of "+_(P.value),1),v(" Products ")])]),e("div",xe,[e("div",we,[ye,e("div",Pe,[I(e("select",{name:"sortby",id:"sortby",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t)},Ne,512),[[le,x.value]])])])])]),e("div",Se,[e("div",Ve,[(d(!0),u(w,null,y(D.value,t=>(d(),u("div",{class:"col-6 col-md-3 col-lg-2 col-xl-2",key:t.id},[e("div",Le,[e("figure",Be,[f(s,{to:V(t.id,t.name,t.model_number,n.value.name)},{default:g(()=>[I(e("img",{src:"/storage/"+t.main_image_path,alt:"Product image",class:"product-image"},null,8,Me),[[c,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"]),Ae,e("div",Oe,[e("button",{type:"button",onClick:r=>q(t),class:"btn-product btn-cart"},Ee,8,Te)])]),e("div",Fe,[e("div",Ie,[f(s,{to:V(t.id,t.name,t.model_number,n.value.name)},{default:g(()=>[v(_(t.product_brand.name),1)]),_:2},1032,["to"])]),e("h3",ze,[f(s,{to:V(t.id,t.name,t.model_number,n.value.name)},{default:g(()=>[v(_(t.name),1)]),_:2},1032,["to"])]),Re])])]))),128))])]),e("nav",qe,[e("ul",Ze,[e("li",{class:M(["page-item",{disabled:l.value===1}])},[f(s,{class:"page-link page-link-prev",to:L(n.value.id,n.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:H},{default:g(()=>[je,v(" Prev ")]),_:1},8,["to"])],2),(d(!0),u(w,null,y(K.value,t=>(d(),u("li",{class:M(["page-item",{active:t===l.value}]),key:t},[J(t)?(d(),ie(s,{key:0,class:"page-link",to:L(n.value.id,n.value.name,t),onClick:r=>U(t)},{default:g(()=>[v(_(t),1)]),_:2},1032,["to","onClick"])):z("",!0)],2))),128)),e("li",Ge," of "+_(C.value),1),e("li",{class:M(["page-item",{disabled:l.value===C.value}])},[f(s,{class:"page-link page-link-next",to:L(n.value.id,n.value.name,l.value+1),"aria-label":"Next",onClick:Q},{default:g(()=>[v(" Next "),He]),_:1},8,["to"])],2)])])]),e("aside",Qe,[e("div",Ue,[e("div",{class:"widget widget-clean"},[Ye,e("button",{onClick:G,class:"btn btn-primary btn-sm sidebar-filter-clear"}," Clean All ")]),N.value.length?(d(),u("div",Je,[Ke,e("div",We,[e("div",Xe,[e("div",et,[(d(!0),u(w,null,y(N.value,t=>(d(),u("div",{class:"filter-item",key:t.id},[e("div",tt,[e("input",{type:"checkbox",class:"custom-control-input",id:"cat-"+t.id,value:t.id,onChange:r=>Z(t.id)},null,40,at),e("label",{class:"custom-control-label",for:"cat-"+t.id},_(t.name),9,st)]),e("span",ot,_(t.category_products_count),1)]))),128))])])])])):z("",!0),e("div",lt,[it,e("div",ct,[e("div",nt,[e("div",dt,[(d(!0),u(w,null,y(T.value,t=>(d(),u("div",{key:t.id,class:"filter-item"},[e("div",rt,[e("input",{type:"checkbox",class:"custom-control-input",id:"brand-"+t.product_brand.id,value:t.product_brand.id,onChange:r=>j(t.product_brand.id)},null,40,ut),e("label",{class:"custom-control-label",for:"brand-"+t.product_brand.id},_(t.product_brand.name),9,_t)])]))),128))])])])])])])])])])])}}};export{ht as default};
