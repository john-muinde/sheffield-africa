import{e as b,v as e}from"./index-0d6930bf.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import"./_commonjsHelpers-23102255.js";const N={class:"own-product position-relative px-2 product-card"},V={class:"savings-badge"},x={class:"product-image-container"},y={key:0,class:"image-skeleton"},C=["alt"],w={class:"product-details"},k={class:"text-start product-name"},S={class:"fw-bold text-start text-muted product-description"},D={class:"pricing-section"},h={class:"fw-bold text-center text-muted original-price"},B={class:"price-tag bg-danger fw-bold text-uppercase"},$={class:"product-action-image"},T={class:"btn-text"},L={key:0,class:"btn-loading-icon"},M={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(p){const o=p.product,m=b(),s=e.ref(!1),c=e.ref(!1),d=e.ref(!1),_=e.computed(()=>s.value?"Adding...":"Add to Cart"),i=n=>new Intl.NumberFormat("en-KE").format(n),f=(n,t)=>Math.round((n-t)/n*100),g=n=>{if(!s.value){s.value=!0;try{const t=window.Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:4e3,padding:"2em"});m.dispatch("cart/addToCart",n),t.fire({icon:"success",title:"Item added to cart",padding:"2em",customClass:{title:"swal-title-class"}})}catch(t){console.error(t),toast.fire({icon:"error",title:"Failed to add item to cart",padding:"2em",customClass:{title:"swal-title-class"}})}finally{s.value=!1}}},v=(n,t,l,u)=>{let r=t.replace(/ /g,"-").replace(/\//g,"-");r=r.replace(/-+/g,"-"),r=r.replace(/^-+|-+$/g,""),r=r.toLowerCase();let a=l.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return a=a.replace(/-+/g,"-"),a=a.replace(/^-+|-+$/g,""),`/kitchen/product/${n}/${r}-${a}`};return(n,t)=>{const l=e.resolveComponent("router-link"),u=e.resolveDirective("lazy");return e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("span",V," Save "+e.toDisplayString(f(e.unref(o).cost_price,e.unref(o).retail_price))+"% ",1),e.createElementVNode("div",x,[e.createVNode(l,{to:v(e.unref(o).id,e.unref(o).name,e.unref(o).model_number),class:"d-flex justify-content-center align-items-center mt-2"},{default:e.withCtx(()=>[d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",y)),e.withDirectives(e.createElementVNode("img",{alt:e.unref(o).name,class:"img img-fluid product-image",onLoad:t[0]||(t[0]=r=>d.value=!0)},null,40,C),[[u,"/storage/"+e.unref(o).main_image_path]])]),_:1},8,["to"])]),e.createElementVNode("div",w,[e.createElementVNode("span",k,e.toDisplayString(e.unref(o).name),1),e.createElementVNode("span",S,[e.createTextVNode(" SKU: "+e.toDisplayString(e.unref(o).sku)+" ",1),t[4]||(t[4]=e.createElementVNode("br",null,null,-1)),e.createTextVNode(" MODEL NUMBER: "+e.toDisplayString(e.unref(o).model_number),1)])]),e.createElementVNode("div",D,[e.createElementVNode("span",h," KES "+e.toDisplayString(i(e.unref(o).cost_price)),1),e.createElementVNode("div",B," KES "+e.toDisplayString(i(e.unref(o).retail_price)),1),e.createElementVNode("div",$,[e.createElementVNode("button",{class:e.normalizeClass(["btn-product btn-cart",{adding:s.value}]),onClick:t[1]||(t[1]=r=>g(e.unref(o))),onMouseenter:t[2]||(t[2]=r=>c.value=!0),onMouseleave:t[3]||(t[3]=r=>c.value=!1)},[e.createElementVNode("span",T,e.toDisplayString(_.value),1),s.value?(e.openBlock(),e.createElementBlock("div",L,t[5]||(t[5]=[e.createElementVNode("span",{class:"spinner"},null,-1)]))):e.createCommentVNode("",!0)],34)])]),t[6]||(t[6]=e.createElementVNode("button",{id:"scroll-top",title:"Back to Top"},[e.createElementVNode("i",{class:"icon-arrow-up"})],-1))])}}},I=E(M,[["__scopeId","data-v-88bbd4ba"]]);export{I as default};
