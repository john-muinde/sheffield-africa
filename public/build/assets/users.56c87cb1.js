import{r as c,c6 as h,cg as o}from"./index.15ec137f.js";import{$ as v}from"./Modal.cd9cbadc.js";function x(){const i=c([]),d=c({id:"",name:"",email:"",role:"",password:"",confirm_password:""}),n=h(),a=c({}),r=c(!1),p=async({page:e=1,search_id:s="",search_title:u="",search_global:t="",order_column:f="created_at",order_direction:y="desc"}={})=>{try{const l=await o("get",`/api/users?page=${e}&search_id=${s}&search_title=${u}&search_global=${t}&order_column=${f}&order_direction=${y}`);i.value=l}catch(l){a.value=l}};return{users:i,user:d,getUsers:p,getUser:async e=>{try{const s=await o("get",`/api/users/${e}`);d.value=s}catch(s){a.value=s}},storeUser:async e=>{if(r.value)return;r.value=!0,a.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);const u={headers:{"content-type":"multipart/form-data"}};try{await o("post","/api/users",s,u),n.push({name:"users.index"}),showToast("User saved successfully","success")}catch(t){a.value=t}finally{r.value=!1}},updateUser:async e=>{if(!r.value){r.value=!0,a.value={};try{await o("put",`/api/users/${e.id}`,e),n.push({name:"users.index"}),showToast("User updated successfully","success")}catch(s){a.value=s}finally{r.value=!1}}},deleteUser:async e=>{v.confirm({title:"Are you sure?",content:"You won't be able to revert this action!",okText:"Yes, delete it!",okType:"danger",cancelText:"No, cancel",onOk(){o("delete",`/api/users/${e}`).then(()=>{p(),n.push({name:"users.index"}),showToast("User deleted successfully","success")})},onCancel(){console.log("Cancel")}})},validationErrors:a,isLoading:r}}export{x as u};
