import{c2 as j,r as n,c as L,o as q,w as T,af as G,bO as H,X as K,bG as r,bH as c,bI as e,ag as v,bM as d,c4 as O,ac as b,bP as h,bK as $,e as m,bT as p,bN as B,W as R,bW as X}from"./index.1921c821.js";import{u as Z}from"./use-meta.33707622.js";import"./_commonjsHelpers.f037b798.js";const J={class:"main"},Q={class:"page-content mt-4"},U={class:"container"},Y={class:"row"},ee={class:"col-lg-9"},te={class:"toolbox"},ae={class:"toolbox-left"},se={class:"toolbox-info"},oe={class:"products mb-3"},le={class:"row"},ie={class:"product product-7 text-center"},ne={class:"product-media"},re=["src"],ce={class:"product-action"},de=["onClick"],ue={class:"product-body"},ge={class:"product-cat"},ve={class:"product-title"},pe={"aria-label":"Page navigation"},_e={class:"pagination justify-content-center"},me={class:"page-item-total"},be={class:"col-lg-3 order-lg-first"},he={class:"sidebar sidebar-shop"},fe={key:0,class:"widget widget-collapsible"},xe={class:"show",id:"widget-1"},ye={class:"widget-body"},we={class:"filter-items filter-items-count"},ke={class:"custom-control custom-checkbox"},Pe=["id"],Ce=["for"],Ne={class:"item-count"},$e={class:"widget widget-collapsible"},Ie={class:"show",id:"widget-4"},Ve={class:"widget-body"},Me={class:"filter-items"},Le={class:"custom-control custom-checkbox"},Te=["id"],Be=["for"],Ee={__name:"ProductCategory",setup(De){const g=j();n(g);const l=n(g.params.page?parseInt(g.params.page):1),f=n(12),x=n(0),y=n([]),I=n(0),w=n(g.params.id?parseInt(g.params.id):1),k=n([]),V=n([]),u=n([]),P=async()=>{try{const a=await axios.get("/api/get-products",{params:{page:l.value,per_page:f.value,category_id:w.value}});y.value=a.data.products.data,x.value=a.data.products.total,I.value=a.data.products.data.length,k.value=a.data.categories,V.value=a.data.brands,u.value=a.data.the_category,Z({title:u.value.name+" | Category"})}catch(a){console.error(a)}},_=L(()=>Math.ceil(x.value/f.value)),M=n([]),D=()=>{l.value>1&&l.value--},S=()=>{l.value<_.value&&l.value++},z=a=>{l.value=a},C=(a,s,i)=>{let o=s.replace(/ /g,"-").replace(/\//g,"-");o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase();let t=i.toLowerCase().replace(/ /g,"-").replace(/\//g,"-");return t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),`/product/${a}/${o}-${t}`},N=(a,s,i)=>{let o=s.replace(/ /g,"-").replace(/\//g,"-");return o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o=o.toLowerCase(),`/category/${a}/${o}/page/${i}`},A=()=>{M.value=y.value.slice(0,0+f.value)},E=a=>Number.isInteger(a),F=L(()=>{const a=[];l.value>1&&a.push("Prev");let i=Math.max(1,l.value-Math.floor(5/2)),o=Math.min(i+5-1,_.value);o-i<5-1&&(i=Math.max(1,o-5+1));for(let t=i;t<=o;t++)a.push(t);return l.value<_.value&&a.push("Next"),a});return q(()=>{P()}),T(l,P),T(y,A),G(()=>{const a=g.params;g.query,a.id!==""&&w!==a.id&&(l.value=1,w.value=a.id?parseInt(a.id):1,a.page!==""&&l!==a.page&&(l.value=a.page?parseInt(a.page):1),P())}),(a,s)=>{const i=H("router-link"),o=K("lazy");return r(),c("main",J,[e("div",Q,[e("div",U,[e("div",Y,[e("div",ee,[e("div",te,[e("div",ae,[e("div",se,[s[0]||(s[0]=v(" Showing ")),e("span",null,d(I.value)+" of "+d(x.value),1),s[1]||(s[1]=v(" Products "))])]),s[2]||(s[2]=O('<div class="toolbox-right"><div class="toolbox-sort"><label for="sortby">Sort by:</label><div class="select-custom"><select name="sortby" id="sortby" class="form-control"><option value="name"> Name A - Z </option><option value="date">Date</option></select></div></div></div>',1))]),e("div",oe,[e("div",le,[(r(!0),c(b,null,h(M.value,t=>(r(),c("div",{class:"col-6 col-md-3 col-lg-3 col-xl-3",key:t.id},[e("div",ie,[e("figure",ne,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[R(e("img",{src:"/storage/"+t.main_image_path,alt:"Product image",class:"product-image"},null,8,re),[[o,"/storage/"+t.main_image_path,"src"]])]),_:2},1032,["to"]),s[4]||(s[4]=e("div",{class:"product-action-vertical"},null,-1)),e("div",ce,[e("button",{type:"button",onClick:W=>a.addToCart(t),class:"btn-product btn-cart"},s[3]||(s[3]=[e("span",null,"Add to Cart",-1)]),8,de)])]),e("div",ue,[e("div",ge,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[v(d(t.product_brand.name),1)]),_:2},1032,["to"])]),e("h3",ve,[m(i,{to:C(t.id,t.name,t.model_number)},{default:p(()=>[v(d(t.name),1)]),_:2},1032,["to"])]),s[5]||(s[5]=e("div",{class:"ratings-container"},null,-1))])])]))),128))])]),e("nav",pe,[e("ul",_e,[e("li",{class:$(["page-item",{disabled:l.value===1}])},[m(i,{class:"page-link page-link-prev",to:N(u.value.id,u.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:D},{default:p(()=>s[6]||(s[6]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),v(" Prev ")])),_:1},8,["to"])],2),(r(!0),c(b,null,h(F.value,t=>(r(),c("li",{class:$(["page-item",{active:t===l.value}]),key:t},[E(t)?(r(),X(i,{key:0,class:"page-link",to:N(u.value.id,u.value.name,t),onClick:W=>z(t)},{default:p(()=>[v(d(t),1)]),_:2},1032,["to","onClick"])):B("",!0)],2))),128)),e("li",me," of "+d(_.value),1),e("li",{class:$(["page-item",{disabled:l.value===_.value}])},[m(i,{class:"page-link page-link-next",to:N(u.value.id,u.value.name,l.value+1),"aria-label":"Next",onClick:S},{default:p(()=>s[7]||(s[7]=[v(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",be,[e("div",he,[s[10]||(s[10]=e("div",{class:"widget widget-clean"},[e("label",null,"Filters:"),e("a",{href:"#",class:"sidebar-filter-clear"},"Clean All")],-1)),k.value.length?(r(),c("div",fe,[s[8]||(s[8]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",xe,[e("div",ye,[e("div",we,[(r(!0),c(b,null,h(k.value,t=>(r(),c("div",{class:"filter-item",key:t.id},[e("div",ke,[e("input",{type:"checkbox",class:"custom-control-input",id:"cat-"+t.id},null,8,Pe),e("label",{class:"custom-control-label",for:"cat-"+t.id},d(t.name),9,Ce)]),e("span",Ne,d(t.category_products_count),1)]))),128))])])])])):B("",!0),e("div",$e,[s[9]||(s[9]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",Ie,[e("div",Ve,[e("div",Me,[(r(!0),c(b,null,h(V.value,t=>(r(),c("div",{key:t.id,class:"filter-item"},[e("div",Le,[e("input",{type:"checkbox",class:"custom-control-input",id:"brand-"+t.product_brand},null,8,Te),e("label",{class:"custom-control-label",for:"brand-"+t.product_brand},d(t.product_brand.name),9,Be)])]))),128))])])])])])])])])])])}}};export{Ee as default};
