import{v as e,a as x}from"./index-0d6930bf.js";import"./use-meta-44934223.js";import{u as S}from"./projects-ef8b80ba.js";import{u as F}from"./clients-e2e2c9fb.js";import{d as f,u as C,a as i}from"./vee-validate-b69de5fd.js";import{r as D,m as L}from"./rules-2d323bf3.js";/* empty css                                     */import{F as d}from"./file-upload-with-preview.esm-03fb8eae.js";import{q}from"./vue3-quill-c4bb341a.js";import"./_commonjsHelpers-23102255.js";import"./index-ab450292.js";import"./_plugin-vue_export-helper-c27b6911.js";const U={class:"container"},M={class:"container"},T={class:"row"},G={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},A={class:"statbox panel box box-shadow"},R={class:"panel-body"},X={class:"row"},Z={class:"form-group col-md-12"},z={class:"text-danger mt-1"},W={class:"text-danger mt-1"},$={class:"form-group"},H={class:"text-danger mt-1"},J={class:"text-danger mt-1"},K={class:"form-group"},O={class:"custom-file-container","data-upload-id":"myFirstImage"},Q={class:"custom-file-container__custom-file",for:"main_image"},Y={class:"custom-file-container","data-upload-id":"myProjectGallery"},ee={class:"custom-file-container__custom-file",for:"project_gallery"},te={id:"project_gallery",ref:"project_gallery",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",multiple:""},le={class:"custom-file-container__image-preview"},oe=["onClick"],ne={class:"form-group col-md-4"},ae={class:"text-danger mt-1"},ie={class:"text-danger mt-1"},se=["disabled"],re={class:""},ce={key:0},me={key:1},Be={__name:"edit",setup(de){f("required",D),f("min",L);const v={name:"required|min:3",client:"required",content:"required",is_published:"required"},{validate:E,errors:s,resetForm:ue}=C({validationSchema:v}),{project:n,getProject:V,updateProject:u,validationErrors:r,isLoading:c,deleteProjectImage:N}=S(),{getClientList:b,clientList:y}=F(),{value:h}=i("name",null,{initialValue:""}),{value:k}=i("client",null,{initialValue:""}),{value:j}=i("content",null,{initialValue:""}),{value:B}=i("is_published",null,{initialValue:""}),l=e.reactive({name:h,content:j,client:k,is_published:B,main_image:"",project_gallery:""}),w=e.ref({modules:{}}),I=x();function P(){E().then(m=>{if(m.valid){l.client&&l.client.id?l.client=l.client.id:l.client=null;const a=document.getElementById("project_gallery").files;a.length>0?u(l,a):u(l,[])}})}return e.onMounted(()=>{b(),V(I.params.id),e.watchEffect(()=>{if(n.value&&n.value.main_image_path){const a={images:{baseImage:"/storage/"+n.value.main_image_path,backgroundImage:""}};new d("myFirstImage",a)}else new d("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new d("myProjectGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),e.watchEffect(()=>{l.id=n.value.id,l.client=n.value.client_json,l.name=n.value.name,l.content=n.value.content,l.is_published=n.value.is_published,l.project_images=n.value.project_images}),(m,t)=>{var p,_,g;const a=e.resolveComponent("multiselect");return e.openBlock(),e.createElementBlock("div",U,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[5]||(t[5]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Projects")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"Edit Project")])])])])])],-1))])),e.createElementVNode("div",M,[e.createElementVNode("div",T,[e.createElementVNode("div",G,[e.createElementVNode("div",A,[t[19]||(t[19]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null,"Edit Project")])])])],-1)),e.createElementVNode("div",R,[e.createElementVNode("form",{onSubmit:e.withModifiers(P,["prevent"])},[e.createElementVNode("div",X,[e.createElementVNode("div",Z,[t[6]||(t[6]=e.createElementVNode("label",{for:"post-name"},"Project Name",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[0]||(t[0]=o=>l.name=o),type:"text",class:"form-control",placeholder:"Enter Project Name ..."},null,512),[[e.vModelText,l.name]]),e.createElementVNode("div",z,e.toDisplayString(e.unref(s).name),1),e.createElementVNode("div",W,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((p=e.unref(r))==null?void 0:p.name,o=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o),1))),256))])]),e.createElementVNode("div",$,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-client",class:"form-label"},"Select Client",-1)),e.createVNode(a,{modelValue:l.client,"onUpdate:modelValue":t[1]||(t[1]=o=>l.client=o),options:e.unref(y),reduce:o=>o.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Client ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"]),e.createElementVNode("div",H,e.toDisplayString(e.unref(s).client),1),e.createElementVNode("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((_=e.unref(r))==null?void 0:_.client,o=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o),1))),256))])]),e.createElementVNode("div",K,[t[8]||(t[8]=e.createElementVNode("label",{for:"post-content"},"Project Description",-1)),e.createVNode(e.unref(q),{value:l.content,"onUpdate:value":t[2]||(t[2]=o=>l.content=o),options:w.value,placeholder:"Enter Project Description ..."},null,8,["value","options"])]),e.createElementVNode("div",O,[t[11]||(t[11]=e.createElementVNode("label",null,[e.createTextVNode("Upload Main Project Image "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",Q,[e.createElementVNode("input",{id:"main_image",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:t[3]||(t[3]=o=>l.main_image=o.target.files[0])},null,32),t[9]||(t[9]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[10]||(t[10]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),t[12]||(t[12]=e.createElementVNode("div",{class:"custom-file-container__image-preview"},null,-1))]),e.createElementVNode("div",Y,[t[16]||(t[16]=e.createElementVNode("label",null,[e.createTextVNode("Project Gallery (multiple images allowed) "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",ee,[e.createElementVNode("input",te,null,512),t[13]||(t[13]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[14]||(t[14]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),e.createElementVNode("div",le,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.project_images,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"custom-file-container__image-multi-preview",style:e.normalizeStyle("background-image: url(/storage/"+o.name+")")},[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:pe=>e.unref(N)(o.id)},t[15]||(t[15]=[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"Ã—",-1)]),8,oe)],4))),128))])]),e.createElementVNode("div",ne,[t[18]||(t[18]=e.createElementVNode("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1)),e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("select",{id:"is_published","onUpdate:modelValue":t[4]||(t[4]=o=>l.is_published=o),class:"form-select"},t[17]||(t[17]=[e.createElementVNode("option",{value:""}," Select Publishing Status ... ",-1),e.createElementVNode("option",{selected:"",value:"1"}," Published ",-1),e.createElementVNode("option",{value:"0"}," Not Published ",-1)]),512),[[e.vModelSelect,l.is_published]])]),e.createElementVNode("div",ae,e.toDisplayString(e.unref(s).is_published),1),e.createElementVNode("div",ie,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((g=e.unref(r))==null?void 0:g.is_published,o=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o),1))),256))])])]),e.createElementVNode("button",{disabled:e.unref(c),class:"btn btn-primary mt-3"},[e.withDirectives(e.createElementVNode("div",re,null,512),[[e.vShow,e.unref(c)]]),e.unref(c)?(e.openBlock(),e.createElementBlock("span",ce,"Processing...")):(e.openBlock(),e.createElementBlock("span",me,"Update"))],8,se)],32)])])])])])])}}};export{Be as default};
