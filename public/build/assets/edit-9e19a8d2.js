import{v as e,a as C}from"./index-cf71ea16.js";import"./use-meta-abe0c1f5.js";import{u as B}from"./csrs-2dbe2c0f.js";import{d as g,u as x,a as i}from"./vee-validate-970b2571.js";import{r as F,m as D}from"./rules-2d323bf3.js";/* empty css                                     */import{F as d}from"./file-upload-with-preview.esm-03fb8eae.js";import{q as m}from"./vue3-quill-fd11d280.js";import"./_commonjsHelpers-23102255.js";import"./_plugin-vue_export-helper-c27b6911.js";const R={class:"container"},q={class:"container"},U={class:"row"},L={id:"",class:"col-lg-12 layout-spacing layout-top-spacing"},P={class:"statbox panel box box-shadow"},M={class:"panel-body"},T={class:"row"},j={class:"form-group col-md-12"},G={class:"text-danger mt-1"},A={class:"text-danger mt-1"},X={class:"form-group"},Z={class:"form-group"},z={class:"form-group"},W={class:"custom-file-container","data-upload-id":"myFirstImage"},$={class:"custom-file-container__custom-file",for:"main_image"},H={class:"custom-file-container","data-upload-id":"myCsrGallery"},J={class:"custom-file-container__custom-file",for:"csr_gallery"},K={id:"csr_gallery",ref:"csr_gallery",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",multiple:""},O={class:"custom-file-container__image-preview"},Q=["onClick"],Y={class:"form-group col-md-4"},ee={class:"text-danger mt-1"},te={class:"text-danger mt-1"},le=["disabled"],oe={class:""},ne={key:0},ae={key:1},be={__name:"edit",setup(ie){g("required",F),g("min",D);const f={name:"required|min:3",csr_introduction:"required",company_involvement:"required",collaborations_and_partnership:"required|min:3",is_published:"required"},{validate:E,errors:u,resetForm:se}=x({validationSchema:f}),{csr:n,getCsr:V,updateCsr:p,validationErrors:_,isLoading:s,getCsrList:re,csrList:ce,deleteCsrImage:N}=B(),{value:b}=i("name",null,{initialValue:""}),{value:y}=i("csr_introduction",null,{initialValue:""}),{value:h}=i("company_involvement",null,{initialValue:""}),{value:k}=i("collaborations_and_partnership",null,{initialValue:""}),{value:I}=i("is_published",null,{initialValue:""}),l=e.reactive({name:b,csr_introduction:y,company_involvement:h,collaborations_and_partnership:k,is_published:I,main_image:"",csr_gallery:""}),r=e.ref({modules:{}}),w=C();function S(){E().then(c=>{if(c.valid){const a=document.getElementById("csr_gallery").files;a.length>0?p(l,a):p(l,[])}})}return e.onMounted(()=>{V(w.params.id),e.watchEffect(()=>{if(n.value&&n.value.main_image_path){const a={images:{baseImage:"/storage/"+n.value.main_image_path,backgroundImage:""}};new d("myFirstImage",a)}else new d("myFirstImage",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),new d("myCsrGallery",{images:{baseImage:"/assets/images/file-preview.png",backgroundImage:""}})}),e.watchEffect(()=>{l.id=n.value.id,l.name=n.value.name,l.csr_introduction=n.value.csr_introduction,l.company_involvement=n.value.company_involvement,l.collaborations_and_partnership=n.value.collaborations_and_partnership,l.is_published=n.value.is_published,l.csr_images=n.value.csr_images}),(c,t)=>{var a,v;return e.openBlock(),e.createElementBlock("div",R,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[6]||(t[6]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"CSRs")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"Edit CSR")])])])])])],-1))])),e.createElementVNode("div",q,[e.createElementVNode("div",U,[e.createElementVNode("div",L,[e.createElementVNode("div",P,[t[21]||(t[21]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null,"Edit CSR")])])])],-1)),e.createElementVNode("div",M,[e.createElementVNode("form",{onSubmit:e.withModifiers(S,["prevent"])},[e.createElementVNode("div",T,[e.createElementVNode("div",j,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-name"},"CSR Name",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[0]||(t[0]=o=>l.name=o),type:"text",class:"form-control",placeholder:"Enter CSR Name ..."},null,512),[[e.vModelText,l.name]]),e.createElementVNode("div",G,e.toDisplayString(e.unref(u).name),1),e.createElementVNode("div",A,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((a=e.unref(_))==null?void 0:a.name,o=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o),1))),256))])]),e.createElementVNode("div",X,[t[8]||(t[8]=e.createElementVNode("label",{for:"csr_introduction"},"CSR Introduction",-1)),e.createVNode(e.unref(m),{id:"csr_introduction",value:l.csr_introduction,"onUpdate:value":t[1]||(t[1]=o=>l.csr_introduction=o),options:r.value,placeholder:"Enter Short Description ..."},null,8,["value","options"])]),e.createElementVNode("div",Z,[t[9]||(t[9]=e.createElementVNode("label",{for:"post_description"},"Company company_involvement",-1)),e.createVNode(e.unref(m),{value:l.company_involvement,"onUpdate:value":t[2]||(t[2]=o=>l.company_involvement=o),options:r.value,placeholder:"Enter Description ..."},null,8,["value","options"])]),e.createElementVNode("div",z,[t[10]||(t[10]=e.createElementVNode("label",{for:"post_description"},"Collaborations and collaborations_and_partnerships",-1)),e.createVNode(e.unref(m),{value:l.collaborations_and_partnership,"onUpdate:value":t[3]||(t[3]=o=>l.collaborations_and_partnership=o),options:r.value,placeholder:"Enter Technical Specification ..."},null,8,["value","options"])]),e.createElementVNode("div",W,[t[13]||(t[13]=e.createElementVNode("label",null,[e.createTextVNode("Upload Main CSR Image "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",$,[e.createElementVNode("input",{id:"main_image",type:"file",class:"custom-file-container__custom-file__custom-file-input",accept:"image/*",onChange:t[4]||(t[4]=o=>l.main_image=o.target.files[0])},null,32),t[11]||(t[11]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[12]||(t[12]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),t[14]||(t[14]=e.createElementVNode("div",{class:"custom-file-container__image-preview"},null,-1))]),e.createElementVNode("div",H,[t[18]||(t[18]=e.createElementVNode("label",null,[e.createTextVNode("CSR Gallery (multiple images allowed) "),e.createElementVNode("a",{href:"javascript:void(0)",class:"custom-file-container__image-clear",title:"Clear Image"},"x")],-1)),e.createElementVNode("label",J,[e.createElementVNode("input",K,null,512),t[15]||(t[15]=e.createElementVNode("input",{type:"hidden",name:"MAX_FILE_SIZE",value:"10485760"},null,-1)),t[16]||(t[16]=e.createElementVNode("span",{class:"custom-file-container__custom-file__custom-file-control"},null,-1))]),e.createElementVNode("div",O,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.csr_images,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"custom-file-container__image-multi-preview",style:e.normalizeStyle("background-image: url(/storage/"+o.name+")")},[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear",onClick:de=>e.unref(N)(o.id)},t[17]||(t[17]=[e.createElementVNode("span",{class:"custom-file-container__image-multi-preview__single-image-clear__icon","data-upload-token":""},"Ã—",-1)]),8,Q)],4))),128))])]),e.createElementVNode("div",Y,[t[20]||(t[20]=e.createElementVNode("label",{for:"is_published",class:"col-form-label"},"Publishing Status",-1)),e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("select",{id:"is_published","onUpdate:modelValue":t[5]||(t[5]=o=>l.is_published=o),class:"form-select"},t[19]||(t[19]=[e.createElementVNode("option",{value:""}," Select Publishing Status ... ",-1),e.createElementVNode("option",{selected:"",value:"1"}," Published ",-1),e.createElementVNode("option",{value:"0"}," Not Published ",-1)]),512),[[e.vModelSelect,l.is_published]])]),e.createElementVNode("div",ee,e.toDisplayString(e.unref(u).is_published),1),e.createElementVNode("div",te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList((v=e.unref(_))==null?void 0:v.is_published,o=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(o),1))),256))])])]),e.createElementVNode("button",{disabled:e.unref(s),class:"btn btn-primary mt-3"},[e.withDirectives(e.createElementVNode("div",oe,null,512),[[e.vShow,e.unref(s)]]),e.unref(s)?(e.openBlock(),e.createElementBlock("span",ne,"Processing...")):(e.openBlock(),e.createElementBlock("span",ae,"Update"))],8,le)],32)])])])])])])}}};export{be as default};
