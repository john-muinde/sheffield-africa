import{a as U,v as e,d as F}from"./index-2f855d2c.js";/* empty css                     *//* empty css                  *//* empty css                    */import{V as $}from"./vue-draggable-next.esm-bundler-60094dbf.js";import{f as A}from"./index-7926c93b.js";import"./use-meta-131940dc.js";import{a as v}from"./vee-validate-2fa7d18a.js";import{u as H}from"./categories-4ea6fe95.js";import"./_commonjsHelpers-23102255.js";import"./index-f055510e.js";import"./createLucideIcon-04d848b1.js";import"./moment-a9aaa855.js";import"./index-431cc3fd.js";const R={class:"layout-px-spacing"},q={class:"row layout-top-spacing"},G={class:"col-xl-12 col-lg-12 col-sm-12 layout-spacing"},J={class:"panel br-6 p-0"},K={class:"panel-body"},Q={class:"row d-flex align-items-center justify-content-between"},W={class:"form-group col-md-1"},X={class:"form-group col-md-3"},Y={class:"form-group col-md-3"},Z={class:"form-group col-md-4"},ee={class:"table-responsive"},te={id:"__BVID__415",role:"table","aria-busy":"false","aria-colcount":"5",class:"table table-striped table-bordered"},ae={role:"rowgroup"},oe={role:"row"},le={key:0,role:"columnheader",scope:"col","aria-colindex":"0"},re={role:"rowgroup"},ne={key:0,"aria-colindex":"0",class:"handle"},se={"aria-colindex":"1",role:"cell"},ie={"aria-colindex":"2",role:"cell"},de={"aria-colindex":"3",role:"cell"},ce={"aria-colindex":"4",role:"cell"},me={key:0,class:"badge badge-success inv-status"},ue={key:1,class:"badge badge-danger inv-status"},pe={"aria-colindex":"5",role:"cell"},ge={"aria-colindex":"6",role:"cell",class:"text-center"},ve=["onClick"],Ve={"aria-label":"Page navigation",style:{"margin-top":"20px"}},Ne={class:"pagination justify-content-center"},Te={__name:"index",setup(Ee){const{getCategoryList:fe,categoryList:k,getMainCategoryList:_,categoryMainList:y,getSelectedCategoryList:C,deleteCategory:w,updateDatabaseOrder:P}=H(),c=U(),r=e.ref(c.params.page?g(c.params.page):1),b=e.ref(0),B=e.ref(0),V=e.ref(c.params.id?g(c.params.id):1),N=e.ref([]),m=e.ref([]),{value:E}=v("perPage",null,{initialValue:"20"}),{value:h}=v("filter_category_id",null,{initialValue:""}),{value:u}=v("main_category",null,{initialValue:""}),{value:D}=v("search",null,{initialValue:""}),l=e.reactive({perPage:E,filter_category_id:h,main_category:u,search:D}),f=async()=>{var o;try{l.main_category!=""&&l.search==""&&(l.perPage=1e4);const t=await F.get("/api/get-categories",{params:{page:r.value,per_page:l.perPage,category_id:V.value,mainCategory:l.main_category.id,search:l.search,filter_category_id:((o=l.filter_category_id)==null?void 0:o.id)||null}});b.value=t.data.categories.total,B.value=t.data.categories.data.length,N.value=t.data.categories.data}catch(t){console.error(t)}},d=e.computed(()=>Math.ceil(b.value/E.value)),i=e.ref([]),S=()=>{r.value>1&&r.value--},x=()=>{r.value<d.value&&r.value++},M=o=>{r.value=o},L=()=>{i.value=N.value.slice(0,0+E.value)},T=o=>Number.isInteger(o),I=e.computed(()=>{const o=[];r.value>1&&o.push("Prev");let n=Math.max(1,r.value-Math.floor(5/2)),s=Math.min(n+5-1,d.value);s-n<5-1&&(n=Math.max(1,s-5+1));for(let a=n;a<=s;a++)o.push(a);return r.value<d.value&&o.push("Next"),o}),p=(o,t)=>`/admin/categories/page/${t}`;e.onMounted(()=>{f(),_()}),e.watch([r,l],f),e.watch(u,o=>{if(u){const t=l.main_category.id;l.filter_category_id=null,C(t)}}),e.watch([l,u,h,N],L);const g=o=>{const t=o===""?null:parseInt(o);return isNaN(t)?null:t};e.watchEffect(()=>{const o=c.params;o.id!==""&&V.value!==g(o.id)&&(r.value=1,V.value=g(o.id),f())});const j=()=>{i.value.forEach(o=>{o.order=null})},z=o=>{const t=i.value.map(n=>n.id);P(t),i.value.forEach(n=>{const s=t.indexOf(n.id);n.order=s+1})};return(o,t)=>{const n=e.resolveComponent("multiselect"),s=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",R,[(e.openBlock(),e.createBlock(e.Teleport,{to:"#breadcrumb"},[t[5]||(t[5]=e.createElementVNode("ul",{class:"navbar-nav flex-row"},[e.createElementVNode("li",null,[e.createElementVNode("div",{class:"page-header"},[e.createElementVNode("nav",{class:"breadcrumb-one","aria-label":"breadcrumb"},[e.createElementVNode("ol",{class:"breadcrumb"},[e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},"Categories")]),e.createElementVNode("li",{class:"breadcrumb-item active","aria-current":"page"},[e.createElementVNode("span",null,"View Categories")])])])])])],-1))])),e.createElementVNode("div",q,[e.createElementVNode("div",G,[e.createElementVNode("div",J,[t[24]||(t[24]=e.createElementVNode("div",{class:"panel-heading pb-0"},[e.createElementVNode("div",{class:"row"},[e.createElementVNode("div",{class:"col-xl-12 col-md-12 col-sm-12 col-12"},[e.createElementVNode("h3",null,[e.createElementVNode("b",null,"View Categories")])])])],-1)),e.createElementVNode("div",K,[e.createElementVNode("div",Q,[e.createElementVNode("div",W,[t[7]||(t[7]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Per Page",-1)),e.withDirectives(e.createElementVNode("select",{id:"perpage","onUpdate:modelValue":t[0]||(t[0]=a=>l.perPage=a),class:"form-control form-select select"},t[6]||(t[6]=[e.createStaticVNode('<option selected value="20"> 20 </option><option value="60"> 60 </option><option value="100"> 100 </option><option value="500"> 500 </option><option value="1000"> 1000 </option><option value="10000"> 10000 </option>',6)]),512),[[e.vModelSelect,l.perPage]])]),e.createElementVNode("div",X,[t[8]||(t[8]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Segment",-1)),e.createVNode(n,{modelValue:l.main_category,"onUpdate:modelValue":t[1]||(t[1]=a=>l.main_category=a),options:e.unref(y),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"name",label:"name",placeholder:"Choose Segment ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",Y,[t[9]||(t[9]=e.createElementVNode("label",{for:"post-category",class:"form-label"},"Main Category",-1)),e.createVNode(n,{modelValue:l.filter_category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>l.filter_category_id=a),options:e.unref(k),reduce:a=>a.id,searchable:!0,"preselect-first":!0,"track-by":"id",label:"name",placeholder:"Choose Category (Optional) ...","selected-label":"","select-label":"","deselect-label":""},null,8,["modelValue","options","reduce"])]),e.createElementVNode("div",Z,[t[10]||(t[10]=e.createElementVNode("label",{for:"post-name"},"Search",-1)),e.withDirectives(e.createElementVNode("input",{id:"post-name","onUpdate:modelValue":t[3]||(t[3]=a=>l.search=a),type:"text",class:"form-control",placeholder:"Search ..."},null,512),[[e.vModelText,l.search]])])]),e.createElementVNode("div",ee,[e.createElementVNode("table",te,[e.createElementVNode("thead",ae,[e.createElementVNode("tr",oe,[l.main_category!==""?(e.openBlock(),e.createElementBlock("th",le,t[11]||(t[11]=[e.createElementVNode("div",null,null,-1)]))):e.createCommentVNode("",!0),t[12]||(t[12]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"1"},[e.createElementVNode("div",null,"Name")],-1)),t[13]||(t[13]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"2"},[e.createElementVNode("div",null,"Description")],-1)),t[14]||(t[14]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"3"},[e.createElementVNode("div",null,"Parent Category")],-1)),t[15]||(t[15]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"4"},[e.createElementVNode("div",null,"Status")],-1)),t[16]||(t[16]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"5"},[e.createElementVNode("div",null,"Created At")],-1)),t[17]||(t[17]=e.createElementVNode("th",{role:"columnheader",scope:"col","aria-colindex":"6","aria-label":"Action",class:"text-center"},[e.createElementVNode("div",null,"action")],-1))])]),e.createElementVNode("tbody",re,[e.createVNode(e.unref($),{id:"left-lovehandles",modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=a=>i.value=a),class:"drag-drop",group:"drag_handle",handle:".handle","ghost-class":"gu-transit","drag-class":"el-drag-ex-5",animation:200,onStart:j,onEnd:z},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,a=>(e.openBlock(),e.createElementBlock("tr",{key:a.id,role:"row",class:""},[l.main_category!==""?(e.openBlock(),e.createElementBlock("td",ne,t[18]||(t[18]=[e.createElementVNode("div",null,[e.createElementVNode("span",null,[e.createElementVNode("i",{class:"far fa-clone"})])],-1)]))):e.createCommentVNode("",!0),e.createElementVNode("td",se,e.toDisplayString(a.name),1),e.createElementVNode("td",ie,e.toDisplayString(a.description),1),e.createElementVNode("td",de,e.toDisplayString(a.parent?a.parent.name:"----"),1),e.createElementVNode("td",ce,[a.is_published===1?(e.openBlock(),e.createElementBlock("span",me,"Published")):e.createCommentVNode("",!0),a.is_published!==1?(e.openBlock(),e.createElementBlock("span",ue,"Not Published")):e.createCommentVNode("",!0)]),e.createElementVNode("td",pe,e.toDisplayString(e.unref(A)(a.created_at)),1),e.createElementVNode("td",ge,[e.createVNode(s,{to:{name:"categories.edit",params:{id:a.id}},class:"badge bg-info","data-bs-toggle":"tooltip","data-bs-placement":"top"},{default:e.withCtx(()=>t[19]||(t[19]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e.createElementVNode("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)])),_:2},1032,["to"]),e.createElementVNode("a",{href:"javascript:;",class:"ms-2 badge bg-danger","data-bs-toggle":"tooltip","data-bs-placement":"top",onClick:e.withModifiers(O=>e.unref(w)(a.id),["prevent"])},t[20]||(t[20]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e.createElementVNode("polyline",{points:"3 6 5 6 21 6"}),e.createElementVNode("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,ve)])]))),128))]),_:1},8,["modelValue"])])])]),e.createElementVNode("nav",Ve,[e.createElementVNode("ul",Ne,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===1}])},[e.createVNode(s,{class:"page-link page-link-prev",to:p(m.value.id,1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:S},{default:e.withCtx(()=>t[21]||(t[21]=[e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-left"})],-1),e.createTextVNode(" Prev ")])),_:1},8,["to"])],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(I.value,a=>(e.openBlock(),e.createElementBlock("li",{key:a,class:e.normalizeClass(["page-item",{active:a===r.value}])},[T(a)?(e.openBlock(),e.createBlock(s,{key:0,class:"page-link",to:p(m.value.id,a),onClick:O=>M(a)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1032,["to","onClick"])):e.createCommentVNode("",!0)],2))),128)),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===d.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:p(m.value.id,d.value),"aria-label":"Next",onClick:x},{default:e.withCtx(()=>t[22]||(t[22]=[e.createTextVNode(" Last "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2),e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:r.value===d.value}])},[e.createVNode(s,{class:"page-link page-link-next",to:p(m.value.id,r.value+1),"aria-label":"Next",onClick:x},{default:e.withCtx(()=>t[23]||(t[23]=[e.createTextVNode(" Next "),e.createElementVNode("span",{"aria-hidden":"true"},[e.createElementVNode("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])])])])}}};export{Te as default};
