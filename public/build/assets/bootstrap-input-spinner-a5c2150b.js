(function(p){var m=!1,q=p.fn.val;p.fn.val=function(i){return arguments.length>=1&&this[0]&&this[0]["bootstrap-input-spinner"]&&this[0].setValue&&this[0].setValue(i),q.apply(this,arguments)},p.fn.InputSpinner=p.fn.inputSpinner=function(i){var n={decrementButton:"<strong>-</strong>",incrementButton:"<strong>+</strong>",groupClass:"",buttonsClass:"btn-outline-secondary",buttonsWidth:"2.5rem",textAlign:"center",autoDelay:500,autoInterval:100,boostThreshold:10,boostMultiplier:"auto",locale:null};for(var r in i)n[r]=i[r];var R='<div class="input-group '+n.groupClass+'"><div class="input-group-prepend"><button style="min-width: '+n.buttonsWidth+'" class="btn btn-decrement '+n.buttonsClass+'" type="button">'+n.decrementButton+'</button></div><input type="text" style="text-align: '+n.textAlign+'" class="form-control"/><div class="input-group-append"><button style="min-width: '+n.buttonsWidth+'" class="btn btn-increment '+n.buttonsClass+'" type="button">'+n.incrementButton+"</button></div></div>",b=n.locale||navigator.language||"en-US";this.each(function(){var e=p(this);e[0]["bootstrap-input-spinner"]=!0,e.hide();var D=null,I=null,g=n.boostMultiplier==="auto",u=g?1:n.boostMultiplier,c=p(R),N=c.find(".btn-decrement"),L=c.find(".btn-increment"),s=c.find("input"),S=null,T=null,h=null,x=null,l=null;P();var w=new Intl.NumberFormat(b,{minimumFractionDigits:l,maximumFractionDigits:l}),f=parseFloat(e[0].value),y=0,B=e.attr("data-prefix")||"",A=e.attr("data-suffix")||"";if(B){var U=p('<span class="input-group-text">'+B+"</span>");c.find(".input-group-prepend").append(U)}if(A){var j=p('<span class="input-group-text">'+A+"</span>");c.find(".input-group-append").prepend(j)}e[0].setValue=function(t){d(t)};var G=new MutationObserver(function(){P(),d(f,!0)});G.observe(e[0],{attributes:!0}),e.after(c),d(f),s.on("paste input change focusout",function(t){var a=s[0].value,o=t.type==="focusout";a=Q(a),d(a,o),E(e,t.type)}),C(N[0],function(){H(-h)}),C(L[0],function(){H(h)}),O(document.body,function(){F()});function d(t,a){a===void 0&&(a=!0),isNaN(t)||t===""?(e[0].value="",a&&(s[0].value=""),f=0):(t=parseFloat(t),t=Math.min(Math.max(t,S),T),t=Math.round(t*Math.pow(10,l))/Math.pow(10,l),e[0].value=t,a&&(s[0].value=w.format(t)),f=t)}function E(t,a){a&&setTimeout(function(){var o;typeof Event=="function"?o=new Event(a,{bubbles:!0}):(o=document.createEvent("Event"),o.initEvent(a,!0,!0)),t[0].dispatchEvent(o)})}function H(t){s[0].disabled||(v(t),F(),D=setTimeout(function(){I=setInterval(function(){y>n.boostThreshold?g?(v(t*parseInt(u,10)),u<1e8&&(u=u*1.1),x&&(u=Math.min(x,u))):v(t*u):v(t),y++},n.autoInterval)},n.autoDelay))}function v(t){isNaN(f)&&(f=0),d(Math.round(f/t)*t+t),E(e,"input"),E(e,"change")}function F(){y=0,u=u=g?1:n.boostMultiplier,clearTimeout(D),clearTimeout(I)}function P(){s.prop("required",e.prop("required")),s.prop("placeholder",e.prop("placeholder"));var t=e.prop("disabled");s.prop("disabled",t),L.prop("disabled",t),N.prop("disabled",t),t&&F();var a=e.prop("class"),o="";/form-control-sm/g.test(a)?o="input-group-sm":/form-control-lg/g.test(a)&&(o="input-group-lg");var M=a.replace(/form-control(-(sm|lg))?/g,"");c.prop("class","input-group "+o+" "+n.groupClass),s.prop("class","form-control "+M),S=parseFloat(e.prop("min"))||0,T=isNaN(e.prop("max"))||e.prop("max")===""?1/0:parseFloat(e.prop("max")),h=parseFloat(e.prop("step"))||1,x=parseInt(e.attr("data-step-max"))||0;var W=parseInt(e.attr("data-decimals"))||0;l!==W&&(l=W,w=new Intl.NumberFormat(b,{minimumFractionDigits:l,maximumFractionDigits:l}))}function Q(t){var a=new Intl.NumberFormat(b),o=a.format(1111).replace(/1/g,""),M=a.format(1.1).replace(/1/g,"");return parseFloat(t.replace(new RegExp("\\"+o,"g"),"").replace(new RegExp("\\"+M),"."))}})};function O(i,n){i.addEventListener("mouseup",function(r){n(r)}),i.addEventListener("touchend",function(r){n(r)}),i.addEventListener("keyup",function(r){r.keyCode===32&&(m=!1,n(r))})}function C(i,n){i.addEventListener("mousedown",function(r){r.preventDefault(),n(r)}),i.addEventListener("touchstart",function(r){r.cancelable&&r.preventDefault(),n(r)}),i.addEventListener("keydown",function(r){r.keyCode===32&&!m&&(m=!0,n(r))})}})(jQuery);
