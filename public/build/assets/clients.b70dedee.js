import{q as r,aa as C,ab as v,ai as l}from"./app-setting.c15deff0.js";function P(){const d=r([]),p=r([]),f=r({name:"",phone:"",email:"",address:"",is_published:"",description:""}),u=C(),o=r({}),a=r(!1),i=v("$swal"),h=async(e=1,s="",t="",n="",c="created_at",m="desc")=>{l.get("/api/clients?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+n+"&order_column="+c+"&order_direction="+m).then(g=>{d.value=g.data})};return{clientList:p,clients:d,client:f,getClients:h,getClientList:async()=>{l.get("/api/client-list").then(e=>{p.value=e.data.data})},getClient:async e=>{l.get("/api/clients/"+e).then(s=>{f.value=s.data.data})},storeClient:async e=>{if(console.log(e),a.value)return;a.value=!0,o.value={};let s=new FormData;for(let n in e)e.hasOwnProperty(n)&&s.append(n,e[n]);const t={headers:{"content-type":"multipart/form-data"}};console.log(s),l.post("/api/clients",s,t).then(n=>{u.push({name:"clients.create"}),e.name=null,e.phone=null,e.email=null,e.address=null,e.description=null,e.main_image=null,e.is_published=null,i({icon:"success",title:"Client saved successfully"})}).catch(n=>{var c;(c=n.response)!=null&&c.data&&(o.value=n.response.data.errors)}).finally(()=>a.value=!1)},updateClient:async e=>{if(console.log(e),a.value)return;a.value=!0,o.value={};let s=new FormData;for(let t in e)e.hasOwnProperty(t)&&s.append(t,e[t]);console.log(s),l.put("/api/clients/"+e.id,e).then(t=>{u.push({name:"clients.index"}),i({icon:"success",title:"Client updated successfully"})}).catch(t=>{var n;(n=t.response)!=null&&n.data&&(o.value=t.response.data.errors)}).finally(()=>a.value=!1)},deleteClient:async e=>{i({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&l.delete("/api/clients/"+e).then(t=>{h(),u.push({name:"clients.index"}),i({icon:"success",title:"Client deleted successfully"})}).catch(t=>{i({icon:"error",title:"Something went wrong"})})})},validationErrors:o,isLoading:a}}export{P as u};
